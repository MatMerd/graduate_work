2022-10-27 at 01:52:58 | INFO | Setup middlewares
2022-10-27 at 01:52:58 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-27 at 01:52:58 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-27 at 01:52:58 | INFO | Started reloader process [70483] using StatReload
2022-10-27 at 01:52:59 | INFO | Setup middlewares
2022-10-27 at 01:52:59 | INFO | Setup middlewares
2022-10-27 at 01:52:59 | INFO | Setup middlewares
2022-10-27 at 01:52:59 | INFO | Started server process [70485]
2022-10-27 at 01:52:59 | INFO | Started server process [70485]
2022-10-27 at 01:52:59 | INFO | Waiting for application startup.
2022-10-27 at 01:52:59 | INFO | Waiting for application startup.
2022-10-27 at 01:52:59 | INFO | Redis has been initialize
2022-10-27 at 01:52:59 | INFO | Redis has been initialize
2022-10-27 at 01:52:59 | INFO | Application startup complete.
2022-10-27 at 01:52:59 | INFO | Application startup complete.
2022-10-27 at 02:00:34 | INFO | 127.0.0.1:57892 - "POST /api/v1/cinema_room HTTP/1.1" 404
2022-10-27 at 02:00:34 | INFO | 127.0.0.1:57892 - "POST /api/v1/cinema_room HTTP/1.1" 404
2022-10-27 at 02:01:56 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-27 at 02:01:56 | INFO | Shutting down
2022-10-27 at 02:01:56 | INFO | Shutting down
2022-10-27 at 02:01:56 | INFO | Waiting for application shutdown.
2022-10-27 at 02:01:56 | INFO | Waiting for application shutdown.
2022-10-27 at 02:01:56 | INFO | Application shutdown complete.
2022-10-27 at 02:01:56 | INFO | Application shutdown complete.
2022-10-27 at 02:01:56 | INFO | Finished server process [70485]
2022-10-27 at 02:01:56 | INFO | Finished server process [70485]
2022-10-27 at 02:01:57 | INFO | Setup middlewares
2022-10-27 at 02:01:57 | INFO | Setup middlewares
2022-10-27 at 02:01:57 | INFO | Setup middlewares
2022-10-27 at 02:01:57 | INFO | Started server process [71917]
2022-10-27 at 02:01:57 | INFO | Started server process [71917]
2022-10-27 at 02:01:57 | INFO | Waiting for application startup.
2022-10-27 at 02:01:57 | INFO | Waiting for application startup.
2022-10-27 at 02:01:57 | INFO | Redis has been initialize
2022-10-27 at 02:01:57 | INFO | Redis has been initialize
2022-10-27 at 02:01:57 | INFO | Application startup complete.
2022-10-27 at 02:01:57 | INFO | Application startup complete.
2022-10-27 at 02:02:55 | INFO | 127.0.0.1:34900 - "POST /api/v1/cinema_room/create HTTP/1.1" 404
2022-10-27 at 02:02:55 | INFO | 127.0.0.1:34900 - "POST /api/v1/cinema_room/create HTTP/1.1" 404
2022-10-27 at 02:03:17 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-27 at 02:03:17 | INFO | Shutting down
2022-10-27 at 02:03:17 | INFO | Shutting down
2022-10-27 at 02:03:17 | INFO | Waiting for application shutdown.
2022-10-27 at 02:03:17 | INFO | Waiting for application shutdown.
2022-10-27 at 02:03:17 | INFO | Application shutdown complete.
2022-10-27 at 02:03:17 | INFO | Application shutdown complete.
2022-10-27 at 02:03:17 | INFO | Finished server process [71917]
2022-10-27 at 02:03:17 | INFO | Finished server process [71917]
2022-10-27 at 02:03:18 | INFO | Setup middlewares
2022-10-27 at 02:03:18 | INFO | Setup middlewares
2022-10-27 at 02:03:18 | INFO | Setup middlewares
2022-10-27 at 02:03:18 | INFO | Started server process [72094]
2022-10-27 at 02:03:18 | INFO | Started server process [72094]
2022-10-27 at 02:03:18 | INFO | Waiting for application startup.
2022-10-27 at 02:03:18 | INFO | Waiting for application startup.
2022-10-27 at 02:03:18 | INFO | Redis has been initialize
2022-10-27 at 02:03:18 | INFO | Redis has been initialize
2022-10-27 at 02:03:18 | INFO | Application startup complete.
2022-10-27 at 02:03:18 | INFO | Application startup complete.
2022-10-27 at 02:03:19 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-27 at 02:03:19 | INFO | Shutting down
2022-10-27 at 02:03:19 | INFO | Shutting down
2022-10-27 at 02:03:19 | INFO | Waiting for application shutdown.
2022-10-27 at 02:03:19 | INFO | Waiting for application shutdown.
2022-10-27 at 02:03:19 | INFO | Application shutdown complete.
2022-10-27 at 02:03:19 | INFO | Application shutdown complete.
2022-10-27 at 02:03:19 | INFO | Finished server process [72094]
2022-10-27 at 02:03:19 | INFO | Finished server process [72094]
2022-10-27 at 02:03:19 | INFO | Setup middlewares
2022-10-27 at 02:03:19 | INFO | Setup middlewares
2022-10-27 at 02:03:19 | INFO | Setup middlewares
2022-10-27 at 02:03:19 | INFO | Started server process [72104]
2022-10-27 at 02:03:19 | INFO | Started server process [72104]
2022-10-27 at 02:03:19 | INFO | Waiting for application startup.
2022-10-27 at 02:03:19 | INFO | Waiting for application startup.
2022-10-27 at 02:03:19 | INFO | Redis has been initialize
2022-10-27 at 02:03:19 | INFO | Redis has been initialize
2022-10-27 at 02:03:19 | INFO | Application startup complete.
2022-10-27 at 02:03:19 | INFO | Application startup complete.
2022-10-27 at 02:03:22 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-27 at 02:03:22 | INFO | Shutting down
2022-10-27 at 02:03:22 | INFO | Shutting down
2022-10-27 at 02:03:22 | INFO | Waiting for application shutdown.
2022-10-27 at 02:03:22 | INFO | Waiting for application shutdown.
2022-10-27 at 02:03:22 | INFO | Application shutdown complete.
2022-10-27 at 02:03:22 | INFO | Application shutdown complete.
2022-10-27 at 02:03:22 | INFO | Finished server process [72104]
2022-10-27 at 02:03:22 | INFO | Finished server process [72104]
2022-10-27 at 02:03:22 | INFO | Setup middlewares
2022-10-27 at 02:03:22 | INFO | Setup middlewares
2022-10-27 at 02:03:22 | INFO | Setup middlewares
2022-10-27 at 02:03:22 | INFO | Started server process [72112]
2022-10-27 at 02:03:22 | INFO | Started server process [72112]
2022-10-27 at 02:03:22 | INFO | Waiting for application startup.
2022-10-27 at 02:03:22 | INFO | Waiting for application startup.
2022-10-27 at 02:03:22 | INFO | Redis has been initialize
2022-10-27 at 02:03:22 | INFO | Redis has been initialize
2022-10-27 at 02:03:22 | INFO | Application startup complete.
2022-10-27 at 02:03:22 | INFO | Application startup complete.
2022-10-27 at 02:03:23 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-27 at 02:03:23 | INFO | Shutting down
2022-10-27 at 02:03:23 | INFO | Shutting down
2022-10-27 at 02:03:23 | INFO | Waiting for application shutdown.
2022-10-27 at 02:03:23 | INFO | Waiting for application shutdown.
2022-10-27 at 02:03:23 | INFO | Application shutdown complete.
2022-10-27 at 02:03:23 | INFO | Application shutdown complete.
2022-10-27 at 02:03:23 | INFO | Finished server process [72112]
2022-10-27 at 02:03:23 | INFO | Finished server process [72112]
2022-10-27 at 02:03:23 | INFO | Setup middlewares
2022-10-27 at 02:03:23 | INFO | Setup middlewares
2022-10-27 at 02:03:23 | INFO | Setup middlewares
2022-10-27 at 02:03:23 | INFO | Started server process [72119]
2022-10-27 at 02:03:23 | INFO | Started server process [72119]
2022-10-27 at 02:03:23 | INFO | Waiting for application startup.
2022-10-27 at 02:03:23 | INFO | Waiting for application startup.
2022-10-27 at 02:03:23 | INFO | Redis has been initialize
2022-10-27 at 02:03:23 | INFO | Redis has been initialize
2022-10-27 at 02:03:23 | INFO | Application startup complete.
2022-10-27 at 02:03:23 | INFO | Application startup complete.
2022-10-27 at 02:03:30 | INFO | 127.0.0.1:45970 - "POST /api/v1/cinema_room/create HTTP/1.1" 500
2022-10-27 at 02:03:30 | INFO | 127.0.0.1:45970 - "POST /api/v1/cinema_room/create HTTP/1.1" 500
2022-10-27 at 02:03:30 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7fa75a34f520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7fa75a535fc0>
           └ <SpawnProcess name='SpawnProcess-6' parent=70483 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa75a535630>
    └ <SpawnProcess name='SpawnProcess-6' parent=70483 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa75a394070>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=70483 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=70483 started>
    │    └ <function subprocess_started at 0x7fa759820280>
    └ <SpawnProcess name='SpawnProcess-6' parent=70483 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa75a3940a0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7fa7597fb5b0>
           │       │   └ <uvicorn.server.Server object at 0x7fa75a3940a0>
           │       └ <function run at 0x7fa759daeef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7fa75858adc0>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa7581e9000>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa7581e9090>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa75816b2b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa758166410>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa75816b2b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa758165840>
          └ <fastapi.applications.FastAPI object at 0x7fa758166410>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa7581e9f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa7581658a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa758165840>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa7581e9f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa7581658d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa7581658a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 93, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa7581e9fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa758165930>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa7581658d0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa7581e9fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x7fa7581664a0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa758165930>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa7581e9fc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x7fa75850add0>
          └ <fastapi.routing.APIRoute object at 0x7fa758165de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 266, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa7581e9fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x7fa7581e9c60>
          └ <fastapi.routing.APIRoute object at 0x7fa758165de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 65, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa758167520>
                     └ <function get_request_handler.<locals>.app at 0x7fa7581e9bd0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa75850ba30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'cinema_crud': <crud.cinema_crud.CinemaCRUD object at 0x7fa757caaa10>, 'current_user_id': 'ea96cebd-cc63-4809-93c9-a0872fe1f...
                 │         └ <function create_cinema_room at 0x7fa759d39b40>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa758165e10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room.py", line 36, in create_cinema_room
    cinema_room = await cinema_crud.create_cinema_room(cinema_room_create=cinema_room_create, admin_id=current_user_id)
                        │           │                                     │                            └ 'ea96cebd-cc63-4809-93c9-a0872fe1f460'
                        │           │                                     └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                        │           └ <function CinemaCRUD.create_cinema_room at 0x7fa759b6c280>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7fa757caaa10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/crud/cinema_crud.py", line 16, in create_cinema_room
    cinema_room = await self.cinema_service.create_cinema_room(
                        │    │              └ <function CinemaService.create_cinema_room at 0x7fa759b6c670>
                        │    └ <service.cinema_service.CinemaService object at 0x7fa757caaa70>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7fa757caaa10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 21, in create_cinema_room
    return await super().create_cinema_room(cinema_key, cinema_room_data,admin_id=admin_id)
                                            │           │                         └ 'ea96cebd-cc63-4809-93c9-a0872fe1f460'
                                            │           └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                                            └ '273e1a93-ab39-48c0-a3d9-fa34e07aacf4'

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/base_service.py", line 13, in create_cinema_room
    return await self._create(cinema_key=cinema_key, cinema_room_data=cinema_room_data, admin_id=admin_id)
                 │    │                  │                            │                          └ 'ea96cebd-cc63-4809-93c9-a0872fe1f460'
                 │    │                  │                            └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                 │    │                  └ '273e1a93-ab39-48c0-a3d9-fa34e07aacf4'
                 │    └ <function CinemaService._create at 0x7fa759b6c4c0>
                 └ <service.cinema_service.CinemaService object at 0x7fa757caaa70>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 35, in _create
    await self.redis.set(cinema_key, cinema_room.dict()) # type: ignore
          │    │     │   │           │           └ <cyfunction BaseModel.dict at 0x7fa758ac5150>
          │    │     │   │           └ CinemaRoom(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1', admin_id='ea96cebd-cc63-4...
          │    │     │   └ '273e1a93-ab39-48c0-a3d9-fa34e07aacf4'
          │    │     └ <function Redis.set at 0x7fa758ebcdc0>
          │    └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
          └ <service.cinema_service.CinemaService object at 0x7fa757caaa70>

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1084, in execute_command
    await conn.send_command(*args)
          │    │             └ ('SET', '273e1a93-ab39-48c0-a3d9-fa34e07aacf4', {'film_view_timestamp': None, 'user_ids': None, 'film_id': 'd3cd829c-408b-4b1...
          │    └ <function Connection.send_command at 0x7fa759092b90>
          └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 886, in send_command
    self.pack_command(*args), check_health=kwargs.get("check_health", True)
    │    │             │                   │      └ <method 'get' of 'dict' objects>
    │    │             │                   └ {}
    │    │             └ ('SET', '273e1a93-ab39-48c0-a3d9-fa34e07aacf4', {'film_view_timestamp': None, 'user_ids': None, 'film_id': 'd3cd829c-408b-4b1...
    │    └ <function Connection.pack_command at 0x7fa759092d40>
    └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 939, in pack_command
    for arg in map(self.encoder.encode, args):
        │          │    │               └ (b'SET', '273e1a93-ab39-48c0-a3d9-fa34e07aacf4', {'film_view_timestamp': None, 'user_ids': None, 'film_id': 'd3cd829c-408b-4b...
        │          │    └ <member 'encoder' of 'Connection' objects>
        │          └ Connection<host=127.0.0.1,port=6379,db=1>
        └ b'273e1a93-ab39-48c0-a3d9-fa34e07aacf4'
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 137, in encode
    raise DataError(
          └ <class 'aioredis.exceptions.DataError'>

aioredis.exceptions.DataError: Invalid input of type: 'dict'. Convert to a bytes, string, int or float first.
2022-10-27 at 02:03:30 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7fa75a34f520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7fa75a535fc0>
           └ <SpawnProcess name='SpawnProcess-6' parent=70483 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa75a535630>
    └ <SpawnProcess name='SpawnProcess-6' parent=70483 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa75a394070>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=70483 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=70483 started>
    │    └ <function subprocess_started at 0x7fa759820280>
    └ <SpawnProcess name='SpawnProcess-6' parent=70483 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa75a3940a0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7fa7597fb5b0>
           │       │   └ <uvicorn.server.Server object at 0x7fa75a3940a0>
           │       └ <function run at 0x7fa759daeef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7fa75858adc0>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa7581e9000>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa7581e9090>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa75816b2b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa758166410>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa75816b2b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa758165840>
          └ <fastapi.applications.FastAPI object at 0x7fa758166410>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa7581e9f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa7581658a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa758165840>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa7581e9f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa7581658d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa7581658a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 93, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa7581e9fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa758165930>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa7581658d0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa7581e9fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x7fa7581664a0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa758165930>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa7581e9fc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x7fa75850add0>
          └ <fastapi.routing.APIRoute object at 0x7fa758165de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 266, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa7581e9fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa7581679d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x7fa7581e9c60>
          └ <fastapi.routing.APIRoute object at 0x7fa758165de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 65, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa758167520>
                     └ <function get_request_handler.<locals>.app at 0x7fa7581e9bd0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa75850ba30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'cinema_crud': <crud.cinema_crud.CinemaCRUD object at 0x7fa757caaa10>, 'current_user_id': 'ea96cebd-cc63-4809-93c9-a0872fe1f...
                 │         └ <function create_cinema_room at 0x7fa759d39b40>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa758165e10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room.py", line 36, in create_cinema_room
    cinema_room = await cinema_crud.create_cinema_room(cinema_room_create=cinema_room_create, admin_id=current_user_id)
                        │           │                                     │                            └ 'ea96cebd-cc63-4809-93c9-a0872fe1f460'
                        │           │                                     └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                        │           └ <function CinemaCRUD.create_cinema_room at 0x7fa759b6c280>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7fa757caaa10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/crud/cinema_crud.py", line 16, in create_cinema_room
    cinema_room = await self.cinema_service.create_cinema_room(
                        │    │              └ <function CinemaService.create_cinema_room at 0x7fa759b6c670>
                        │    └ <service.cinema_service.CinemaService object at 0x7fa757caaa70>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7fa757caaa10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 21, in create_cinema_room
    return await super().create_cinema_room(cinema_key, cinema_room_data,admin_id=admin_id)
                                            │           │                         └ 'ea96cebd-cc63-4809-93c9-a0872fe1f460'
                                            │           └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                                            └ '273e1a93-ab39-48c0-a3d9-fa34e07aacf4'

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/base_service.py", line 13, in create_cinema_room
    return await self._create(cinema_key=cinema_key, cinema_room_data=cinema_room_data, admin_id=admin_id)
                 │    │                  │                            │                          └ 'ea96cebd-cc63-4809-93c9-a0872fe1f460'
                 │    │                  │                            └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                 │    │                  └ '273e1a93-ab39-48c0-a3d9-fa34e07aacf4'
                 │    └ <function CinemaService._create at 0x7fa759b6c4c0>
                 └ <service.cinema_service.CinemaService object at 0x7fa757caaa70>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 35, in _create
    await self.redis.set(cinema_key, cinema_room.dict()) # type: ignore
          │    │     │   │           │           └ <cyfunction BaseModel.dict at 0x7fa758ac5150>
          │    │     │   │           └ CinemaRoom(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1', admin_id='ea96cebd-cc63-4...
          │    │     │   └ '273e1a93-ab39-48c0-a3d9-fa34e07aacf4'
          │    │     └ <function Redis.set at 0x7fa758ebcdc0>
          │    └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
          └ <service.cinema_service.CinemaService object at 0x7fa757caaa70>

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1084, in execute_command
    await conn.send_command(*args)
          │    │             └ ('SET', '273e1a93-ab39-48c0-a3d9-fa34e07aacf4', {'film_view_timestamp': None, 'user_ids': None, 'film_id': 'd3cd829c-408b-4b1...
          │    └ <function Connection.send_command at 0x7fa759092b90>
          └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 886, in send_command
    self.pack_command(*args), check_health=kwargs.get("check_health", True)
    │    │             │                   │      └ <method 'get' of 'dict' objects>
    │    │             │                   └ {}
    │    │             └ ('SET', '273e1a93-ab39-48c0-a3d9-fa34e07aacf4', {'film_view_timestamp': None, 'user_ids': None, 'film_id': 'd3cd829c-408b-4b1...
    │    └ <function Connection.pack_command at 0x7fa759092d40>
    └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 939, in pack_command
    for arg in map(self.encoder.encode, args):
        │          │    │               └ (b'SET', '273e1a93-ab39-48c0-a3d9-fa34e07aacf4', {'film_view_timestamp': None, 'user_ids': None, 'film_id': 'd3cd829c-408b-4b...
        │          │    └ <member 'encoder' of 'Connection' objects>
        │          └ Connection<host=127.0.0.1,port=6379,db=1>
        └ b'273e1a93-ab39-48c0-a3d9-fa34e07aacf4'
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 137, in encode
    raise DataError(
          └ <class 'aioredis.exceptions.DataError'>

aioredis.exceptions.DataError: Invalid input of type: 'dict'. Convert to a bytes, string, int or float first.
2022-10-27 at 02:04:47 | INFO | Shutting down
2022-10-27 at 02:04:47 | INFO | Shutting down
2022-10-27 at 02:04:47 | INFO | Waiting for application shutdown.
2022-10-27 at 02:04:47 | INFO | Waiting for application shutdown.
2022-10-27 at 02:04:47 | INFO | Application shutdown complete.
2022-10-27 at 02:04:47 | INFO | Application shutdown complete.
2022-10-27 at 02:04:47 | INFO | Finished server process [72119]
2022-10-27 at 02:04:47 | INFO | Finished server process [72119]
2022-10-27 at 02:04:47 | INFO | Stopping reloader process [70483]
2022-10-27 at 02:23:40 | INFO | Setup middlewares
2022-10-27 at 02:23:40 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-27 at 02:23:40 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-27 at 02:23:40 | INFO | Started reloader process [75294] using StatReload
2022-10-27 at 02:23:41 | INFO | Setup middlewares
2022-10-27 at 02:23:41 | INFO | Setup middlewares
2022-10-27 at 02:23:41 | INFO | Setup middlewares
2022-10-27 at 02:23:41 | INFO | Started server process [75296]
2022-10-27 at 02:23:41 | INFO | Started server process [75296]
2022-10-27 at 02:23:41 | INFO | Waiting for application startup.
2022-10-27 at 02:23:41 | INFO | Waiting for application startup.
2022-10-27 at 02:23:41 | INFO | Redis has been initialize
2022-10-27 at 02:23:41 | INFO | Redis has been initialize
2022-10-27 at 02:23:41 | INFO | Application startup complete.
2022-10-27 at 02:23:41 | INFO | Application startup complete.
2022-10-27 at 02:23:43 | INFO | 127.0.0.1:37902 - "POST /api/v1/cinema_room/create HTTP/1.1" 500
2022-10-27 at 02:23:43 | INFO | 127.0.0.1:37902 - "POST /api/v1/cinema_room/create HTTP/1.1" 500
2022-10-27 at 02:23:43 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f975368f520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f9753875fc0>
           └ <SpawnProcess name='SpawnProcess-1' parent=75294 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9753875630>
    └ <SpawnProcess name='SpawnProcess-1' parent=75294 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f97536d4070>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=75294 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=75294 started>
    │    └ <function subprocess_started at 0x7f9752b60280>
    └ <SpawnProcess name='SpawnProcess-1' parent=75294 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f97536d40a0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7f9752b3b5b0>
           │       │   └ <uvicorn.server.Server object at 0x7f97536d40a0>
           │       └ <function run at 0x7f97530eeef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f97518cae30>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f9751529000>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f9751529090>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f97514ab2b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x7f97514a6410>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f97514ab2b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f97514a5840>
          └ <fastapi.applications.FastAPI object at 0x7f97514a6410>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9751529f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f97514a58a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f97514a5840>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9751529f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f97514a58d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f97514a58a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 93, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9751529fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f97514a5930>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f97514a58d0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9751529fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x7f97514a64a0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f97514a5930>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9751529fc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x7f975184add0>
          └ <fastapi.routing.APIRoute object at 0x7f97514a5de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 266, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9751529fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x7f9751529c60>
          └ <fastapi.routing.APIRoute object at 0x7f97514a5de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 65, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f97514a7520>
                     └ <function get_request_handler.<locals>.app at 0x7f9751529bd0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f975184ba30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'cinema_crud': <crud.cinema_crud.CinemaCRUD object at 0x7f9750feaa10>, 'current_user_id': 'cd02d2dd-fc28-4aa1-a08a-cf19a153e...
                 │         └ <function create_cinema_room at 0x7f9753079b40>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f97514a5e10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room.py", line 36, in create_cinema_room
    cinema_room = await cinema_crud.create_cinema_room(cinema_room_create=cinema_room_create, admin_id=current_user_id)
                        │           │                                     │                            └ 'cd02d2dd-fc28-4aa1-a08a-cf19a153e7ea'
                        │           │                                     └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                        │           └ <function CinemaCRUD.create_cinema_room at 0x7f9752eac280>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7f9750feaa10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/crud/cinema_crud.py", line 16, in create_cinema_room
    cinema_room = await self.cinema_service.create_cinema_room(
                        │    │              └ <function CinemaService.create_cinema_room at 0x7f9752eac670>
                        │    └ <service.cinema_service.CinemaService object at 0x7f9750feaa70>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7f9750feaa10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 23, in create_cinema_room
    return await super().create_cinema_room(cinema_key, cinema_room_data, admin_id=admin_id)
                                            │           │                          └ 'cd02d2dd-fc28-4aa1-a08a-cf19a153e7ea'
                                            │           └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                                            └ 'bd3f9dea-3c2f-406e-bbe7-0cbe5335fc4b'

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/base_service.py", line 13, in create_cinema_room
    return await self._create(cinema_key=cinema_key, cinema_room_data=cinema_room_data, admin_id=admin_id)
                 │    │                  │                            │                          └ 'cd02d2dd-fc28-4aa1-a08a-cf19a153e7ea'
                 │    │                  │                            └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                 │    │                  └ 'bd3f9dea-3c2f-406e-bbe7-0cbe5335fc4b'
                 │    └ <function CinemaService._create at 0x7f9752eac4c0>
                 └ <service.cinema_service.CinemaService object at 0x7f9750feaa70>

TypeError: CinemaService._create() got an unexpected keyword argument 'cinema_room_data'
2022-10-27 at 02:23:43 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f975368f520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f9753875fc0>
           └ <SpawnProcess name='SpawnProcess-1' parent=75294 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9753875630>
    └ <SpawnProcess name='SpawnProcess-1' parent=75294 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f97536d4070>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=75294 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=75294 started>
    │    └ <function subprocess_started at 0x7f9752b60280>
    └ <SpawnProcess name='SpawnProcess-1' parent=75294 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f97536d40a0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7f9752b3b5b0>
           │       │   └ <uvicorn.server.Server object at 0x7f97536d40a0>
           │       └ <function run at 0x7f97530eeef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f97518cae30>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f9751529000>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f9751529090>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f97514ab2b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x7f97514a6410>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f97514ab2b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f97514a5840>
          └ <fastapi.applications.FastAPI object at 0x7f97514a6410>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9751529f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f97514a58a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f97514a5840>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9751529f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f97514a58d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f97514a58a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 93, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9751529fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f97514a5930>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f97514a58d0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9751529fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x7f97514a64a0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f97514a5930>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9751529fc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x7f975184add0>
          └ <fastapi.routing.APIRoute object at 0x7f97514a5de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 266, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9751529fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f97514a79d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x7f9751529c60>
          └ <fastapi.routing.APIRoute object at 0x7f97514a5de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 65, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f97514a7520>
                     └ <function get_request_handler.<locals>.app at 0x7f9751529bd0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f975184ba30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'cinema_crud': <crud.cinema_crud.CinemaCRUD object at 0x7f9750feaa10>, 'current_user_id': 'cd02d2dd-fc28-4aa1-a08a-cf19a153e...
                 │         └ <function create_cinema_room at 0x7f9753079b40>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f97514a5e10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room.py", line 36, in create_cinema_room
    cinema_room = await cinema_crud.create_cinema_room(cinema_room_create=cinema_room_create, admin_id=current_user_id)
                        │           │                                     │                            └ 'cd02d2dd-fc28-4aa1-a08a-cf19a153e7ea'
                        │           │                                     └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                        │           └ <function CinemaCRUD.create_cinema_room at 0x7f9752eac280>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7f9750feaa10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/crud/cinema_crud.py", line 16, in create_cinema_room
    cinema_room = await self.cinema_service.create_cinema_room(
                        │    │              └ <function CinemaService.create_cinema_room at 0x7f9752eac670>
                        │    └ <service.cinema_service.CinemaService object at 0x7f9750feaa70>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7f9750feaa10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 23, in create_cinema_room
    return await super().create_cinema_room(cinema_key, cinema_room_data, admin_id=admin_id)
                                            │           │                          └ 'cd02d2dd-fc28-4aa1-a08a-cf19a153e7ea'
                                            │           └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                                            └ 'bd3f9dea-3c2f-406e-bbe7-0cbe5335fc4b'

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/base_service.py", line 13, in create_cinema_room
    return await self._create(cinema_key=cinema_key, cinema_room_data=cinema_room_data, admin_id=admin_id)
                 │    │                  │                            │                          └ 'cd02d2dd-fc28-4aa1-a08a-cf19a153e7ea'
                 │    │                  │                            └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                 │    │                  └ 'bd3f9dea-3c2f-406e-bbe7-0cbe5335fc4b'
                 │    └ <function CinemaService._create at 0x7f9752eac4c0>
                 └ <service.cinema_service.CinemaService object at 0x7f9750feaa70>

TypeError: CinemaService._create() got an unexpected keyword argument 'cinema_room_data'
2022-10-27 at 02:24:41 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:24:41 | INFO | Shutting down
2022-10-27 at 02:24:41 | INFO | Shutting down
2022-10-27 at 02:24:41 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:41 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:41 | INFO | Application shutdown complete.
2022-10-27 at 02:24:41 | INFO | Application shutdown complete.
2022-10-27 at 02:24:41 | INFO | Finished server process [75296]
2022-10-27 at 02:24:41 | INFO | Finished server process [75296]
2022-10-27 at 02:24:42 | INFO | Setup middlewares
2022-10-27 at 02:24:42 | INFO | Setup middlewares
2022-10-27 at 02:24:42 | INFO | Setup middlewares
2022-10-27 at 02:24:42 | INFO | Started server process [75454]
2022-10-27 at 02:24:42 | INFO | Started server process [75454]
2022-10-27 at 02:24:42 | INFO | Waiting for application startup.
2022-10-27 at 02:24:42 | INFO | Waiting for application startup.
2022-10-27 at 02:24:42 | INFO | Redis has been initialize
2022-10-27 at 02:24:42 | INFO | Redis has been initialize
2022-10-27 at 02:24:42 | INFO | Application startup complete.
2022-10-27 at 02:24:42 | INFO | Application startup complete.
2022-10-27 at 02:24:42 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:24:42 | INFO | Shutting down
2022-10-27 at 02:24:42 | INFO | Shutting down
2022-10-27 at 02:24:42 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:42 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:42 | INFO | Application shutdown complete.
2022-10-27 at 02:24:42 | INFO | Application shutdown complete.
2022-10-27 at 02:24:42 | INFO | Finished server process [75454]
2022-10-27 at 02:24:42 | INFO | Finished server process [75454]
2022-10-27 at 02:24:43 | INFO | Setup middlewares
2022-10-27 at 02:24:43 | INFO | Setup middlewares
2022-10-27 at 02:24:43 | INFO | Setup middlewares
2022-10-27 at 02:24:43 | INFO | Started server process [75480]
2022-10-27 at 02:24:43 | INFO | Started server process [75480]
2022-10-27 at 02:24:43 | INFO | Waiting for application startup.
2022-10-27 at 02:24:43 | INFO | Waiting for application startup.
2022-10-27 at 02:24:43 | INFO | Redis has been initialize
2022-10-27 at 02:24:43 | INFO | Redis has been initialize
2022-10-27 at 02:24:43 | INFO | Application startup complete.
2022-10-27 at 02:24:43 | INFO | Application startup complete.
2022-10-27 at 02:24:45 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:24:45 | INFO | Shutting down
2022-10-27 at 02:24:45 | INFO | Shutting down
2022-10-27 at 02:24:45 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:45 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:45 | INFO | Application shutdown complete.
2022-10-27 at 02:24:45 | INFO | Application shutdown complete.
2022-10-27 at 02:24:45 | INFO | Finished server process [75480]
2022-10-27 at 02:24:45 | INFO | Finished server process [75480]
2022-10-27 at 02:24:46 | INFO | Setup middlewares
2022-10-27 at 02:24:46 | INFO | Setup middlewares
2022-10-27 at 02:24:46 | INFO | Setup middlewares
2022-10-27 at 02:24:46 | INFO | Started server process [75488]
2022-10-27 at 02:24:46 | INFO | Started server process [75488]
2022-10-27 at 02:24:46 | INFO | Waiting for application startup.
2022-10-27 at 02:24:46 | INFO | Waiting for application startup.
2022-10-27 at 02:24:46 | INFO | Redis has been initialize
2022-10-27 at 02:24:46 | INFO | Redis has been initialize
2022-10-27 at 02:24:46 | INFO | Application startup complete.
2022-10-27 at 02:24:46 | INFO | Application startup complete.
2022-10-27 at 02:24:53 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:24:53 | INFO | Shutting down
2022-10-27 at 02:24:53 | INFO | Shutting down
2022-10-27 at 02:24:53 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:53 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:53 | INFO | Application shutdown complete.
2022-10-27 at 02:24:53 | INFO | Application shutdown complete.
2022-10-27 at 02:24:53 | INFO | Finished server process [75488]
2022-10-27 at 02:24:53 | INFO | Finished server process [75488]
2022-10-27 at 02:24:54 | INFO | Setup middlewares
2022-10-27 at 02:24:54 | INFO | Setup middlewares
2022-10-27 at 02:24:54 | INFO | Setup middlewares
2022-10-27 at 02:24:54 | INFO | Started server process [75511]
2022-10-27 at 02:24:54 | INFO | Started server process [75511]
2022-10-27 at 02:24:54 | INFO | Waiting for application startup.
2022-10-27 at 02:24:54 | INFO | Waiting for application startup.
2022-10-27 at 02:24:54 | INFO | Redis has been initialize
2022-10-27 at 02:24:54 | INFO | Redis has been initialize
2022-10-27 at 02:24:54 | INFO | Application startup complete.
2022-10-27 at 02:24:54 | INFO | Application startup complete.
2022-10-27 at 02:24:54 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:24:54 | INFO | Shutting down
2022-10-27 at 02:24:54 | INFO | Shutting down
2022-10-27 at 02:24:55 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:55 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:55 | INFO | Application shutdown complete.
2022-10-27 at 02:24:55 | INFO | Application shutdown complete.
2022-10-27 at 02:24:55 | INFO | Finished server process [75511]
2022-10-27 at 02:24:55 | INFO | Finished server process [75511]
2022-10-27 at 02:24:55 | INFO | Setup middlewares
2022-10-27 at 02:24:55 | INFO | Setup middlewares
2022-10-27 at 02:24:55 | INFO | Setup middlewares
2022-10-27 at 02:24:55 | INFO | Started server process [75519]
2022-10-27 at 02:24:55 | INFO | Started server process [75519]
2022-10-27 at 02:24:55 | INFO | Waiting for application startup.
2022-10-27 at 02:24:55 | INFO | Waiting for application startup.
2022-10-27 at 02:24:55 | INFO | Redis has been initialize
2022-10-27 at 02:24:55 | INFO | Redis has been initialize
2022-10-27 at 02:24:55 | INFO | Application startup complete.
2022-10-27 at 02:24:55 | INFO | Application startup complete.
2022-10-27 at 02:24:59 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:24:59 | INFO | Shutting down
2022-10-27 at 02:24:59 | INFO | Shutting down
2022-10-27 at 02:24:59 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:59 | INFO | Waiting for application shutdown.
2022-10-27 at 02:24:59 | INFO | Application shutdown complete.
2022-10-27 at 02:24:59 | INFO | Application shutdown complete.
2022-10-27 at 02:24:59 | INFO | Finished server process [75519]
2022-10-27 at 02:24:59 | INFO | Finished server process [75519]
2022-10-27 at 02:24:59 | INFO | Setup middlewares
2022-10-27 at 02:24:59 | INFO | Setup middlewares
2022-10-27 at 02:24:59 | INFO | Setup middlewares
2022-10-27 at 02:24:59 | INFO | Started server process [75526]
2022-10-27 at 02:24:59 | INFO | Started server process [75526]
2022-10-27 at 02:24:59 | INFO | Waiting for application startup.
2022-10-27 at 02:24:59 | INFO | Waiting for application startup.
2022-10-27 at 02:24:59 | INFO | Redis has been initialize
2022-10-27 at 02:24:59 | INFO | Redis has been initialize
2022-10-27 at 02:24:59 | INFO | Application startup complete.
2022-10-27 at 02:24:59 | INFO | Application startup complete.
2022-10-27 at 02:25:03 | INFO | 127.0.0.1:47460 - "POST /api/v1/cinema_room/create HTTP/1.1" 200
2022-10-27 at 02:25:03 | INFO | 127.0.0.1:47460 - "POST /api/v1/cinema_room/create HTTP/1.1" 200
2022-10-27 at 02:25:14 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:25:14 | INFO | Shutting down
2022-10-27 at 02:25:14 | INFO | Shutting down
2022-10-27 at 02:25:14 | INFO | Waiting for application shutdown.
2022-10-27 at 02:25:14 | INFO | Waiting for application shutdown.
2022-10-27 at 02:25:14 | INFO | Application shutdown complete.
2022-10-27 at 02:25:14 | INFO | Application shutdown complete.
2022-10-27 at 02:25:14 | INFO | Finished server process [75526]
2022-10-27 at 02:25:14 | INFO | Finished server process [75526]
2022-10-27 at 02:25:16 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:25:17 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:25:17 | INFO | Setup middlewares
2022-10-27 at 02:25:17 | INFO | Setup middlewares
2022-10-27 at 02:25:17 | INFO | Setup middlewares
2022-10-27 at 02:25:17 | INFO | Started server process [75598]
2022-10-27 at 02:25:17 | INFO | Started server process [75598]
2022-10-27 at 02:25:17 | INFO | Waiting for application startup.
2022-10-27 at 02:25:17 | INFO | Waiting for application startup.
2022-10-27 at 02:25:17 | INFO | Redis has been initialize
2022-10-27 at 02:25:17 | INFO | Redis has been initialize
2022-10-27 at 02:25:17 | INFO | Application startup complete.
2022-10-27 at 02:25:17 | INFO | Application startup complete.
2022-10-27 at 02:25:43 | INFO | 127.0.0.1:49404 - "POST /api/v1/cinema_room/create HTTP/1.1" 500
2022-10-27 at 02:25:43 | INFO | 127.0.0.1:49404 - "POST /api/v1/cinema_room/create HTTP/1.1" 500
2022-10-27 at 02:25:43 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f5519a3f520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f5519c29fc0>
           └ <SpawnProcess name='SpawnProcess-10' parent=75294 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5519c29630>
    └ <SpawnProcess name='SpawnProcess-10' parent=75294 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f5519a84070>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=75294 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=75294 started>
    │    └ <function subprocess_started at 0x7f5518f0c280>
    └ <SpawnProcess name='SpawnProcess-10' parent=75294 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5519a840a0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7f5518ee75b0>
           │       │   └ <uvicorn.server.Server object at 0x7f5519a840a0>
           │       └ <function run at 0x7f551949eef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f5517c66e30>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f55178c5000>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f55178c5090>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f55178472b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x7f5517842410>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f55178472b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5517841840>
          └ <fastapi.applications.FastAPI object at 0x7f5517842410>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f55178c5f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f55178418a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5517841840>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f55178c5f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f55178418d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f55178418a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 93, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f55178c5fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5517841930>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f55178418d0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f55178c5fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x7f55178424a0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5517841930>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f55178c5fc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x7f5517be6dd0>
          └ <fastapi.routing.APIRoute object at 0x7f5517841de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 266, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f55178c5fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x7f55178c5c60>
          └ <fastapi.routing.APIRoute object at 0x7f5517841de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 65, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f5517843520>
                     └ <function get_request_handler.<locals>.app at 0x7f55178c5bd0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f5517be7a30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'cinema_crud': <crud.cinema_crud.CinemaCRUD object at 0x7f5517386a10>, 'current_user_id': 'eea151e4-19c4-4087-b5e3-8ec335dfe...
                 │         └ <function create_cinema_room at 0x7f5519429b40>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f5517841e10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room.py", line 36, in create_cinema_room
    cinema_room = await cinema_crud.create_cinema_room(cinema_room_create=cinema_room_create, admin_id=current_user_id)
                        │           │                                     │                            └ 'eea151e4-19c4-4087-b5e3-8ec335dfe952'
                        │           │                                     └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                        │           └ <function CinemaCRUD.create_cinema_room at 0x7f5519258280>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7f5517386a10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/crud/cinema_crud.py", line 16, in create_cinema_room
    cinema_room = await self.cinema_service.create_cinema_room(
                        │    │              └ <function CinemaService.create_cinema_room at 0x7f5519258670>
                        │    └ <service.cinema_service.CinemaService object at 0x7f5517386a70>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7f5517386a10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 22, in create_cinema_room
    return await super().create_cinema_room(cinema_key, cinema_room_data,admin_id=admin_id)
                                            │           │                         └ 'eea151e4-19c4-4087-b5e3-8ec335dfe952'
                                            │           └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                                            └ 'f6ba3587-bb9f-420e-8cb1-4cf5b30dfe44'

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/base_service.py", line 13, in create_cinema_room
    return await self._create(cinema_key=cinema_key, cinema_room_data=cinema_room_data, admin_id=admin_id)
                 │    │                  │                            │                          └ 'eea151e4-19c4-4087-b5e3-8ec335dfe952'
                 │    │                  │                            └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                 │    │                  └ 'f6ba3587-bb9f-420e-8cb1-4cf5b30dfe44'
                 │    └ <function CinemaService._create at 0x7f55192584c0>
                 └ <service.cinema_service.CinemaService object at 0x7f5517386a70>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 35, in _create
    cinema_room = CinemaRoom(**cinema_room_data.dict(), admin_id=admin_id, film_view_timestamp=0)
                  │            │                │                └ 'eea151e4-19c4-4087-b5e3-8ec335dfe952'
                  │            │                └ <cyfunction BaseModel.dict at 0x7f55181a9150>
                  │            └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                  └ <class 'schemas.cinema_room.CinemaRoom'>

TypeError: schemas.cinema_room.CinemaRoom() got multiple values for keyword argument 'film_view_timestamp'
2022-10-27 at 02:25:43 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f5519a3f520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f5519c29fc0>
           └ <SpawnProcess name='SpawnProcess-10' parent=75294 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5519c29630>
    └ <SpawnProcess name='SpawnProcess-10' parent=75294 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f5519a84070>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=75294 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=75294 started>
    │    └ <function subprocess_started at 0x7f5518f0c280>
    └ <SpawnProcess name='SpawnProcess-10' parent=75294 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5519a840a0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7f5518ee75b0>
           │       │   └ <uvicorn.server.Server object at 0x7f5519a840a0>
           │       └ <function run at 0x7f551949eef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f5517c66e30>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f55178c5000>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f55178c5090>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f55178472b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x7f5517842410>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f55178472b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5517841840>
          └ <fastapi.applications.FastAPI object at 0x7f5517842410>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f55178c5f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f55178418a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5517841840>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f55178c5f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f55178418d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f55178418a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 93, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f55178c5fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5517841930>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f55178418d0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f55178c5fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x7f55178424a0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5517841930>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f55178c5fc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x7f5517be6dd0>
          └ <fastapi.routing.APIRoute object at 0x7f5517841de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 266, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f55178c5fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f55178439d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x7f55178c5c60>
          └ <fastapi.routing.APIRoute object at 0x7f5517841de0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 65, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f5517843520>
                     └ <function get_request_handler.<locals>.app at 0x7f55178c5bd0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f5517be7a30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'cinema_crud': <crud.cinema_crud.CinemaCRUD object at 0x7f5517386a10>, 'current_user_id': 'eea151e4-19c4-4087-b5e3-8ec335dfe...
                 │         └ <function create_cinema_room at 0x7f5519429b40>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f5517841e10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room.py", line 36, in create_cinema_room
    cinema_room = await cinema_crud.create_cinema_room(cinema_room_create=cinema_room_create, admin_id=current_user_id)
                        │           │                                     │                            └ 'eea151e4-19c4-4087-b5e3-8ec335dfe952'
                        │           │                                     └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                        │           └ <function CinemaCRUD.create_cinema_room at 0x7f5519258280>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7f5517386a10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/crud/cinema_crud.py", line 16, in create_cinema_room
    cinema_room = await self.cinema_service.create_cinema_room(
                        │    │              └ <function CinemaService.create_cinema_room at 0x7f5519258670>
                        │    └ <service.cinema_service.CinemaService object at 0x7f5517386a70>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7f5517386a10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 22, in create_cinema_room
    return await super().create_cinema_room(cinema_key, cinema_room_data,admin_id=admin_id)
                                            │           │                         └ 'eea151e4-19c4-4087-b5e3-8ec335dfe952'
                                            │           └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                                            └ 'f6ba3587-bb9f-420e-8cb1-4cf5b30dfe44'

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/base_service.py", line 13, in create_cinema_room
    return await self._create(cinema_key=cinema_key, cinema_room_data=cinema_room_data, admin_id=admin_id)
                 │    │                  │                            │                          └ 'eea151e4-19c4-4087-b5e3-8ec335dfe952'
                 │    │                  │                            └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                 │    │                  └ 'f6ba3587-bb9f-420e-8cb1-4cf5b30dfe44'
                 │    └ <function CinemaService._create at 0x7f55192584c0>
                 └ <service.cinema_service.CinemaService object at 0x7f5517386a70>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 35, in _create
    cinema_room = CinemaRoom(**cinema_room_data.dict(), admin_id=admin_id, film_view_timestamp=0)
                  │            │                │                └ 'eea151e4-19c4-4087-b5e3-8ec335dfe952'
                  │            │                └ <cyfunction BaseModel.dict at 0x7f55181a9150>
                  │            └ CinemaRoomCreate(film_view_timestamp=None, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                  └ <class 'schemas.cinema_room.CinemaRoom'>

TypeError: schemas.cinema_room.CinemaRoom() got multiple values for keyword argument 'film_view_timestamp'
2022-10-27 at 02:26:47 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:26:47 | INFO | Shutting down
2022-10-27 at 02:26:47 | INFO | Shutting down
2022-10-27 at 02:26:47 | INFO | Waiting for application shutdown.
2022-10-27 at 02:26:47 | INFO | Waiting for application shutdown.
2022-10-27 at 02:26:47 | INFO | Application shutdown complete.
2022-10-27 at 02:26:47 | INFO | Application shutdown complete.
2022-10-27 at 02:26:47 | INFO | Finished server process [75598]
2022-10-27 at 02:26:47 | INFO | Finished server process [75598]
2022-10-27 at 02:26:48 | INFO | Setup middlewares
2022-10-27 at 02:26:48 | INFO | Setup middlewares
2022-10-27 at 02:26:48 | INFO | Setup middlewares
2022-10-27 at 02:26:48 | INFO | Started server process [75792]
2022-10-27 at 02:26:48 | INFO | Started server process [75792]
2022-10-27 at 02:26:48 | INFO | Waiting for application startup.
2022-10-27 at 02:26:48 | INFO | Waiting for application startup.
2022-10-27 at 02:26:48 | INFO | Redis has been initialize
2022-10-27 at 02:26:48 | INFO | Redis has been initialize
2022-10-27 at 02:26:48 | INFO | Application startup complete.
2022-10-27 at 02:26:48 | INFO | Application startup complete.
2022-10-27 at 02:27:11 | WARNING | StatReload detected changes in 'schemas/cinema_room.py'. Reloading...
2022-10-27 at 02:27:11 | INFO | Shutting down
2022-10-27 at 02:27:11 | INFO | Shutting down
2022-10-27 at 02:27:12 | INFO | Waiting for application shutdown.
2022-10-27 at 02:27:12 | INFO | Waiting for application shutdown.
2022-10-27 at 02:27:12 | INFO | Application shutdown complete.
2022-10-27 at 02:27:12 | INFO | Application shutdown complete.
2022-10-27 at 02:27:12 | INFO | Finished server process [75792]
2022-10-27 at 02:27:12 | INFO | Finished server process [75792]
2022-10-27 at 02:27:12 | INFO | Setup middlewares
2022-10-27 at 02:27:12 | INFO | Setup middlewares
2022-10-27 at 02:27:12 | INFO | Setup middlewares
2022-10-27 at 02:27:12 | INFO | Started server process [75842]
2022-10-27 at 02:27:12 | INFO | Started server process [75842]
2022-10-27 at 02:27:12 | INFO | Waiting for application startup.
2022-10-27 at 02:27:12 | INFO | Waiting for application startup.
2022-10-27 at 02:27:12 | INFO | Redis has been initialize
2022-10-27 at 02:27:12 | INFO | Redis has been initialize
2022-10-27 at 02:27:12 | INFO | Application startup complete.
2022-10-27 at 02:27:12 | INFO | Application startup complete.
2022-10-27 at 02:27:18 | INFO | 127.0.0.1:41488 - "POST /api/v1/cinema_room/create HTTP/1.1" 200
2022-10-27 at 02:27:18 | INFO | 127.0.0.1:41488 - "POST /api/v1/cinema_room/create HTTP/1.1" 200
2022-10-27 at 02:29:19 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:29:19 | INFO | Shutting down
2022-10-27 at 02:29:19 | INFO | Shutting down
2022-10-27 at 02:29:19 | INFO | Waiting for application shutdown.
2022-10-27 at 02:29:19 | INFO | Waiting for application shutdown.
2022-10-27 at 02:29:19 | INFO | Application shutdown complete.
2022-10-27 at 02:29:19 | INFO | Application shutdown complete.
2022-10-27 at 02:29:19 | INFO | Finished server process [75842]
2022-10-27 at 02:29:19 | INFO | Finished server process [75842]
2022-10-27 at 02:29:19 | INFO | Setup middlewares
2022-10-27 at 02:29:19 | INFO | Setup middlewares
2022-10-27 at 02:29:19 | INFO | Setup middlewares
2022-10-27 at 02:29:19 | INFO | Started server process [76128]
2022-10-27 at 02:29:19 | INFO | Started server process [76128]
2022-10-27 at 02:29:19 | INFO | Waiting for application startup.
2022-10-27 at 02:29:19 | INFO | Waiting for application startup.
2022-10-27 at 02:29:19 | INFO | Redis has been initialize
2022-10-27 at 02:29:19 | INFO | Redis has been initialize
2022-10-27 at 02:29:19 | INFO | Application startup complete.
2022-10-27 at 02:29:19 | INFO | Application startup complete.
2022-10-27 at 02:29:20 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:29:20 | INFO | Shutting down
2022-10-27 at 02:29:20 | INFO | Shutting down
2022-10-27 at 02:29:20 | INFO | Waiting for application shutdown.
2022-10-27 at 02:29:20 | INFO | Waiting for application shutdown.
2022-10-27 at 02:29:20 | INFO | Application shutdown complete.
2022-10-27 at 02:29:20 | INFO | Application shutdown complete.
2022-10-27 at 02:29:20 | INFO | Finished server process [76128]
2022-10-27 at 02:29:20 | INFO | Finished server process [76128]
2022-10-27 at 02:29:20 | INFO | Setup middlewares
2022-10-27 at 02:29:20 | INFO | Setup middlewares
2022-10-27 at 02:29:20 | INFO | Setup middlewares
2022-10-27 at 02:29:20 | INFO | Started server process [76135]
2022-10-27 at 02:29:20 | INFO | Started server process [76135]
2022-10-27 at 02:29:20 | INFO | Waiting for application startup.
2022-10-27 at 02:29:20 | INFO | Waiting for application startup.
2022-10-27 at 02:29:20 | INFO | Redis has been initialize
2022-10-27 at 02:29:20 | INFO | Redis has been initialize
2022-10-27 at 02:29:20 | INFO | Application startup complete.
2022-10-27 at 02:29:20 | INFO | Application startup complete.
2022-10-27 at 02:29:22 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:29:22 | INFO | Shutting down
2022-10-27 at 02:29:22 | INFO | Shutting down
2022-10-27 at 02:29:22 | INFO | Waiting for application shutdown.
2022-10-27 at 02:29:22 | INFO | Waiting for application shutdown.
2022-10-27 at 02:29:22 | INFO | Application shutdown complete.
2022-10-27 at 02:29:22 | INFO | Application shutdown complete.
2022-10-27 at 02:29:22 | INFO | Finished server process [76135]
2022-10-27 at 02:29:22 | INFO | Finished server process [76135]
2022-10-27 at 02:29:24 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:29:26 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:29:26 | INFO | Setup middlewares
2022-10-27 at 02:29:26 | INFO | Setup middlewares
2022-10-27 at 02:29:26 | INFO | Setup middlewares
2022-10-27 at 02:29:26 | INFO | Started server process [76152]
2022-10-27 at 02:29:26 | INFO | Started server process [76152]
2022-10-27 at 02:29:26 | INFO | Waiting for application startup.
2022-10-27 at 02:29:26 | INFO | Waiting for application startup.
2022-10-27 at 02:29:26 | INFO | Redis has been initialize
2022-10-27 at 02:29:26 | INFO | Redis has been initialize
2022-10-27 at 02:29:26 | INFO | Application startup complete.
2022-10-27 at 02:29:26 | INFO | Application startup complete.
2022-10-27 at 02:30:01 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-27 at 02:30:01 | INFO | Shutting down
2022-10-27 at 02:30:01 | INFO | Shutting down
2022-10-27 at 02:30:01 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:01 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:01 | INFO | Application shutdown complete.
2022-10-27 at 02:30:01 | INFO | Application shutdown complete.
2022-10-27 at 02:30:01 | INFO | Finished server process [76152]
2022-10-27 at 02:30:01 | INFO | Finished server process [76152]
2022-10-27 at 02:30:01 | INFO | Setup middlewares
2022-10-27 at 02:30:01 | INFO | Setup middlewares
2022-10-27 at 02:30:01 | INFO | Setup middlewares
2022-10-27 at 02:30:01 | INFO | Started server process [76249]
2022-10-27 at 02:30:01 | INFO | Started server process [76249]
2022-10-27 at 02:30:01 | INFO | Waiting for application startup.
2022-10-27 at 02:30:01 | INFO | Waiting for application startup.
2022-10-27 at 02:30:01 | INFO | Redis has been initialize
2022-10-27 at 02:30:01 | INFO | Redis has been initialize
2022-10-27 at 02:30:01 | INFO | Application startup complete.
2022-10-27 at 02:30:01 | INFO | Application startup complete.
2022-10-27 at 02:30:03 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-27 at 02:30:03 | INFO | Shutting down
2022-10-27 at 02:30:03 | INFO | Shutting down
2022-10-27 at 02:30:03 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:03 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:03 | INFO | Application shutdown complete.
2022-10-27 at 02:30:03 | INFO | Application shutdown complete.
2022-10-27 at 02:30:03 | INFO | Finished server process [76249]
2022-10-27 at 02:30:03 | INFO | Finished server process [76249]
2022-10-27 at 02:30:05 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-27 at 02:30:17 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-27 at 02:30:17 | INFO | Setup middlewares
2022-10-27 at 02:30:17 | INFO | Setup middlewares
2022-10-27 at 02:30:17 | INFO | Setup middlewares
2022-10-27 at 02:30:17 | INFO | Started server process [76312]
2022-10-27 at 02:30:17 | INFO | Started server process [76312]
2022-10-27 at 02:30:17 | INFO | Waiting for application startup.
2022-10-27 at 02:30:17 | INFO | Waiting for application startup.
2022-10-27 at 02:30:17 | INFO | Redis has been initialize
2022-10-27 at 02:30:17 | INFO | Redis has been initialize
2022-10-27 at 02:30:17 | INFO | Application startup complete.
2022-10-27 at 02:30:17 | INFO | Application startup complete.
2022-10-27 at 02:30:29 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-27 at 02:30:29 | INFO | Shutting down
2022-10-27 at 02:30:29 | INFO | Shutting down
2022-10-27 at 02:30:29 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:29 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:29 | INFO | Application shutdown complete.
2022-10-27 at 02:30:29 | INFO | Application shutdown complete.
2022-10-27 at 02:30:29 | INFO | Finished server process [76312]
2022-10-27 at 02:30:29 | INFO | Finished server process [76312]
2022-10-27 at 02:30:30 | INFO | Setup middlewares
2022-10-27 at 02:30:30 | INFO | Setup middlewares
2022-10-27 at 02:30:30 | INFO | Setup middlewares
2022-10-27 at 02:30:30 | INFO | Started server process [76339]
2022-10-27 at 02:30:30 | INFO | Started server process [76339]
2022-10-27 at 02:30:30 | INFO | Waiting for application startup.
2022-10-27 at 02:30:30 | INFO | Waiting for application startup.
2022-10-27 at 02:30:30 | INFO | Redis has been initialize
2022-10-27 at 02:30:30 | INFO | Redis has been initialize
2022-10-27 at 02:30:30 | INFO | Application startup complete.
2022-10-27 at 02:30:30 | INFO | Application startup complete.
2022-10-27 at 02:30:32 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-27 at 02:30:32 | INFO | Shutting down
2022-10-27 at 02:30:32 | INFO | Shutting down
2022-10-27 at 02:30:32 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:32 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:32 | INFO | Application shutdown complete.
2022-10-27 at 02:30:32 | INFO | Application shutdown complete.
2022-10-27 at 02:30:32 | INFO | Finished server process [76339]
2022-10-27 at 02:30:32 | INFO | Finished server process [76339]
2022-10-27 at 02:30:33 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-27 at 02:30:34 | INFO | Setup middlewares
2022-10-27 at 02:30:34 | INFO | Setup middlewares
2022-10-27 at 02:30:34 | INFO | Setup middlewares
2022-10-27 at 02:30:34 | INFO | Started server process [76347]
2022-10-27 at 02:30:34 | INFO | Started server process [76347]
2022-10-27 at 02:30:34 | INFO | Waiting for application startup.
2022-10-27 at 02:30:34 | INFO | Waiting for application startup.
2022-10-27 at 02:30:34 | INFO | Redis has been initialize
2022-10-27 at 02:30:34 | INFO | Redis has been initialize
2022-10-27 at 02:30:34 | INFO | Application startup complete.
2022-10-27 at 02:30:34 | INFO | Application startup complete.
2022-10-27 at 02:30:47 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:30:47 | INFO | Shutting down
2022-10-27 at 02:30:47 | INFO | Shutting down
2022-10-27 at 02:30:47 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:47 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:47 | INFO | Application shutdown complete.
2022-10-27 at 02:30:47 | INFO | Application shutdown complete.
2022-10-27 at 02:30:47 | INFO | Finished server process [76347]
2022-10-27 at 02:30:47 | INFO | Finished server process [76347]
2022-10-27 at 02:30:48 | INFO | Setup middlewares
2022-10-27 at 02:30:48 | INFO | Setup middlewares
2022-10-27 at 02:30:48 | INFO | Setup middlewares
2022-10-27 at 02:30:48 | INFO | Started server process [76397]
2022-10-27 at 02:30:48 | INFO | Started server process [76397]
2022-10-27 at 02:30:48 | INFO | Waiting for application startup.
2022-10-27 at 02:30:48 | INFO | Waiting for application startup.
2022-10-27 at 02:30:48 | INFO | Redis has been initialize
2022-10-27 at 02:30:48 | INFO | Redis has been initialize
2022-10-27 at 02:30:48 | INFO | Application startup complete.
2022-10-27 at 02:30:48 | INFO | Application startup complete.
2022-10-27 at 02:30:51 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:30:51 | INFO | Shutting down
2022-10-27 at 02:30:51 | INFO | Shutting down
2022-10-27 at 02:30:51 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:51 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:51 | INFO | Application shutdown complete.
2022-10-27 at 02:30:51 | INFO | Application shutdown complete.
2022-10-27 at 02:30:51 | INFO | Finished server process [76397]
2022-10-27 at 02:30:51 | INFO | Finished server process [76397]
2022-10-27 at 02:30:52 | INFO | Setup middlewares
2022-10-27 at 02:30:52 | INFO | Setup middlewares
2022-10-27 at 02:30:52 | INFO | Setup middlewares
2022-10-27 at 02:30:52 | INFO | Started server process [76411]
2022-10-27 at 02:30:52 | INFO | Started server process [76411]
2022-10-27 at 02:30:52 | INFO | Waiting for application startup.
2022-10-27 at 02:30:52 | INFO | Waiting for application startup.
2022-10-27 at 02:30:52 | INFO | Redis has been initialize
2022-10-27 at 02:30:52 | INFO | Redis has been initialize
2022-10-27 at 02:30:52 | INFO | Application startup complete.
2022-10-27 at 02:30:52 | INFO | Application startup complete.
2022-10-27 at 02:30:56 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:30:56 | INFO | Shutting down
2022-10-27 at 02:30:56 | INFO | Shutting down
2022-10-27 at 02:30:56 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:56 | INFO | Waiting for application shutdown.
2022-10-27 at 02:30:56 | INFO | Application shutdown complete.
2022-10-27 at 02:30:56 | INFO | Application shutdown complete.
2022-10-27 at 02:30:56 | INFO | Finished server process [76411]
2022-10-27 at 02:30:56 | INFO | Finished server process [76411]
2022-10-27 at 02:30:56 | INFO | Setup middlewares
2022-10-27 at 02:30:56 | INFO | Setup middlewares
2022-10-27 at 02:30:56 | INFO | Setup middlewares
2022-10-27 at 02:30:56 | INFO | Started server process [76420]
2022-10-27 at 02:30:56 | INFO | Started server process [76420]
2022-10-27 at 02:30:56 | INFO | Waiting for application startup.
2022-10-27 at 02:30:56 | INFO | Waiting for application startup.
2022-10-27 at 02:30:56 | INFO | Redis has been initialize
2022-10-27 at 02:30:56 | INFO | Redis has been initialize
2022-10-27 at 02:30:56 | INFO | Application startup complete.
2022-10-27 at 02:30:56 | INFO | Application startup complete.
2022-10-27 at 02:31:21 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-27 at 02:31:21 | INFO | Shutting down
2022-10-27 at 02:31:21 | INFO | Shutting down
2022-10-27 at 02:31:21 | INFO | Waiting for application shutdown.
2022-10-27 at 02:31:21 | INFO | Waiting for application shutdown.
2022-10-27 at 02:31:21 | INFO | Application shutdown complete.
2022-10-27 at 02:31:21 | INFO | Application shutdown complete.
2022-10-27 at 02:31:21 | INFO | Finished server process [76420]
2022-10-27 at 02:31:21 | INFO | Finished server process [76420]
2022-10-27 at 02:31:21 | INFO | Setup middlewares
2022-10-27 at 02:31:21 | INFO | Setup middlewares
2022-10-27 at 02:31:21 | INFO | Setup middlewares
2022-10-27 at 02:31:21 | INFO | Started server process [76487]
2022-10-27 at 02:31:21 | INFO | Started server process [76487]
2022-10-27 at 02:31:21 | INFO | Waiting for application startup.
2022-10-27 at 02:31:21 | INFO | Waiting for application startup.
2022-10-27 at 02:31:21 | INFO | Redis has been initialize
2022-10-27 at 02:31:21 | INFO | Redis has been initialize
2022-10-27 at 02:31:21 | INFO | Application startup complete.
2022-10-27 at 02:31:21 | INFO | Application startup complete.
2022-10-27 at 02:31:24 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-27 at 02:31:24 | INFO | Shutting down
2022-10-27 at 02:31:24 | INFO | Shutting down
2022-10-27 at 02:31:24 | INFO | Waiting for application shutdown.
2022-10-27 at 02:31:24 | INFO | Waiting for application shutdown.
2022-10-27 at 02:31:24 | INFO | Application shutdown complete.
2022-10-27 at 02:31:24 | INFO | Application shutdown complete.
2022-10-27 at 02:31:24 | INFO | Finished server process [76487]
2022-10-27 at 02:31:24 | INFO | Finished server process [76487]
2022-10-27 at 02:31:24 | INFO | Setup middlewares
2022-10-27 at 02:31:25 | INFO | Setup middlewares
2022-10-27 at 02:31:25 | INFO | Setup middlewares
2022-10-27 at 02:31:25 | INFO | Started server process [76501]
2022-10-27 at 02:31:25 | INFO | Started server process [76501]
2022-10-27 at 02:31:25 | INFO | Waiting for application startup.
2022-10-27 at 02:31:25 | INFO | Waiting for application startup.
2022-10-27 at 02:31:25 | INFO | Redis has been initialize
2022-10-27 at 02:31:25 | INFO | Redis has been initialize
2022-10-27 at 02:31:25 | INFO | Application startup complete.
2022-10-27 at 02:31:25 | INFO | Application startup complete.
2022-10-27 at 02:31:51 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:31:51 | INFO | Shutting down
2022-10-27 at 02:31:51 | INFO | Shutting down
2022-10-27 at 02:31:51 | INFO | Waiting for application shutdown.
2022-10-27 at 02:31:51 | INFO | Waiting for application shutdown.
2022-10-27 at 02:31:51 | INFO | Application shutdown complete.
2022-10-27 at 02:31:51 | INFO | Application shutdown complete.
2022-10-27 at 02:31:51 | INFO | Finished server process [76501]
2022-10-27 at 02:31:51 | INFO | Finished server process [76501]
2022-10-27 at 02:31:51 | INFO | Setup middlewares
2022-10-27 at 02:31:51 | INFO | Setup middlewares
2022-10-27 at 02:31:51 | INFO | Setup middlewares
2022-10-27 at 02:31:51 | INFO | Started server process [76566]
2022-10-27 at 02:31:51 | INFO | Started server process [76566]
2022-10-27 at 02:31:51 | INFO | Waiting for application startup.
2022-10-27 at 02:31:51 | INFO | Waiting for application startup.
2022-10-27 at 02:31:51 | INFO | Redis has been initialize
2022-10-27 at 02:31:51 | INFO | Redis has been initialize
2022-10-27 at 02:31:51 | INFO | Application startup complete.
2022-10-27 at 02:31:51 | INFO | Application startup complete.
2022-10-27 at 02:31:54 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:31:54 | INFO | Shutting down
2022-10-27 at 02:31:54 | INFO | Shutting down
2022-10-27 at 02:31:54 | INFO | Waiting for application shutdown.
2022-10-27 at 02:31:54 | INFO | Waiting for application shutdown.
2022-10-27 at 02:31:54 | INFO | Application shutdown complete.
2022-10-27 at 02:31:54 | INFO | Application shutdown complete.
2022-10-27 at 02:31:54 | INFO | Finished server process [76566]
2022-10-27 at 02:31:54 | INFO | Finished server process [76566]
2022-10-27 at 02:31:55 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:31:58 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-27 at 02:31:59 | INFO | Setup middlewares
2022-10-27 at 02:31:59 | INFO | Setup middlewares
2022-10-27 at 02:31:59 | INFO | Setup middlewares
2022-10-27 at 02:31:59 | INFO | Started server process [76604]
2022-10-27 at 02:31:59 | INFO | Started server process [76604]
2022-10-27 at 02:31:59 | INFO | Waiting for application startup.
2022-10-27 at 02:31:59 | INFO | Waiting for application startup.
2022-10-27 at 02:31:59 | INFO | Redis has been initialize
2022-10-27 at 02:31:59 | INFO | Redis has been initialize
2022-10-27 at 02:31:59 | INFO | Application startup complete.
2022-10-27 at 02:31:59 | INFO | Application startup complete.
2022-10-27 at 02:33:04 | INFO | Shutting down
2022-10-27 at 02:33:04 | INFO | Shutting down
2022-10-27 at 02:33:04 | INFO | Finished server process [76604]
2022-10-27 at 02:33:04 | INFO | Finished server process [76604]
2022-10-27 at 02:33:04 | ERROR | Traceback (most recent call last):
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 638, in lifespan
    await receive()
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/queues.py", line 159, in get
    await getter
asyncio.exceptions.CancelledError

2022-10-27 at 02:33:04 | ERROR | Traceback (most recent call last):
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 638, in lifespan
    await receive()
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/queues.py", line 159, in get
    await getter
asyncio.exceptions.CancelledError

2022-10-27 at 02:33:05 | INFO | Stopping reloader process [75294]
2022-10-29 at 14:45:20 | INFO | Setup middlewares
2022-10-29 at 14:45:20 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-29 at 14:45:20 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-29 at 14:45:20 | INFO | Started reloader process [92711] using StatReload
2022-10-29 at 14:45:20 | INFO | Setup middlewares
2022-10-29 at 14:45:20 | INFO | Setup middlewares
2022-10-29 at 14:45:20 | INFO | Setup middlewares
2022-10-29 at 14:45:20 | INFO | Started server process [92713]
2022-10-29 at 14:45:20 | INFO | Started server process [92713]
2022-10-29 at 14:45:20 | INFO | Waiting for application startup.
2022-10-29 at 14:45:20 | INFO | Waiting for application startup.
2022-10-29 at 14:45:20 | INFO | Redis has been initialize
2022-10-29 at 14:45:20 | INFO | Redis has been initialize
2022-10-29 at 14:45:20 | INFO | Application startup complete.
2022-10-29 at 14:45:20 | INFO | Application startup complete.
2022-10-29 at 14:45:33 | INFO | Shutting down
2022-10-29 at 14:45:33 | INFO | Shutting down
2022-10-29 at 14:45:33 | INFO | Waiting for application shutdown.
2022-10-29 at 14:45:33 | INFO | Waiting for application shutdown.
2022-10-29 at 14:45:33 | INFO | Application shutdown complete.
2022-10-29 at 14:45:33 | INFO | Application shutdown complete.
2022-10-29 at 14:45:33 | INFO | Finished server process [92713]
2022-10-29 at 14:45:33 | INFO | Finished server process [92713]
2022-10-29 at 14:45:33 | INFO | Stopping reloader process [92711]
2022-10-29 at 14:54:52 | INFO | Setup middlewares
2022-10-29 at 14:54:52 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-29 at 14:54:52 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-29 at 14:54:52 | INFO | Started reloader process [94349] using StatReload
2022-10-29 at 14:54:53 | INFO | Setup middlewares
2022-10-29 at 14:54:53 | INFO | Setup middlewares
2022-10-29 at 14:54:53 | INFO | Setup middlewares
2022-10-29 at 14:54:53 | INFO | Started server process [94351]
2022-10-29 at 14:54:53 | INFO | Started server process [94351]
2022-10-29 at 14:54:53 | INFO | Waiting for application startup.
2022-10-29 at 14:54:53 | INFO | Waiting for application startup.
2022-10-29 at 14:54:53 | INFO | Redis has been initialize
2022-10-29 at 14:54:53 | INFO | Redis has been initialize
2022-10-29 at 14:54:53 | INFO | Application startup complete.
2022-10-29 at 14:54:53 | INFO | Application startup complete.
2022-10-29 at 14:55:01 | INFO | 127.0.0.1:51958 - "POST /api/v1/cinema_room/create HTTP/1.1" 404
2022-10-29 at 14:55:01 | INFO | 127.0.0.1:51958 - "POST /api/v1/cinema_room/create HTTP/1.1" 404
2022-10-29 at 14:55:09 | INFO | 127.0.0.1:38408 - "POST /api/v1/cinema-room/create HTTP/1.1" 200
2022-10-29 at 14:55:09 | INFO | 127.0.0.1:38408 - "POST /api/v1/cinema-room/create HTTP/1.1" 200
2022-10-29 at 14:56:43 | INFO | 127.0.0.1:53720 - "GET /api/v1/cinema-room/b0ec3eab-e9a3-4a22-a1e8-caecb8c4d822 HTTP/1.1" 200
2022-10-29 at 14:56:43 | INFO | 127.0.0.1:53720 - "GET /api/v1/cinema-room/b0ec3eab-e9a3-4a22-a1e8-caecb8c4d822 HTTP/1.1" 200
2022-10-29 at 15:11:42 | INFO | Shutting down
2022-10-29 at 15:11:42 | INFO | Shutting down
2022-10-29 at 15:11:42 | INFO | Waiting for application shutdown.
2022-10-29 at 15:11:42 | INFO | Waiting for application shutdown.
2022-10-29 at 15:11:42 | INFO | Application shutdown complete.
2022-10-29 at 15:11:42 | INFO | Application shutdown complete.
2022-10-29 at 15:11:42 | INFO | Finished server process [94351]
2022-10-29 at 15:11:42 | INFO | Finished server process [94351]
2022-10-29 at 15:11:42 | INFO | Stopping reloader process [94349]
2022-10-29 at 19:56:08 | INFO | Setup middlewares
2022-10-29 at 19:56:08 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-29 at 19:56:08 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-29 at 19:56:08 | INFO | Started reloader process [118822] using StatReload
2022-10-29 at 19:56:08 | INFO | Setup middlewares
2022-10-29 at 19:56:08 | INFO | Setup middlewares
2022-10-29 at 19:56:08 | INFO | Setup middlewares
2022-10-29 at 19:56:08 | INFO | Started server process [118824]
2022-10-29 at 19:56:08 | INFO | Started server process [118824]
2022-10-29 at 19:56:08 | INFO | Waiting for application startup.
2022-10-29 at 19:56:08 | INFO | Waiting for application startup.
2022-10-29 at 19:56:08 | INFO | Redis has been initialize
2022-10-29 at 19:56:08 | INFO | Redis has been initialize
2022-10-29 at 19:56:08 | INFO | Application startup complete.
2022-10-29 at 19:56:08 | INFO | Application startup complete.
2022-10-29 at 19:56:13 | INFO | 127.0.0.1:49534 - "POST /api/v1/cinema-room/create HTTP/1.1" 200
2022-10-29 at 19:56:13 | INFO | 127.0.0.1:49534 - "POST /api/v1/cinema-room/create HTTP/1.1" 200
2022-10-29 at 20:03:35 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:03:35 | INFO | Shutting down
2022-10-29 at 20:03:35 | INFO | Shutting down
2022-10-29 at 20:03:35 | INFO | Waiting for application shutdown.
2022-10-29 at 20:03:35 | INFO | Waiting for application shutdown.
2022-10-29 at 20:03:35 | INFO | Application shutdown complete.
2022-10-29 at 20:03:35 | INFO | Application shutdown complete.
2022-10-29 at 20:03:35 | INFO | Finished server process [118824]
2022-10-29 at 20:03:35 | INFO | Finished server process [118824]
2022-10-29 at 20:03:35 | INFO | Setup middlewares
2022-10-29 at 20:03:35 | INFO | Setup middlewares
2022-10-29 at 20:03:35 | INFO | Setup middlewares
2022-10-29 at 20:03:35 | INFO | Started server process [119915]
2022-10-29 at 20:03:35 | INFO | Started server process [119915]
2022-10-29 at 20:03:35 | INFO | Waiting for application startup.
2022-10-29 at 20:03:35 | INFO | Waiting for application startup.
2022-10-29 at 20:03:35 | INFO | Redis has been initialize
2022-10-29 at 20:03:35 | INFO | Redis has been initialize
2022-10-29 at 20:03:35 | INFO | Application startup complete.
2022-10-29 at 20:03:35 | INFO | Application startup complete.
2022-10-29 at 20:03:41 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:03:41 | INFO | Shutting down
2022-10-29 at 20:03:41 | INFO | Shutting down
2022-10-29 at 20:03:41 | INFO | Waiting for application shutdown.
2022-10-29 at 20:03:41 | INFO | Waiting for application shutdown.
2022-10-29 at 20:03:41 | INFO | Application shutdown complete.
2022-10-29 at 20:03:41 | INFO | Application shutdown complete.
2022-10-29 at 20:03:41 | INFO | Finished server process [119915]
2022-10-29 at 20:03:41 | INFO | Finished server process [119915]
2022-10-29 at 20:03:42 | INFO | Setup middlewares
2022-10-29 at 20:03:42 | INFO | Setup middlewares
2022-10-29 at 20:03:42 | INFO | Setup middlewares
2022-10-29 at 20:03:42 | INFO | Started server process [119940]
2022-10-29 at 20:03:42 | INFO | Started server process [119940]
2022-10-29 at 20:03:42 | INFO | Waiting for application startup.
2022-10-29 at 20:03:42 | INFO | Waiting for application startup.
2022-10-29 at 20:03:42 | INFO | Redis has been initialize
2022-10-29 at 20:03:42 | INFO | Redis has been initialize
2022-10-29 at 20:03:42 | INFO | Application startup complete.
2022-10-29 at 20:03:42 | INFO | Application startup complete.
2022-10-29 at 20:03:42 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:03:43 | INFO | Shutting down
2022-10-29 at 20:03:43 | INFO | Shutting down
2022-10-29 at 20:03:43 | INFO | Waiting for application shutdown.
2022-10-29 at 20:03:43 | INFO | Waiting for application shutdown.
2022-10-29 at 20:03:43 | INFO | Application shutdown complete.
2022-10-29 at 20:03:43 | INFO | Application shutdown complete.
2022-10-29 at 20:03:43 | INFO | Finished server process [119940]
2022-10-29 at 20:03:43 | INFO | Finished server process [119940]
2022-10-29 at 20:03:44 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:03:45 | INFO | Setup middlewares
2022-10-29 at 20:03:45 | INFO | Setup middlewares
2022-10-29 at 20:03:45 | INFO | Setup middlewares
2022-10-29 at 20:03:45 | INFO | Started server process [119954]
2022-10-29 at 20:03:45 | INFO | Started server process [119954]
2022-10-29 at 20:03:45 | INFO | Waiting for application startup.
2022-10-29 at 20:03:45 | INFO | Waiting for application startup.
2022-10-29 at 20:03:45 | INFO | Redis has been initialize
2022-10-29 at 20:03:45 | INFO | Redis has been initialize
2022-10-29 at 20:03:45 | INFO | Application startup complete.
2022-10-29 at 20:03:45 | INFO | Application startup complete.
2022-10-29 at 20:03:50 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:03:50 | INFO | Shutting down
2022-10-29 at 20:03:50 | INFO | Shutting down
2022-10-29 at 20:03:50 | INFO | Waiting for application shutdown.
2022-10-29 at 20:03:50 | INFO | Waiting for application shutdown.
2022-10-29 at 20:03:50 | INFO | Application shutdown complete.
2022-10-29 at 20:03:50 | INFO | Application shutdown complete.
2022-10-29 at 20:03:50 | INFO | Finished server process [119954]
2022-10-29 at 20:03:50 | INFO | Finished server process [119954]
2022-10-29 at 20:03:51 | INFO | Setup middlewares
2022-10-29 at 20:03:51 | INFO | Setup middlewares
2022-10-29 at 20:03:51 | INFO | Setup middlewares
2022-10-29 at 20:03:51 | INFO | Started server process [119984]
2022-10-29 at 20:03:51 | INFO | Started server process [119984]
2022-10-29 at 20:03:51 | INFO | Waiting for application startup.
2022-10-29 at 20:03:51 | INFO | Waiting for application startup.
2022-10-29 at 20:03:51 | INFO | Redis has been initialize
2022-10-29 at 20:03:51 | INFO | Redis has been initialize
2022-10-29 at 20:03:51 | INFO | Application startup complete.
2022-10-29 at 20:03:51 | INFO | Application startup complete.
2022-10-29 at 20:05:09 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:05:09 | INFO | Shutting down
2022-10-29 at 20:05:09 | INFO | Shutting down
2022-10-29 at 20:05:09 | INFO | Waiting for application shutdown.
2022-10-29 at 20:05:09 | INFO | Waiting for application shutdown.
2022-10-29 at 20:05:09 | INFO | Application shutdown complete.
2022-10-29 at 20:05:09 | INFO | Application shutdown complete.
2022-10-29 at 20:05:09 | INFO | Finished server process [119984]
2022-10-29 at 20:05:09 | INFO | Finished server process [119984]
2022-10-29 at 20:05:10 | INFO | Setup middlewares
2022-10-29 at 20:05:10 | INFO | Setup middlewares
2022-10-29 at 20:05:10 | INFO | Setup middlewares
2022-10-29 at 20:05:10 | INFO | Started server process [120143]
2022-10-29 at 20:05:10 | INFO | Started server process [120143]
2022-10-29 at 20:05:10 | INFO | Waiting for application startup.
2022-10-29 at 20:05:10 | INFO | Waiting for application startup.
2022-10-29 at 20:05:10 | INFO | Redis has been initialize
2022-10-29 at 20:05:10 | INFO | Redis has been initialize
2022-10-29 at 20:05:10 | INFO | Application startup complete.
2022-10-29 at 20:05:10 | INFO | Application startup complete.
2022-10-29 at 20:05:13 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:05:13 | INFO | Shutting down
2022-10-29 at 20:05:13 | INFO | Shutting down
2022-10-29 at 20:05:14 | INFO | Waiting for application shutdown.
2022-10-29 at 20:05:14 | INFO | Waiting for application shutdown.
2022-10-29 at 20:05:14 | INFO | Application shutdown complete.
2022-10-29 at 20:05:14 | INFO | Application shutdown complete.
2022-10-29 at 20:05:14 | INFO | Finished server process [120143]
2022-10-29 at 20:05:14 | INFO | Finished server process [120143]
2022-10-29 at 20:05:15 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:05:16 | INFO | Setup middlewares
2022-10-29 at 20:05:16 | INFO | Setup middlewares
2022-10-29 at 20:05:16 | INFO | Setup middlewares
2022-10-29 at 20:05:16 | INFO | Started server process [120159]
2022-10-29 at 20:05:16 | INFO | Started server process [120159]
2022-10-29 at 20:05:16 | INFO | Waiting for application startup.
2022-10-29 at 20:05:16 | INFO | Waiting for application startup.
2022-10-29 at 20:05:16 | INFO | Redis has been initialize
2022-10-29 at 20:05:16 | INFO | Redis has been initialize
2022-10-29 at 20:05:16 | INFO | Application startup complete.
2022-10-29 at 20:05:16 | INFO | Application startup complete.
2022-10-29 at 20:05:51 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:05:52 | INFO | Shutting down
2022-10-29 at 20:05:52 | INFO | Shutting down
2022-10-29 at 20:05:52 | INFO | Waiting for application shutdown.
2022-10-29 at 20:05:52 | INFO | Waiting for application shutdown.
2022-10-29 at 20:05:52 | INFO | Application shutdown complete.
2022-10-29 at 20:05:52 | INFO | Application shutdown complete.
2022-10-29 at 20:05:52 | INFO | Finished server process [120159]
2022-10-29 at 20:05:52 | INFO | Finished server process [120159]
2022-10-29 at 20:05:52 | INFO | Setup middlewares
2022-10-29 at 20:05:52 | INFO | Setup middlewares
2022-10-29 at 20:05:52 | INFO | Setup middlewares
2022-10-29 at 20:05:52 | INFO | Started server process [120251]
2022-10-29 at 20:05:52 | INFO | Started server process [120251]
2022-10-29 at 20:05:52 | INFO | Waiting for application startup.
2022-10-29 at 20:05:52 | INFO | Waiting for application startup.
2022-10-29 at 20:05:52 | INFO | Redis has been initialize
2022-10-29 at 20:05:52 | INFO | Redis has been initialize
2022-10-29 at 20:05:52 | INFO | Application startup complete.
2022-10-29 at 20:05:52 | INFO | Application startup complete.
2022-10-29 at 20:05:59 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-29 at 20:05:59 | INFO | Shutting down
2022-10-29 at 20:05:59 | INFO | Shutting down
2022-10-29 at 20:05:59 | INFO | Waiting for application shutdown.
2022-10-29 at 20:05:59 | INFO | Waiting for application shutdown.
2022-10-29 at 20:05:59 | INFO | Application shutdown complete.
2022-10-29 at 20:05:59 | INFO | Application shutdown complete.
2022-10-29 at 20:05:59 | INFO | Finished server process [120251]
2022-10-29 at 20:05:59 | INFO | Finished server process [120251]
2022-10-29 at 20:06:02 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-29 at 20:06:02 | INFO | Setup middlewares
2022-10-29 at 20:06:02 | INFO | Setup middlewares
2022-10-29 at 20:06:02 | INFO | Setup middlewares
2022-10-29 at 20:06:02 | INFO | Started server process [120287]
2022-10-29 at 20:06:02 | INFO | Started server process [120287]
2022-10-29 at 20:06:02 | INFO | Waiting for application startup.
2022-10-29 at 20:06:02 | INFO | Waiting for application startup.
2022-10-29 at 20:06:02 | INFO | Redis has been initialize
2022-10-29 at 20:06:02 | INFO | Redis has been initialize
2022-10-29 at 20:06:02 | INFO | Application startup complete.
2022-10-29 at 20:06:02 | INFO | Application startup complete.
2022-10-29 at 20:06:12 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-29 at 20:06:12 | INFO | Shutting down
2022-10-29 at 20:06:12 | INFO | Shutting down
2022-10-29 at 20:06:12 | INFO | Waiting for application shutdown.
2022-10-29 at 20:06:12 | INFO | Waiting for application shutdown.
2022-10-29 at 20:06:12 | INFO | Application shutdown complete.
2022-10-29 at 20:06:12 | INFO | Application shutdown complete.
2022-10-29 at 20:06:12 | INFO | Finished server process [120287]
2022-10-29 at 20:06:12 | INFO | Finished server process [120287]
2022-10-29 at 20:06:13 | INFO | Setup middlewares
2022-10-29 at 20:06:13 | INFO | Setup middlewares
2022-10-29 at 20:06:13 | INFO | Setup middlewares
2022-10-29 at 20:06:13 | INFO | Started server process [120315]
2022-10-29 at 20:06:13 | INFO | Started server process [120315]
2022-10-29 at 20:06:13 | INFO | Waiting for application startup.
2022-10-29 at 20:06:13 | INFO | Waiting for application startup.
2022-10-29 at 20:06:13 | INFO | Redis has been initialize
2022-10-29 at 20:06:13 | INFO | Redis has been initialize
2022-10-29 at 20:06:13 | INFO | Application startup complete.
2022-10-29 at 20:06:13 | INFO | Application startup complete.
2022-10-29 at 20:07:15 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:07:15 | INFO | Shutting down
2022-10-29 at 20:07:15 | INFO | Shutting down
2022-10-29 at 20:07:15 | INFO | Waiting for application shutdown.
2022-10-29 at 20:07:15 | INFO | Waiting for application shutdown.
2022-10-29 at 20:07:15 | INFO | Application shutdown complete.
2022-10-29 at 20:07:15 | INFO | Application shutdown complete.
2022-10-29 at 20:07:15 | INFO | Finished server process [120315]
2022-10-29 at 20:07:15 | INFO | Finished server process [120315]
2022-10-29 at 20:07:15 | INFO | Setup middlewares
2022-10-29 at 20:07:15 | INFO | Setup middlewares
2022-10-29 at 20:07:15 | INFO | Setup middlewares
2022-10-29 at 20:07:15 | INFO | Started server process [120442]
2022-10-29 at 20:07:15 | INFO | Started server process [120442]
2022-10-29 at 20:07:15 | INFO | Waiting for application startup.
2022-10-29 at 20:07:15 | INFO | Waiting for application startup.
2022-10-29 at 20:07:15 | INFO | Redis has been initialize
2022-10-29 at 20:07:15 | INFO | Redis has been initialize
2022-10-29 at 20:07:15 | INFO | Application startup complete.
2022-10-29 at 20:07:15 | INFO | Application startup complete.
2022-10-29 at 20:08:13 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:08:14 | INFO | Shutting down
2022-10-29 at 20:08:14 | INFO | Shutting down
2022-10-29 at 20:08:14 | INFO | Waiting for application shutdown.
2022-10-29 at 20:08:14 | INFO | Waiting for application shutdown.
2022-10-29 at 20:08:14 | INFO | Application shutdown complete.
2022-10-29 at 20:08:14 | INFO | Application shutdown complete.
2022-10-29 at 20:08:14 | INFO | Finished server process [120442]
2022-10-29 at 20:08:14 | INFO | Finished server process [120442]
2022-10-29 at 20:08:14 | INFO | Setup middlewares
2022-10-29 at 20:08:14 | INFO | Setup middlewares
2022-10-29 at 20:08:14 | INFO | Setup middlewares
2022-10-29 at 20:08:14 | INFO | Started server process [120583]
2022-10-29 at 20:08:14 | INFO | Started server process [120583]
2022-10-29 at 20:08:14 | INFO | Waiting for application startup.
2022-10-29 at 20:08:14 | INFO | Waiting for application startup.
2022-10-29 at 20:08:14 | INFO | Redis has been initialize
2022-10-29 at 20:08:14 | INFO | Redis has been initialize
2022-10-29 at 20:08:14 | INFO | Application startup complete.
2022-10-29 at 20:08:14 | INFO | Application startup complete.
2022-10-29 at 20:08:16 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:08:17 | INFO | Shutting down
2022-10-29 at 20:08:17 | INFO | Shutting down
2022-10-29 at 20:08:17 | INFO | Waiting for application shutdown.
2022-10-29 at 20:08:17 | INFO | Waiting for application shutdown.
2022-10-29 at 20:08:17 | INFO | Application shutdown complete.
2022-10-29 at 20:08:17 | INFO | Application shutdown complete.
2022-10-29 at 20:08:17 | INFO | Finished server process [120583]
2022-10-29 at 20:08:17 | INFO | Finished server process [120583]
2022-10-29 at 20:08:17 | INFO | Setup middlewares
2022-10-29 at 20:08:17 | INFO | Setup middlewares
2022-10-29 at 20:08:17 | INFO | Setup middlewares
2022-10-29 at 20:08:17 | INFO | Started server process [120591]
2022-10-29 at 20:08:17 | INFO | Started server process [120591]
2022-10-29 at 20:08:17 | INFO | Waiting for application startup.
2022-10-29 at 20:08:17 | INFO | Waiting for application startup.
2022-10-29 at 20:08:17 | INFO | Redis has been initialize
2022-10-29 at 20:08:17 | INFO | Redis has been initialize
2022-10-29 at 20:08:17 | INFO | Application startup complete.
2022-10-29 at 20:08:17 | INFO | Application startup complete.
2022-10-29 at 20:08:26 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:08:26 | INFO | Shutting down
2022-10-29 at 20:08:26 | INFO | Shutting down
2022-10-29 at 20:08:26 | INFO | Waiting for application shutdown.
2022-10-29 at 20:08:26 | INFO | Waiting for application shutdown.
2022-10-29 at 20:08:26 | INFO | Application shutdown complete.
2022-10-29 at 20:08:26 | INFO | Application shutdown complete.
2022-10-29 at 20:08:26 | INFO | Finished server process [120591]
2022-10-29 at 20:08:26 | INFO | Finished server process [120591]
2022-10-29 at 20:08:27 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:08:32 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:08:39 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:08:51 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:09:00 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:09:02 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:09:03 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:09:16 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:09:17 | INFO | Setup middlewares
2022-10-29 at 20:09:17 | INFO | Setup middlewares
2022-10-29 at 20:09:17 | INFO | Setup middlewares
2022-10-29 at 20:09:17 | INFO | Started server process [120774]
2022-10-29 at 20:09:17 | INFO | Started server process [120774]
2022-10-29 at 20:09:17 | INFO | Waiting for application startup.
2022-10-29 at 20:09:17 | INFO | Waiting for application startup.
2022-10-29 at 20:09:17 | INFO | Redis has been initialize
2022-10-29 at 20:09:17 | INFO | Redis has been initialize
2022-10-29 at 20:09:17 | INFO | Application startup complete.
2022-10-29 at 20:09:17 | INFO | Application startup complete.
2022-10-29 at 20:09:20 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:09:20 | INFO | Shutting down
2022-10-29 at 20:09:20 | INFO | Shutting down
2022-10-29 at 20:09:20 | INFO | Waiting for application shutdown.
2022-10-29 at 20:09:20 | INFO | Waiting for application shutdown.
2022-10-29 at 20:09:20 | INFO | Application shutdown complete.
2022-10-29 at 20:09:20 | INFO | Application shutdown complete.
2022-10-29 at 20:09:20 | INFO | Finished server process [120774]
2022-10-29 at 20:09:20 | INFO | Finished server process [120774]
2022-10-29 at 20:09:23 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:09:23 | INFO | Setup middlewares
2022-10-29 at 20:09:23 | INFO | Setup middlewares
2022-10-29 at 20:09:23 | INFO | Setup middlewares
2022-10-29 at 20:09:23 | INFO | Started server process [120803]
2022-10-29 at 20:09:23 | INFO | Started server process [120803]
2022-10-29 at 20:09:23 | INFO | Waiting for application startup.
2022-10-29 at 20:09:23 | INFO | Waiting for application startup.
2022-10-29 at 20:09:23 | INFO | Redis has been initialize
2022-10-29 at 20:09:23 | INFO | Redis has been initialize
2022-10-29 at 20:09:23 | INFO | Application startup complete.
2022-10-29 at 20:09:23 | INFO | Application startup complete.
2022-10-29 at 20:09:24 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:09:25 | INFO | Shutting down
2022-10-29 at 20:09:25 | INFO | Shutting down
2022-10-29 at 20:09:25 | INFO | Waiting for application shutdown.
2022-10-29 at 20:09:25 | INFO | Waiting for application shutdown.
2022-10-29 at 20:09:25 | INFO | Application shutdown complete.
2022-10-29 at 20:09:25 | INFO | Application shutdown complete.
2022-10-29 at 20:09:25 | INFO | Finished server process [120803]
2022-10-29 at 20:09:25 | INFO | Finished server process [120803]
2022-10-29 at 20:09:27 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:09:28 | INFO | Setup middlewares
2022-10-29 at 20:09:28 | INFO | Setup middlewares
2022-10-29 at 20:09:28 | INFO | Setup middlewares
2022-10-29 at 20:09:28 | INFO | Started server process [120821]
2022-10-29 at 20:09:28 | INFO | Started server process [120821]
2022-10-29 at 20:09:28 | INFO | Waiting for application startup.
2022-10-29 at 20:09:28 | INFO | Waiting for application startup.
2022-10-29 at 20:09:28 | INFO | Redis has been initialize
2022-10-29 at 20:09:28 | INFO | Redis has been initialize
2022-10-29 at 20:09:28 | INFO | Application startup complete.
2022-10-29 at 20:09:28 | INFO | Application startup complete.
2022-10-29 at 20:09:29 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:09:29 | INFO | Shutting down
2022-10-29 at 20:09:29 | INFO | Shutting down
2022-10-29 at 20:09:29 | INFO | Waiting for application shutdown.
2022-10-29 at 20:09:29 | INFO | Waiting for application shutdown.
2022-10-29 at 20:09:29 | INFO | Application shutdown complete.
2022-10-29 at 20:09:29 | INFO | Application shutdown complete.
2022-10-29 at 20:09:29 | INFO | Finished server process [120821]
2022-10-29 at 20:09:29 | INFO | Finished server process [120821]
2022-10-29 at 20:09:32 | WARNING | StatReload detected changes in 'crud/cinema_crud.py'. Reloading...
2022-10-29 at 20:09:32 | INFO | Setup middlewares
2022-10-29 at 20:09:32 | INFO | Setup middlewares
2022-10-29 at 20:09:32 | INFO | Setup middlewares
2022-10-29 at 20:09:32 | INFO | Started server process [120854]
2022-10-29 at 20:09:32 | INFO | Started server process [120854]
2022-10-29 at 20:09:32 | INFO | Waiting for application startup.
2022-10-29 at 20:09:32 | INFO | Waiting for application startup.
2022-10-29 at 20:09:32 | INFO | Redis has been initialize
2022-10-29 at 20:09:32 | INFO | Redis has been initialize
2022-10-29 at 20:09:32 | INFO | Application startup complete.
2022-10-29 at 20:09:32 | INFO | Application startup complete.
2022-10-29 at 20:09:56 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:09:56 | INFO | Shutting down
2022-10-29 at 20:09:56 | INFO | Shutting down
2022-10-29 at 20:09:57 | INFO | Waiting for application shutdown.
2022-10-29 at 20:09:57 | INFO | Waiting for application shutdown.
2022-10-29 at 20:09:57 | INFO | Application shutdown complete.
2022-10-29 at 20:09:57 | INFO | Application shutdown complete.
2022-10-29 at 20:09:57 | INFO | Finished server process [120854]
2022-10-29 at 20:09:57 | INFO | Finished server process [120854]
2022-10-29 at 20:09:57 | INFO | Setup middlewares
2022-10-29 at 20:09:57 | INFO | Setup middlewares
2022-10-29 at 20:09:57 | INFO | Setup middlewares
2022-10-29 at 20:09:57 | INFO | Started server process [120908]
2022-10-29 at 20:09:57 | INFO | Started server process [120908]
2022-10-29 at 20:09:57 | INFO | Waiting for application startup.
2022-10-29 at 20:09:57 | INFO | Waiting for application startup.
2022-10-29 at 20:09:57 | INFO | Redis has been initialize
2022-10-29 at 20:09:57 | INFO | Redis has been initialize
2022-10-29 at 20:09:57 | INFO | Application startup complete.
2022-10-29 at 20:09:57 | INFO | Application startup complete.
2022-10-29 at 20:09:58 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:09:58 | INFO | Shutting down
2022-10-29 at 20:09:58 | INFO | Shutting down
2022-10-29 at 20:09:58 | INFO | Waiting for application shutdown.
2022-10-29 at 20:09:58 | INFO | Waiting for application shutdown.
2022-10-29 at 20:09:58 | INFO | Application shutdown complete.
2022-10-29 at 20:09:58 | INFO | Application shutdown complete.
2022-10-29 at 20:09:58 | INFO | Finished server process [120908]
2022-10-29 at 20:09:58 | INFO | Finished server process [120908]
2022-10-29 at 20:09:58 | INFO | Setup middlewares
2022-10-29 at 20:09:58 | INFO | Setup middlewares
2022-10-29 at 20:09:58 | INFO | Setup middlewares
2022-10-29 at 20:09:58 | INFO | Started server process [120914]
2022-10-29 at 20:09:58 | INFO | Started server process [120914]
2022-10-29 at 20:09:58 | INFO | Waiting for application startup.
2022-10-29 at 20:09:58 | INFO | Waiting for application startup.
2022-10-29 at 20:09:58 | INFO | Redis has been initialize
2022-10-29 at 20:09:58 | INFO | Redis has been initialize
2022-10-29 at 20:09:58 | INFO | Application startup complete.
2022-10-29 at 20:09:58 | INFO | Application startup complete.
2022-10-29 at 20:10:24 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:10:24 | INFO | Shutting down
2022-10-29 at 20:10:24 | INFO | Shutting down
2022-10-29 at 20:10:24 | INFO | Waiting for application shutdown.
2022-10-29 at 20:10:24 | INFO | Waiting for application shutdown.
2022-10-29 at 20:10:24 | INFO | Application shutdown complete.
2022-10-29 at 20:10:24 | INFO | Application shutdown complete.
2022-10-29 at 20:10:24 | INFO | Finished server process [120914]
2022-10-29 at 20:10:24 | INFO | Finished server process [120914]
2022-10-29 at 20:10:24 | INFO | Setup middlewares
2022-10-29 at 20:10:24 | INFO | Setup middlewares
2022-10-29 at 20:10:24 | INFO | Setup middlewares
2022-10-29 at 20:10:24 | INFO | Started server process [120979]
2022-10-29 at 20:10:24 | INFO | Started server process [120979]
2022-10-29 at 20:10:24 | INFO | Waiting for application startup.
2022-10-29 at 20:10:24 | INFO | Waiting for application startup.
2022-10-29 at 20:10:24 | INFO | Redis has been initialize
2022-10-29 at 20:10:24 | INFO | Redis has been initialize
2022-10-29 at 20:10:24 | INFO | Application startup complete.
2022-10-29 at 20:10:24 | INFO | Application startup complete.
2022-10-29 at 20:12:17 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:17 | INFO | Shutting down
2022-10-29 at 20:12:17 | INFO | Shutting down
2022-10-29 at 20:12:18 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:18 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:18 | INFO | Application shutdown complete.
2022-10-29 at 20:12:18 | INFO | Application shutdown complete.
2022-10-29 at 20:12:18 | INFO | Finished server process [120979]
2022-10-29 at 20:12:18 | INFO | Finished server process [120979]
2022-10-29 at 20:12:18 | INFO | Setup middlewares
2022-10-29 at 20:12:18 | INFO | Setup middlewares
2022-10-29 at 20:12:18 | INFO | Setup middlewares
2022-10-29 at 20:12:18 | INFO | Started server process [121200]
2022-10-29 at 20:12:18 | INFO | Started server process [121200]
2022-10-29 at 20:12:18 | INFO | Waiting for application startup.
2022-10-29 at 20:12:18 | INFO | Waiting for application startup.
2022-10-29 at 20:12:18 | INFO | Redis has been initialize
2022-10-29 at 20:12:18 | INFO | Redis has been initialize
2022-10-29 at 20:12:18 | INFO | Application startup complete.
2022-10-29 at 20:12:18 | INFO | Application startup complete.
2022-10-29 at 20:12:21 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:21 | INFO | Shutting down
2022-10-29 at 20:12:21 | INFO | Shutting down
2022-10-29 at 20:12:21 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:21 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:21 | INFO | Application shutdown complete.
2022-10-29 at 20:12:21 | INFO | Application shutdown complete.
2022-10-29 at 20:12:21 | INFO | Finished server process [121200]
2022-10-29 at 20:12:21 | INFO | Finished server process [121200]
2022-10-29 at 20:12:23 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:35 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:38 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:41 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:42 | INFO | Setup middlewares
2022-10-29 at 20:12:42 | INFO | Setup middlewares
2022-10-29 at 20:12:42 | INFO | Setup middlewares
2022-10-29 at 20:12:42 | INFO | Started server process [121276]
2022-10-29 at 20:12:42 | INFO | Started server process [121276]
2022-10-29 at 20:12:42 | INFO | Waiting for application startup.
2022-10-29 at 20:12:42 | INFO | Waiting for application startup.
2022-10-29 at 20:12:42 | INFO | Redis has been initialize
2022-10-29 at 20:12:42 | INFO | Redis has been initialize
2022-10-29 at 20:12:42 | INFO | Application startup complete.
2022-10-29 at 20:12:42 | INFO | Application startup complete.
2022-10-29 at 20:12:43 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:43 | INFO | Shutting down
2022-10-29 at 20:12:43 | INFO | Shutting down
2022-10-29 at 20:12:43 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:43 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:43 | INFO | Application shutdown complete.
2022-10-29 at 20:12:43 | INFO | Application shutdown complete.
2022-10-29 at 20:12:43 | INFO | Finished server process [121276]
2022-10-29 at 20:12:43 | INFO | Finished server process [121276]
2022-10-29 at 20:12:43 | INFO | Setup middlewares
2022-10-29 at 20:12:43 | INFO | Setup middlewares
2022-10-29 at 20:12:43 | INFO | Setup middlewares
2022-10-29 at 20:12:43 | INFO | Started server process [121301]
2022-10-29 at 20:12:43 | INFO | Started server process [121301]
2022-10-29 at 20:12:43 | INFO | Waiting for application startup.
2022-10-29 at 20:12:43 | INFO | Waiting for application startup.
2022-10-29 at 20:12:43 | INFO | Redis has been initialize
2022-10-29 at 20:12:43 | INFO | Redis has been initialize
2022-10-29 at 20:12:43 | INFO | Application startup complete.
2022-10-29 at 20:12:43 | INFO | Application startup complete.
2022-10-29 at 20:12:44 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:44 | INFO | Shutting down
2022-10-29 at 20:12:44 | INFO | Shutting down
2022-10-29 at 20:12:45 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:45 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:45 | INFO | Application shutdown complete.
2022-10-29 at 20:12:45 | INFO | Application shutdown complete.
2022-10-29 at 20:12:45 | INFO | Finished server process [121301]
2022-10-29 at 20:12:45 | INFO | Finished server process [121301]
2022-10-29 at 20:12:45 | INFO | Setup middlewares
2022-10-29 at 20:12:45 | INFO | Setup middlewares
2022-10-29 at 20:12:45 | INFO | Setup middlewares
2022-10-29 at 20:12:45 | INFO | Started server process [121311]
2022-10-29 at 20:12:45 | INFO | Started server process [121311]
2022-10-29 at 20:12:45 | INFO | Waiting for application startup.
2022-10-29 at 20:12:45 | INFO | Waiting for application startup.
2022-10-29 at 20:12:45 | INFO | Redis has been initialize
2022-10-29 at 20:12:45 | INFO | Redis has been initialize
2022-10-29 at 20:12:45 | INFO | Application startup complete.
2022-10-29 at 20:12:45 | INFO | Application startup complete.
2022-10-29 at 20:12:48 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:48 | INFO | Shutting down
2022-10-29 at 20:12:48 | INFO | Shutting down
2022-10-29 at 20:12:48 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:48 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:48 | INFO | Application shutdown complete.
2022-10-29 at 20:12:48 | INFO | Application shutdown complete.
2022-10-29 at 20:12:48 | INFO | Finished server process [121311]
2022-10-29 at 20:12:48 | INFO | Finished server process [121311]
2022-10-29 at 20:12:49 | INFO | Setup middlewares
2022-10-29 at 20:12:49 | INFO | Setup middlewares
2022-10-29 at 20:12:49 | INFO | Setup middlewares
2022-10-29 at 20:12:49 | INFO | Started server process [121320]
2022-10-29 at 20:12:49 | INFO | Started server process [121320]
2022-10-29 at 20:12:49 | INFO | Waiting for application startup.
2022-10-29 at 20:12:49 | INFO | Waiting for application startup.
2022-10-29 at 20:12:49 | INFO | Redis has been initialize
2022-10-29 at 20:12:49 | INFO | Redis has been initialize
2022-10-29 at 20:12:49 | INFO | Application startup complete.
2022-10-29 at 20:12:49 | INFO | Application startup complete.
2022-10-29 at 20:12:52 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:52 | INFO | Shutting down
2022-10-29 at 20:12:52 | INFO | Shutting down
2022-10-29 at 20:12:52 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:52 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:52 | INFO | Application shutdown complete.
2022-10-29 at 20:12:52 | INFO | Application shutdown complete.
2022-10-29 at 20:12:52 | INFO | Finished server process [121320]
2022-10-29 at 20:12:52 | INFO | Finished server process [121320]
2022-10-29 at 20:12:53 | INFO | Setup middlewares
2022-10-29 at 20:12:53 | INFO | Setup middlewares
2022-10-29 at 20:12:53 | INFO | Setup middlewares
2022-10-29 at 20:12:53 | INFO | Started server process [121328]
2022-10-29 at 20:12:53 | INFO | Started server process [121328]
2022-10-29 at 20:12:53 | INFO | Waiting for application startup.
2022-10-29 at 20:12:53 | INFO | Waiting for application startup.
2022-10-29 at 20:12:53 | INFO | Redis has been initialize
2022-10-29 at 20:12:53 | INFO | Redis has been initialize
2022-10-29 at 20:12:53 | INFO | Application startup complete.
2022-10-29 at 20:12:53 | INFO | Application startup complete.
2022-10-29 at 20:12:54 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:54 | INFO | Shutting down
2022-10-29 at 20:12:54 | INFO | Shutting down
2022-10-29 at 20:12:55 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:55 | INFO | Waiting for application shutdown.
2022-10-29 at 20:12:55 | INFO | Application shutdown complete.
2022-10-29 at 20:12:55 | INFO | Application shutdown complete.
2022-10-29 at 20:12:55 | INFO | Finished server process [121328]
2022-10-29 at 20:12:55 | INFO | Finished server process [121328]
2022-10-29 at 20:12:57 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:12:58 | INFO | Setup middlewares
2022-10-29 at 20:12:58 | INFO | Setup middlewares
2022-10-29 at 20:12:58 | INFO | Setup middlewares
2022-10-29 at 20:12:58 | INFO | Started server process [121360]
2022-10-29 at 20:12:58 | INFO | Started server process [121360]
2022-10-29 at 20:12:58 | INFO | Waiting for application startup.
2022-10-29 at 20:12:58 | INFO | Waiting for application startup.
2022-10-29 at 20:12:58 | INFO | Redis has been initialize
2022-10-29 at 20:12:58 | INFO | Redis has been initialize
2022-10-29 at 20:12:58 | INFO | Application startup complete.
2022-10-29 at 20:12:58 | INFO | Application startup complete.
2022-10-29 at 20:13:02 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:13:02 | INFO | Shutting down
2022-10-29 at 20:13:02 | INFO | Shutting down
2022-10-29 at 20:13:02 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:02 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:02 | INFO | Application shutdown complete.
2022-10-29 at 20:13:02 | INFO | Application shutdown complete.
2022-10-29 at 20:13:02 | INFO | Finished server process [121360]
2022-10-29 at 20:13:02 | INFO | Finished server process [121360]
2022-10-29 at 20:13:02 | INFO | Setup middlewares
2022-10-29 at 20:13:02 | INFO | Setup middlewares
2022-10-29 at 20:13:02 | INFO | Setup middlewares
2022-10-29 at 20:13:02 | INFO | Started server process [121369]
2022-10-29 at 20:13:02 | INFO | Started server process [121369]
2022-10-29 at 20:13:02 | INFO | Waiting for application startup.
2022-10-29 at 20:13:02 | INFO | Waiting for application startup.
2022-10-29 at 20:13:02 | INFO | Redis has been initialize
2022-10-29 at 20:13:02 | INFO | Redis has been initialize
2022-10-29 at 20:13:02 | INFO | Application startup complete.
2022-10-29 at 20:13:02 | INFO | Application startup complete.
2022-10-29 at 20:13:05 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:13:05 | INFO | Shutting down
2022-10-29 at 20:13:05 | INFO | Shutting down
2022-10-29 at 20:13:05 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:05 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:05 | INFO | Application shutdown complete.
2022-10-29 at 20:13:05 | INFO | Application shutdown complete.
2022-10-29 at 20:13:05 | INFO | Finished server process [121369]
2022-10-29 at 20:13:05 | INFO | Finished server process [121369]
2022-10-29 at 20:13:06 | INFO | Setup middlewares
2022-10-29 at 20:13:06 | INFO | Setup middlewares
2022-10-29 at 20:13:06 | INFO | Setup middlewares
2022-10-29 at 20:13:06 | INFO | Started server process [121394]
2022-10-29 at 20:13:06 | INFO | Started server process [121394]
2022-10-29 at 20:13:06 | INFO | Waiting for application startup.
2022-10-29 at 20:13:06 | INFO | Waiting for application startup.
2022-10-29 at 20:13:06 | INFO | Redis has been initialize
2022-10-29 at 20:13:06 | INFO | Redis has been initialize
2022-10-29 at 20:13:06 | INFO | Application startup complete.
2022-10-29 at 20:13:06 | INFO | Application startup complete.
2022-10-29 at 20:13:19 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:13:19 | INFO | Shutting down
2022-10-29 at 20:13:19 | INFO | Shutting down
2022-10-29 at 20:13:19 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:19 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:19 | INFO | Application shutdown complete.
2022-10-29 at 20:13:19 | INFO | Application shutdown complete.
2022-10-29 at 20:13:19 | INFO | Finished server process [121394]
2022-10-29 at 20:13:19 | INFO | Finished server process [121394]
2022-10-29 at 20:13:19 | INFO | Setup middlewares
2022-10-29 at 20:13:19 | INFO | Setup middlewares
2022-10-29 at 20:13:19 | INFO | Setup middlewares
2022-10-29 at 20:13:19 | INFO | Started server process [121424]
2022-10-29 at 20:13:19 | INFO | Started server process [121424]
2022-10-29 at 20:13:19 | INFO | Waiting for application startup.
2022-10-29 at 20:13:19 | INFO | Waiting for application startup.
2022-10-29 at 20:13:19 | INFO | Redis has been initialize
2022-10-29 at 20:13:19 | INFO | Redis has been initialize
2022-10-29 at 20:13:19 | INFO | Application startup complete.
2022-10-29 at 20:13:19 | INFO | Application startup complete.
2022-10-29 at 20:13:26 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:13:26 | INFO | Shutting down
2022-10-29 at 20:13:26 | INFO | Shutting down
2022-10-29 at 20:13:26 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:26 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:26 | INFO | Application shutdown complete.
2022-10-29 at 20:13:26 | INFO | Application shutdown complete.
2022-10-29 at 20:13:26 | INFO | Finished server process [121424]
2022-10-29 at 20:13:26 | INFO | Finished server process [121424]
2022-10-29 at 20:13:26 | INFO | Setup middlewares
2022-10-29 at 20:13:26 | INFO | Setup middlewares
2022-10-29 at 20:13:26 | INFO | Setup middlewares
2022-10-29 at 20:13:26 | INFO | Started server process [121449]
2022-10-29 at 20:13:26 | INFO | Started server process [121449]
2022-10-29 at 20:13:26 | INFO | Waiting for application startup.
2022-10-29 at 20:13:26 | INFO | Waiting for application startup.
2022-10-29 at 20:13:26 | INFO | Redis has been initialize
2022-10-29 at 20:13:26 | INFO | Redis has been initialize
2022-10-29 at 20:13:26 | INFO | Application startup complete.
2022-10-29 at 20:13:26 | INFO | Application startup complete.
2022-10-29 at 20:13:35 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:13:35 | INFO | Shutting down
2022-10-29 at 20:13:35 | INFO | Shutting down
2022-10-29 at 20:13:36 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:36 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:36 | INFO | Application shutdown complete.
2022-10-29 at 20:13:36 | INFO | Application shutdown complete.
2022-10-29 at 20:13:36 | INFO | Finished server process [121449]
2022-10-29 at 20:13:36 | INFO | Finished server process [121449]
2022-10-29 at 20:13:36 | INFO | Setup middlewares
2022-10-29 at 20:13:36 | INFO | Setup middlewares
2022-10-29 at 20:13:36 | INFO | Setup middlewares
2022-10-29 at 20:13:36 | INFO | Started server process [121472]
2022-10-29 at 20:13:36 | INFO | Started server process [121472]
2022-10-29 at 20:13:36 | INFO | Waiting for application startup.
2022-10-29 at 20:13:36 | INFO | Waiting for application startup.
2022-10-29 at 20:13:36 | INFO | Redis has been initialize
2022-10-29 at 20:13:36 | INFO | Redis has been initialize
2022-10-29 at 20:13:36 | INFO | Application startup complete.
2022-10-29 at 20:13:36 | INFO | Application startup complete.
2022-10-29 at 20:13:54 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:13:54 | INFO | Shutting down
2022-10-29 at 20:13:54 | INFO | Shutting down
2022-10-29 at 20:13:54 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:54 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:54 | INFO | Application shutdown complete.
2022-10-29 at 20:13:54 | INFO | Application shutdown complete.
2022-10-29 at 20:13:54 | INFO | Finished server process [121472]
2022-10-29 at 20:13:54 | INFO | Finished server process [121472]
2022-10-29 at 20:13:55 | INFO | Setup middlewares
2022-10-29 at 20:13:55 | INFO | Setup middlewares
2022-10-29 at 20:13:55 | INFO | Setup middlewares
2022-10-29 at 20:13:55 | INFO | Started server process [121525]
2022-10-29 at 20:13:55 | INFO | Started server process [121525]
2022-10-29 at 20:13:55 | INFO | Waiting for application startup.
2022-10-29 at 20:13:55 | INFO | Waiting for application startup.
2022-10-29 at 20:13:55 | INFO | Redis has been initialize
2022-10-29 at 20:13:55 | INFO | Redis has been initialize
2022-10-29 at 20:13:55 | INFO | Application startup complete.
2022-10-29 at 20:13:55 | INFO | Application startup complete.
2022-10-29 at 20:13:58 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:13:58 | INFO | Shutting down
2022-10-29 at 20:13:58 | INFO | Shutting down
2022-10-29 at 20:13:58 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:58 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:58 | INFO | Application shutdown complete.
2022-10-29 at 20:13:58 | INFO | Application shutdown complete.
2022-10-29 at 20:13:58 | INFO | Finished server process [121525]
2022-10-29 at 20:13:58 | INFO | Finished server process [121525]
2022-10-29 at 20:13:59 | INFO | Setup middlewares
2022-10-29 at 20:13:59 | INFO | Setup middlewares
2022-10-29 at 20:13:59 | INFO | Setup middlewares
2022-10-29 at 20:13:59 | INFO | Started server process [121532]
2022-10-29 at 20:13:59 | INFO | Started server process [121532]
2022-10-29 at 20:13:59 | INFO | Waiting for application startup.
2022-10-29 at 20:13:59 | INFO | Waiting for application startup.
2022-10-29 at 20:13:59 | INFO | Redis has been initialize
2022-10-29 at 20:13:59 | INFO | Redis has been initialize
2022-10-29 at 20:13:59 | INFO | Application startup complete.
2022-10-29 at 20:13:59 | INFO | Application startup complete.
2022-10-29 at 20:13:59 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:13:59 | INFO | Shutting down
2022-10-29 at 20:13:59 | INFO | Shutting down
2022-10-29 at 20:13:59 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:59 | INFO | Waiting for application shutdown.
2022-10-29 at 20:13:59 | INFO | Application shutdown complete.
2022-10-29 at 20:13:59 | INFO | Application shutdown complete.
2022-10-29 at 20:13:59 | INFO | Finished server process [121532]
2022-10-29 at 20:13:59 | INFO | Finished server process [121532]
2022-10-29 at 20:14:00 | INFO | Setup middlewares
2022-10-29 at 20:14:00 | INFO | Setup middlewares
2022-10-29 at 20:14:00 | INFO | Setup middlewares
2022-10-29 at 20:14:00 | INFO | Started server process [121538]
2022-10-29 at 20:14:00 | INFO | Started server process [121538]
2022-10-29 at 20:14:00 | INFO | Waiting for application startup.
2022-10-29 at 20:14:00 | INFO | Waiting for application startup.
2022-10-29 at 20:14:00 | INFO | Redis has been initialize
2022-10-29 at 20:14:00 | INFO | Redis has been initialize
2022-10-29 at 20:14:00 | INFO | Application startup complete.
2022-10-29 at 20:14:00 | INFO | Application startup complete.
2022-10-29 at 20:14:05 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:14:05 | INFO | Shutting down
2022-10-29 at 20:14:05 | INFO | Shutting down
2022-10-29 at 20:14:05 | INFO | Waiting for application shutdown.
2022-10-29 at 20:14:05 | INFO | Waiting for application shutdown.
2022-10-29 at 20:14:05 | INFO | Application shutdown complete.
2022-10-29 at 20:14:05 | INFO | Application shutdown complete.
2022-10-29 at 20:14:05 | INFO | Finished server process [121538]
2022-10-29 at 20:14:05 | INFO | Finished server process [121538]
2022-10-29 at 20:14:06 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:14:07 | INFO | Setup middlewares
2022-10-29 at 20:14:07 | INFO | Setup middlewares
2022-10-29 at 20:14:07 | INFO | Setup middlewares
2022-10-29 at 20:14:07 | INFO | Started server process [121571]
2022-10-29 at 20:14:07 | INFO | Started server process [121571]
2022-10-29 at 20:14:07 | INFO | Waiting for application startup.
2022-10-29 at 20:14:07 | INFO | Waiting for application startup.
2022-10-29 at 20:14:07 | INFO | Redis has been initialize
2022-10-29 at 20:14:07 | INFO | Redis has been initialize
2022-10-29 at 20:14:07 | INFO | Application startup complete.
2022-10-29 at 20:14:07 | INFO | Application startup complete.
2022-10-29 at 20:14:11 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:14:11 | INFO | Shutting down
2022-10-29 at 20:14:11 | INFO | Shutting down
2022-10-29 at 20:14:11 | INFO | Waiting for application shutdown.
2022-10-29 at 20:14:11 | INFO | Waiting for application shutdown.
2022-10-29 at 20:14:11 | INFO | Application shutdown complete.
2022-10-29 at 20:14:11 | INFO | Application shutdown complete.
2022-10-29 at 20:14:11 | INFO | Finished server process [121571]
2022-10-29 at 20:14:11 | INFO | Finished server process [121571]
2022-10-29 at 20:14:12 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:14:13 | INFO | Setup middlewares
2022-10-29 at 20:14:13 | INFO | Setup middlewares
2022-10-29 at 20:14:13 | INFO | Setup middlewares
2022-10-29 at 20:14:13 | INFO | Started server process [121586]
2022-10-29 at 20:14:13 | INFO | Started server process [121586]
2022-10-29 at 20:14:13 | INFO | Waiting for application startup.
2022-10-29 at 20:14:13 | INFO | Waiting for application startup.
2022-10-29 at 20:14:13 | INFO | Redis has been initialize
2022-10-29 at 20:14:13 | INFO | Redis has been initialize
2022-10-29 at 20:14:13 | INFO | Application startup complete.
2022-10-29 at 20:14:13 | INFO | Application startup complete.
2022-10-29 at 20:14:31 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-29 at 20:14:31 | INFO | Shutting down
2022-10-29 at 20:14:31 | INFO | Shutting down
2022-10-29 at 20:14:31 | INFO | Waiting for application shutdown.
2022-10-29 at 20:14:31 | INFO | Waiting for application shutdown.
2022-10-29 at 20:14:31 | INFO | Application shutdown complete.
2022-10-29 at 20:14:31 | INFO | Application shutdown complete.
2022-10-29 at 20:14:31 | INFO | Finished server process [121586]
2022-10-29 at 20:14:31 | INFO | Finished server process [121586]
2022-10-29 at 20:14:32 | INFO | Setup middlewares
2022-10-29 at 20:14:32 | INFO | Setup middlewares
2022-10-29 at 20:14:32 | INFO | Setup middlewares
2022-10-29 at 20:14:32 | INFO | Started server process [121638]
2022-10-29 at 20:14:32 | INFO | Started server process [121638]
2022-10-29 at 20:14:32 | INFO | Waiting for application startup.
2022-10-29 at 20:14:32 | INFO | Waiting for application startup.
2022-10-29 at 20:14:32 | INFO | Redis has been initialize
2022-10-29 at 20:14:32 | INFO | Redis has been initialize
2022-10-29 at 20:14:32 | INFO | Application startup complete.
2022-10-29 at 20:14:32 | INFO | Application startup complete.
2022-10-29 at 20:14:37 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-29 at 20:14:37 | INFO | Shutting down
2022-10-29 at 20:14:37 | INFO | Shutting down
2022-10-29 at 20:14:37 | INFO | Waiting for application shutdown.
2022-10-29 at 20:14:37 | INFO | Waiting for application shutdown.
2022-10-29 at 20:14:37 | INFO | Application shutdown complete.
2022-10-29 at 20:14:37 | INFO | Application shutdown complete.
2022-10-29 at 20:14:37 | INFO | Finished server process [121638]
2022-10-29 at 20:14:37 | INFO | Finished server process [121638]
2022-10-29 at 20:14:38 | INFO | Setup middlewares
2022-10-29 at 20:14:38 | INFO | Setup middlewares
2022-10-29 at 20:14:38 | INFO | Setup middlewares
2022-10-29 at 20:14:38 | INFO | Started server process [121664]
2022-10-29 at 20:14:38 | INFO | Started server process [121664]
2022-10-29 at 20:14:38 | INFO | Waiting for application startup.
2022-10-29 at 20:14:38 | INFO | Waiting for application startup.
2022-10-29 at 20:14:38 | INFO | Redis has been initialize
2022-10-29 at 20:14:38 | INFO | Redis has been initialize
2022-10-29 at 20:14:38 | INFO | Application startup complete.
2022-10-29 at 20:14:38 | INFO | Application startup complete.
2022-10-29 at 20:15:50 | WARNING | StatReload detected changes in 'service/base_service.py'. Reloading...
2022-10-29 at 20:15:50 | INFO | Shutting down
2022-10-29 at 20:15:50 | INFO | Shutting down
2022-10-29 at 20:15:50 | INFO | Waiting for application shutdown.
2022-10-29 at 20:15:50 | INFO | Waiting for application shutdown.
2022-10-29 at 20:15:50 | INFO | Application shutdown complete.
2022-10-29 at 20:15:50 | INFO | Application shutdown complete.
2022-10-29 at 20:15:50 | INFO | Finished server process [121664]
2022-10-29 at 20:15:50 | INFO | Finished server process [121664]
2022-10-29 at 20:15:51 | INFO | Setup middlewares
2022-10-29 at 20:15:51 | INFO | Setup middlewares
2022-10-29 at 20:15:51 | INFO | Setup middlewares
2022-10-29 at 20:15:51 | INFO | Started server process [121819]
2022-10-29 at 20:15:51 | INFO | Started server process [121819]
2022-10-29 at 20:15:51 | INFO | Waiting for application startup.
2022-10-29 at 20:15:51 | INFO | Waiting for application startup.
2022-10-29 at 20:15:51 | INFO | Redis has been initialize
2022-10-29 at 20:15:51 | INFO | Redis has been initialize
2022-10-29 at 20:15:51 | INFO | Application startup complete.
2022-10-29 at 20:15:51 | INFO | Application startup complete.
2022-10-29 at 20:15:53 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-29 at 20:15:53 | INFO | Shutting down
2022-10-29 at 20:15:53 | INFO | Shutting down
2022-10-29 at 20:15:53 | INFO | Waiting for application shutdown.
2022-10-29 at 20:15:53 | INFO | Waiting for application shutdown.
2022-10-29 at 20:15:53 | INFO | Application shutdown complete.
2022-10-29 at 20:15:53 | INFO | Application shutdown complete.
2022-10-29 at 20:15:53 | INFO | Finished server process [121819]
2022-10-29 at 20:15:53 | INFO | Finished server process [121819]
2022-10-29 at 20:15:54 | INFO | Setup middlewares
2022-10-29 at 20:15:54 | INFO | Setup middlewares
2022-10-29 at 20:15:54 | INFO | Setup middlewares
2022-10-29 at 20:15:54 | INFO | Started server process [121827]
2022-10-29 at 20:15:54 | INFO | Started server process [121827]
2022-10-29 at 20:15:54 | INFO | Waiting for application startup.
2022-10-29 at 20:15:54 | INFO | Waiting for application startup.
2022-10-29 at 20:15:54 | INFO | Redis has been initialize
2022-10-29 at 20:15:54 | INFO | Redis has been initialize
2022-10-29 at 20:15:54 | INFO | Application startup complete.
2022-10-29 at 20:15:54 | INFO | Application startup complete.
2022-10-29 at 20:16:15 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:16:15 | INFO | Shutting down
2022-10-29 at 20:16:15 | INFO | Shutting down
2022-10-29 at 20:16:15 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:15 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:15 | INFO | Application shutdown complete.
2022-10-29 at 20:16:15 | INFO | Application shutdown complete.
2022-10-29 at 20:16:15 | INFO | Finished server process [121827]
2022-10-29 at 20:16:15 | INFO | Finished server process [121827]
2022-10-29 at 20:16:15 | INFO | Setup middlewares
2022-10-29 at 20:16:15 | INFO | Setup middlewares
2022-10-29 at 20:16:15 | INFO | Setup middlewares
2022-10-29 at 20:16:16 | INFO | Started server process [121886]
2022-10-29 at 20:16:16 | INFO | Started server process [121886]
2022-10-29 at 20:16:16 | INFO | Waiting for application startup.
2022-10-29 at 20:16:16 | INFO | Waiting for application startup.
2022-10-29 at 20:16:16 | INFO | Redis has been initialize
2022-10-29 at 20:16:16 | INFO | Redis has been initialize
2022-10-29 at 20:16:16 | INFO | Application startup complete.
2022-10-29 at 20:16:16 | INFO | Application startup complete.
2022-10-29 at 20:16:16 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:16:16 | INFO | Shutting down
2022-10-29 at 20:16:16 | INFO | Shutting down
2022-10-29 at 20:16:16 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:16 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:16 | INFO | Application shutdown complete.
2022-10-29 at 20:16:16 | INFO | Application shutdown complete.
2022-10-29 at 20:16:16 | INFO | Finished server process [121886]
2022-10-29 at 20:16:16 | INFO | Finished server process [121886]
2022-10-29 at 20:16:24 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:16:29 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:16:29 | INFO | Setup middlewares
2022-10-29 at 20:16:29 | INFO | Setup middlewares
2022-10-29 at 20:16:29 | INFO | Setup middlewares
2022-10-29 at 20:16:29 | INFO | Started server process [121929]
2022-10-29 at 20:16:29 | INFO | Started server process [121929]
2022-10-29 at 20:16:29 | INFO | Waiting for application startup.
2022-10-29 at 20:16:29 | INFO | Waiting for application startup.
2022-10-29 at 20:16:29 | INFO | Redis has been initialize
2022-10-29 at 20:16:29 | INFO | Redis has been initialize
2022-10-29 at 20:16:29 | INFO | Application startup complete.
2022-10-29 at 20:16:29 | INFO | Application startup complete.
2022-10-29 at 20:16:32 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:16:32 | INFO | Shutting down
2022-10-29 at 20:16:32 | INFO | Shutting down
2022-10-29 at 20:16:32 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:32 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:32 | INFO | Application shutdown complete.
2022-10-29 at 20:16:32 | INFO | Application shutdown complete.
2022-10-29 at 20:16:32 | INFO | Finished server process [121929]
2022-10-29 at 20:16:32 | INFO | Finished server process [121929]
2022-10-29 at 20:16:32 | INFO | Setup middlewares
2022-10-29 at 20:16:32 | INFO | Setup middlewares
2022-10-29 at 20:16:32 | INFO | Setup middlewares
2022-10-29 at 20:16:32 | INFO | Started server process [121937]
2022-10-29 at 20:16:32 | INFO | Started server process [121937]
2022-10-29 at 20:16:32 | INFO | Waiting for application startup.
2022-10-29 at 20:16:32 | INFO | Waiting for application startup.
2022-10-29 at 20:16:32 | INFO | Redis has been initialize
2022-10-29 at 20:16:32 | INFO | Redis has been initialize
2022-10-29 at 20:16:32 | INFO | Application startup complete.
2022-10-29 at 20:16:32 | INFO | Application startup complete.
2022-10-29 at 20:16:34 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:16:34 | INFO | Shutting down
2022-10-29 at 20:16:34 | INFO | Shutting down
2022-10-29 at 20:16:34 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:34 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:34 | INFO | Application shutdown complete.
2022-10-29 at 20:16:34 | INFO | Application shutdown complete.
2022-10-29 at 20:16:34 | INFO | Finished server process [121937]
2022-10-29 at 20:16:34 | INFO | Finished server process [121937]
2022-10-29 at 20:16:34 | INFO | Setup middlewares
2022-10-29 at 20:16:34 | INFO | Setup middlewares
2022-10-29 at 20:16:34 | INFO | Setup middlewares
2022-10-29 at 20:16:34 | INFO | Started server process [121948]
2022-10-29 at 20:16:34 | INFO | Started server process [121948]
2022-10-29 at 20:16:34 | INFO | Waiting for application startup.
2022-10-29 at 20:16:34 | INFO | Waiting for application startup.
2022-10-29 at 20:16:34 | INFO | Redis has been initialize
2022-10-29 at 20:16:34 | INFO | Redis has been initialize
2022-10-29 at 20:16:34 | INFO | Application startup complete.
2022-10-29 at 20:16:34 | INFO | Application startup complete.
2022-10-29 at 20:16:35 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:16:35 | INFO | Shutting down
2022-10-29 at 20:16:35 | INFO | Shutting down
2022-10-29 at 20:16:35 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:35 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:35 | INFO | Application shutdown complete.
2022-10-29 at 20:16:35 | INFO | Application shutdown complete.
2022-10-29 at 20:16:35 | INFO | Finished server process [121948]
2022-10-29 at 20:16:35 | INFO | Finished server process [121948]
2022-10-29 at 20:16:37 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:16:37 | INFO | Setup middlewares
2022-10-29 at 20:16:37 | INFO | Setup middlewares
2022-10-29 at 20:16:37 | INFO | Setup middlewares
2022-10-29 at 20:16:37 | INFO | Started server process [121977]
2022-10-29 at 20:16:37 | INFO | Started server process [121977]
2022-10-29 at 20:16:37 | INFO | Waiting for application startup.
2022-10-29 at 20:16:37 | INFO | Waiting for application startup.
2022-10-29 at 20:16:37 | INFO | Redis has been initialize
2022-10-29 at 20:16:37 | INFO | Redis has been initialize
2022-10-29 at 20:16:37 | INFO | Application startup complete.
2022-10-29 at 20:16:37 | INFO | Application startup complete.
2022-10-29 at 20:16:38 | WARNING | StatReload detected changes in 'api/v1/cinema_room.py'. Reloading...
2022-10-29 at 20:16:38 | INFO | Shutting down
2022-10-29 at 20:16:38 | INFO | Shutting down
2022-10-29 at 20:16:38 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:38 | INFO | Waiting for application shutdown.
2022-10-29 at 20:16:38 | INFO | Application shutdown complete.
2022-10-29 at 20:16:38 | INFO | Application shutdown complete.
2022-10-29 at 20:16:38 | INFO | Finished server process [121977]
2022-10-29 at 20:16:38 | INFO | Finished server process [121977]
2022-10-29 at 20:16:39 | INFO | Setup middlewares
2022-10-29 at 20:16:39 | INFO | Setup middlewares
2022-10-29 at 20:16:39 | INFO | Setup middlewares
2022-10-29 at 20:16:39 | INFO | Started server process [121985]
2022-10-29 at 20:16:39 | INFO | Started server process [121985]
2022-10-29 at 20:16:39 | INFO | Waiting for application startup.
2022-10-29 at 20:16:39 | INFO | Waiting for application startup.
2022-10-29 at 20:16:39 | INFO | Redis has been initialize
2022-10-29 at 20:16:39 | INFO | Redis has been initialize
2022-10-29 at 20:16:39 | INFO | Application startup complete.
2022-10-29 at 20:16:39 | INFO | Application startup complete.
2022-10-29 at 20:18:19 | INFO | 127.0.0.1:57584 - "POST /api/v1/cinema-room/create HTTP/1.1" 200
2022-10-29 at 20:18:19 | INFO | 127.0.0.1:57584 - "POST /api/v1/cinema-room/create HTTP/1.1" 200
2022-10-29 at 20:18:35 | INFO | 127.0.0.1:35698 - "GET /api/v1/cinema-room/4332b013-a833-4b14-a1e8-d4581bf52208 HTTP/1.1" 200
2022-10-29 at 20:18:35 | INFO | 127.0.0.1:35698 - "GET /api/v1/cinema-room/4332b013-a833-4b14-a1e8-d4581bf52208 HTTP/1.1" 200
2022-10-29 at 20:18:49 | INFO | 127.0.0.1:48766 - "DELETE /api/v1/cinema-room/4332b013-a833-4b14-a1e8-d4581bf52208 HTTP/1.1" 200
2022-10-29 at 20:18:49 | INFO | 127.0.0.1:48766 - "DELETE /api/v1/cinema-room/4332b013-a833-4b14-a1e8-d4581bf52208 HTTP/1.1" 200
2022-10-29 at 20:18:54 | INFO | 127.0.0.1:57980 - "DELETE /api/v1/cinema-room/4332b013-a833-4b14-a1e8-d4581bf52208 HTTP/1.1" 500
2022-10-29 at 20:18:54 | INFO | 127.0.0.1:57980 - "DELETE /api/v1/cinema-room/4332b013-a833-4b14-a1e8-d4581bf52208 HTTP/1.1" 500
2022-10-29 at 20:18:54 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f2fab6e3520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f2fab8cdfc0>
           └ <SpawnProcess name='SpawnProcess-71' parent=118822 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f2fab8cd630>
    └ <SpawnProcess name='SpawnProcess-71' parent=118822 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f2fab728070>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-71' parent=118822 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-71' parent=118822 started>
    │    └ <function subprocess_started at 0x7f2faabac1f0>
    └ <SpawnProcess name='SpawnProcess-71' parent=118822 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2fab728ca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7f2faab87520>
           │       │   └ <uvicorn.server.Server object at 0x7f2fab728ca0>
           │       └ <function run at 0x7f2fab13ae60>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f2fa9923140>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2fa9575b40>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2fa9575bd0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2fa951e5f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2fa9505270>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2fa951e5f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2fa95057b0>
          └ <fastapi.applications.FastAPI object at 0x7f2fa9505270>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2fa9576d40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2fa9507a90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2fa95057b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2fa9576d40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2fa9507ac0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2fa9507a90>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 93, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2fa9576dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2fa9507b20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2fa9507ac0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2fa9576dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x7f2fa9504b80>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2fa9507b20>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2fa9576dd0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x7f2fa989ad40>
          └ <fastapi.routing.APIRoute object at 0x7f2fa9506fb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 266, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2fa9576dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x7f2fa9576830>
          └ <fastapi.routing.APIRoute object at 0x7f2fa9506fb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 65, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2fa9505180>
                     └ <function get_request_handler.<locals>.app at 0x7f2fa95767a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2fa989b9a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'cinema_crud': <crud.cinema_crud.CinemaCRUD object at 0x7f2fa9066a10>, 'cinema_room_id': '4332b013-a833-4b14-a1e8-d4581bf522...
                 │         └ <function delete_cinema_room at 0x7f2fab0c7d90>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f2fa9506fe0>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room.py", line 51, in delete_cinema_room
    await cinema_crud.delete_cinema_room(cinema_room_key=cinema_room_id)
          │           │                                  └ '4332b013-a833-4b14-a1e8-d4581bf52208'
          │           └ <function CinemaCRUD.delete_cinema_room at 0x7f2fab0c5b40>
          └ <crud.cinema_crud.CinemaCRUD object at 0x7f2fa9066a10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/crud/cinema_crud.py", line 46, in delete_cinema_room
    return await self.cinema_service.delete_cinema_room(cinema_key=cinema_room_key)
                 │    │              │                             └ '4332b013-a833-4b14-a1e8-d4581bf52208'
                 │    │              └ <function CinemaService.delete_cinema_room at 0x7f2faaef83a0>
                 │    └ <service.cinema_service.CinemaService object at 0x7f2fa9066a70>
                 └ <crud.cinema_crud.CinemaCRUD object at 0x7f2fa9066a10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 29, in delete_cinema_room
    return await super().delete_cinema_room(cinema_key=cinema_key)
                                                       └ '4332b013-a833-4b14-a1e8-d4581bf52208'

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/base_service.py", line 19, in delete_cinema_room
    return await self._delete(cinema_key=cinema_key)
                 │    │                  └ '4332b013-a833-4b14-a1e8-d4581bf52208'
                 │    └ <function CinemaService._delete at 0x7f2faaef8160>
                 └ <service.cinema_service.CinemaService object at 0x7f2fa9066a70>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 53, in _delete
    raise CinemaRoomNotFoundError(f"Room {cinema_key} not found")
          └ <class 'core.exceptions.CinemaRoomNotFoundError'>

core.exceptions.CinemaRoomNotFoundError: Room 4332b013-a833-4b14-a1e8-d4581bf52208 not found
2022-10-29 at 20:18:54 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f2fab6e3520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f2fab8cdfc0>
           └ <SpawnProcess name='SpawnProcess-71' parent=118822 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f2fab8cd630>
    └ <SpawnProcess name='SpawnProcess-71' parent=118822 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f2fab728070>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-71' parent=118822 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-71' parent=118822 started>
    │    └ <function subprocess_started at 0x7f2faabac1f0>
    └ <SpawnProcess name='SpawnProcess-71' parent=118822 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2fab728ca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7f2faab87520>
           │       │   └ <uvicorn.server.Server object at 0x7f2fab728ca0>
           │       └ <function run at 0x7f2fab13ae60>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f2fa9923140>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2fa9575b40>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2fa9575bd0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2fa951e5f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2fa9505270>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2fa951e5f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2fa95057b0>
          └ <fastapi.applications.FastAPI object at 0x7f2fa9505270>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2fa9576d40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2fa9507a90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2fa95057b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2fa9576d40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2fa9507ac0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2fa9507a90>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 93, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2fa9576dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2fa9507b20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2fa9507ac0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2fa9576dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x7f2fa9504b80>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2fa9507b20>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2fa9576dd0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x7f2fa989ad40>
          └ <fastapi.routing.APIRoute object at 0x7f2fa9506fb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 266, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2fa9576dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2fa9066770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x7f2fa9576830>
          └ <fastapi.routing.APIRoute object at 0x7f2fa9506fb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 65, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2fa9505180>
                     └ <function get_request_handler.<locals>.app at 0x7f2fa95767a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2fa989b9a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'cinema_crud': <crud.cinema_crud.CinemaCRUD object at 0x7f2fa9066a10>, 'cinema_room_id': '4332b013-a833-4b14-a1e8-d4581bf522...
                 │         └ <function delete_cinema_room at 0x7f2fab0c7d90>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f2fa9506fe0>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room.py", line 51, in delete_cinema_room
    await cinema_crud.delete_cinema_room(cinema_room_key=cinema_room_id)
          │           │                                  └ '4332b013-a833-4b14-a1e8-d4581bf52208'
          │           └ <function CinemaCRUD.delete_cinema_room at 0x7f2fab0c5b40>
          └ <crud.cinema_crud.CinemaCRUD object at 0x7f2fa9066a10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/crud/cinema_crud.py", line 46, in delete_cinema_room
    return await self.cinema_service.delete_cinema_room(cinema_key=cinema_room_key)
                 │    │              │                             └ '4332b013-a833-4b14-a1e8-d4581bf52208'
                 │    │              └ <function CinemaService.delete_cinema_room at 0x7f2faaef83a0>
                 │    └ <service.cinema_service.CinemaService object at 0x7f2fa9066a70>
                 └ <crud.cinema_crud.CinemaCRUD object at 0x7f2fa9066a10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 29, in delete_cinema_room
    return await super().delete_cinema_room(cinema_key=cinema_key)
                                                       └ '4332b013-a833-4b14-a1e8-d4581bf52208'

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/base_service.py", line 19, in delete_cinema_room
    return await self._delete(cinema_key=cinema_key)
                 │    │                  └ '4332b013-a833-4b14-a1e8-d4581bf52208'
                 │    └ <function CinemaService._delete at 0x7f2faaef8160>
                 └ <service.cinema_service.CinemaService object at 0x7f2fa9066a70>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 53, in _delete
    raise CinemaRoomNotFoundError(f"Room {cinema_key} not found")
          └ <class 'core.exceptions.CinemaRoomNotFoundError'>

core.exceptions.CinemaRoomNotFoundError: Room 4332b013-a833-4b14-a1e8-d4581bf52208 not found
2022-10-29 at 20:24:46 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-29 at 20:24:46 | INFO | Shutting down
2022-10-29 at 20:24:46 | INFO | Shutting down
2022-10-29 at 20:24:47 | INFO | Waiting for application shutdown.
2022-10-29 at 20:24:47 | INFO | Waiting for application shutdown.
2022-10-29 at 20:24:47 | INFO | Application shutdown complete.
2022-10-29 at 20:24:47 | INFO | Application shutdown complete.
2022-10-29 at 20:24:47 | INFO | Finished server process [121985]
2022-10-29 at 20:24:47 | INFO | Finished server process [121985]
2022-10-29 at 20:29:18 | WARNING | StatReload detected changes in 'api/exception_handlers.py'. Reloading...
2022-10-29 at 20:29:20 | WARNING | StatReload detected changes in 'api/exception_handlers.py'. Reloading...
2022-10-29 at 20:29:22 | WARNING | StatReload detected changes in 'api/exception_handlers.py'. Reloading...
2022-10-29 at 20:29:43 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-29 at 20:29:44 | INFO | Setup middlewares
2022-10-29 at 20:29:44 | INFO | Setup middlewares
2022-10-29 at 20:29:44 | INFO | Setup middlewares
2022-10-29 at 20:29:44 | INFO | Started server process [123681]
2022-10-29 at 20:29:44 | INFO | Started server process [123681]
2022-10-29 at 20:29:44 | INFO | Waiting for application startup.
2022-10-29 at 20:29:44 | INFO | Waiting for application startup.
2022-10-29 at 20:29:44 | INFO | Redis has been initialize
2022-10-29 at 20:29:44 | INFO | Redis has been initialize
2022-10-29 at 20:29:44 | INFO | Application startup complete.
2022-10-29 at 20:29:44 | INFO | Application startup complete.
2022-10-29 at 20:29:54 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-29 at 20:29:54 | INFO | Shutting down
2022-10-29 at 20:29:54 | INFO | Shutting down
2022-10-29 at 20:29:54 | INFO | Waiting for application shutdown.
2022-10-29 at 20:29:54 | INFO | Waiting for application shutdown.
2022-10-29 at 20:29:54 | INFO | Application shutdown complete.
2022-10-29 at 20:29:54 | INFO | Application shutdown complete.
2022-10-29 at 20:29:54 | INFO | Finished server process [123681]
2022-10-29 at 20:29:54 | INFO | Finished server process [123681]
2022-10-29 at 20:29:55 | INFO | Setup middlewares
2022-10-29 at 20:29:55 | INFO | Setup middlewares
2022-10-29 at 20:29:55 | INFO | Setup middlewares
2022-10-29 at 20:29:55 | INFO | Started server process [123713]
2022-10-29 at 20:29:55 | INFO | Started server process [123713]
2022-10-29 at 20:29:55 | INFO | Waiting for application startup.
2022-10-29 at 20:29:55 | INFO | Waiting for application startup.
2022-10-29 at 20:29:55 | INFO | Redis has been initialize
2022-10-29 at 20:29:55 | INFO | Redis has been initialize
2022-10-29 at 20:29:55 | INFO | Application startup complete.
2022-10-29 at 20:29:55 | INFO | Application startup complete.
2022-10-29 at 20:29:56 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-29 at 20:29:56 | INFO | Shutting down
2022-10-29 at 20:29:56 | INFO | Shutting down
2022-10-29 at 20:29:56 | INFO | Waiting for application shutdown.
2022-10-29 at 20:29:56 | INFO | Waiting for application shutdown.
2022-10-29 at 20:29:56 | INFO | Application shutdown complete.
2022-10-29 at 20:29:56 | INFO | Application shutdown complete.
2022-10-29 at 20:29:56 | INFO | Finished server process [123713]
2022-10-29 at 20:29:56 | INFO | Finished server process [123713]
2022-10-29 at 20:29:58 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-29 at 20:30:05 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-29 at 20:30:18 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-29 at 20:30:25 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-29 at 20:30:37 | WARNING | StatReload detected changes in 'main.py'. Reloading...
2022-10-29 at 20:30:38 | INFO | Setup middlewares
2022-10-29 at 20:30:38 | INFO | Setup middlewares
2022-10-29 at 20:30:38 | INFO | Setup middlewares
2022-10-29 at 20:30:38 | INFO | Started server process [123831]
2022-10-29 at 20:30:38 | INFO | Started server process [123831]
2022-10-29 at 20:30:38 | INFO | Waiting for application startup.
2022-10-29 at 20:30:38 | INFO | Waiting for application startup.
2022-10-29 at 20:30:38 | INFO | Redis has been initialize
2022-10-29 at 20:30:38 | INFO | Redis has been initialize
2022-10-29 at 20:30:38 | INFO | Application startup complete.
2022-10-29 at 20:30:38 | INFO | Application startup complete.
2022-10-29 at 20:30:41 | INFO | 127.0.0.1:52344 - "DELETE /api/v1/cinema-room/4332b013-a833-4b14-a1e8-d4581bf52208 HTTP/1.1" 404
2022-10-29 at 20:30:41 | INFO | 127.0.0.1:52344 - "DELETE /api/v1/cinema-room/4332b013-a833-4b14-a1e8-d4581bf52208 HTTP/1.1" 404
2022-10-29 at 20:31:19 | INFO | Shutting down
2022-10-29 at 20:31:19 | INFO | Shutting down
2022-10-29 at 20:31:19 | INFO | Waiting for application shutdown.
2022-10-29 at 20:31:19 | INFO | Waiting for application shutdown.
2022-10-29 at 20:31:19 | INFO | Application shutdown complete.
2022-10-29 at 20:31:19 | INFO | Application shutdown complete.
2022-10-29 at 20:31:19 | INFO | Finished server process [123831]
2022-10-29 at 20:31:19 | INFO | Finished server process [123831]
2022-10-29 at 20:31:20 | INFO | Stopping reloader process [118822]
2022-10-30 at 00:58:18 | INFO | Setup middlewares
2022-10-30 at 00:58:18 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-30 at 00:58:18 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-30 at 00:58:18 | INFO | Started reloader process [14836] using StatReload
2022-10-30 at 00:58:18 | INFO | Setup middlewares
2022-10-30 at 00:58:18 | INFO | Setup middlewares
2022-10-30 at 00:58:18 | INFO | Setup middlewares
2022-10-30 at 00:58:18 | INFO | Started server process [14838]
2022-10-30 at 00:58:18 | INFO | Started server process [14838]
2022-10-30 at 00:58:18 | INFO | Waiting for application startup.
2022-10-30 at 00:58:18 | INFO | Waiting for application startup.
2022-10-30 at 00:58:18 | INFO | Redis has been initialize
2022-10-30 at 00:58:18 | INFO | Redis has been initialize
2022-10-30 at 00:58:18 | INFO | Application startup complete.
2022-10-30 at 00:58:18 | INFO | Application startup complete.
2022-10-30 at 00:58:28 | INFO | Shutting down
2022-10-30 at 00:58:28 | INFO | Shutting down
2022-10-30 at 00:58:28 | INFO | Waiting for application shutdown.
2022-10-30 at 00:58:28 | INFO | Waiting for application shutdown.
2022-10-30 at 00:58:28 | INFO | Application shutdown complete.
2022-10-30 at 00:58:28 | INFO | Application shutdown complete.
2022-10-30 at 00:58:28 | INFO | Finished server process [14838]
2022-10-30 at 00:58:28 | INFO | Finished server process [14838]
2022-10-30 at 00:58:28 | INFO | Stopping reloader process [14836]
2022-10-30 at 01:00:26 | INFO | Setup middlewares
2022-10-30 at 01:00:26 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-30 at 01:00:26 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-30 at 01:00:26 | INFO | Started reloader process [14869] using StatReload
2022-10-30 at 01:00:26 | INFO | Setup middlewares
2022-10-30 at 01:00:26 | INFO | Setup middlewares
2022-10-30 at 01:00:26 | INFO | Setup middlewares
2022-10-30 at 01:00:26 | INFO | Started server process [14871]
2022-10-30 at 01:00:26 | INFO | Started server process [14871]
2022-10-30 at 01:00:26 | INFO | Waiting for application startup.
2022-10-30 at 01:00:26 | INFO | Waiting for application startup.
2022-10-30 at 01:00:26 | INFO | Redis has been initialize
2022-10-30 at 01:00:26 | INFO | Redis has been initialize
2022-10-30 at 01:00:26 | INFO | Application startup complete.
2022-10-30 at 01:00:26 | INFO | Application startup complete.
2022-10-30 at 01:00:58 | INFO | 127.0.0.1:55090 - "POST /api/v1/cinema-room/create HTTP/1.1" 500
2022-10-30 at 01:00:58 | INFO | 127.0.0.1:55090 - "POST /api/v1/cinema-room/create HTTP/1.1" 500
2022-10-30 at 01:00:58 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 692, in connect
    await self._connect()
          │    └ <function Connection._connect at 0x7fa1c96567a0>
          └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 719, in _connect
    reader, writer = await asyncio.open_connection(
                           │       └ <function open_connection at 0x7fa1ca3935b0>
                           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/streams.py", line 47, in open_connection
    transport, _ = await loop.create_connection(
                         │    └ <method 'create_connection' of 'uvloop.loop.Loop' objects>
                         └ <uvloop.Loop running=True closed=False debug=False>
  File "uvloop/loop.pyx", line 2024, in create_connection
  File "uvloop/loop.pyx", line 2001, in uvloop.loop.Loop.create_connection

ConnectionRefusedError: [Errno 111] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7fa1ca923520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7fa1cab0dfc0>
           └ <SpawnProcess name='SpawnProcess-1' parent=14869 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa1cab0d630>
    └ <SpawnProcess name='SpawnProcess-1' parent=14869 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa1ca968c70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14869 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14869 started>
    │    └ <function subprocess_started at 0x7fa1c9df0280>
    └ <SpawnProcess name='SpawnProcess-1' parent=14869 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa1ca968ca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7fa1c9dcb5b0>
           │       │   └ <uvicorn.server.Server object at 0x7fa1ca968ca0>
           │       └ <function run at 0x7fa1ca382ef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7fa1c8b57370>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa1c8792050>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa1c87920e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa1c874e5f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa1c87340a0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa1c874e5f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa1c8737340>
          └ <fastapi.applications.FastAPI object at 0x7fa1c87340a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa1c8793370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa1c87372e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa1c8737340>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa1c8793370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa1c87372b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa1c87372e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 93, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa1c8793400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa1c8737250>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa1c87372b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa1c8793400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x7fa1c8734ca0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa1c8737250>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa1c8793400>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x7fa1c8acadd0>
          └ <fastapi.routing.APIRoute object at 0x7fa1c87359f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 266, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa1c8793400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x7fa1c8792cb0>
          └ <fastapi.routing.APIRoute object at 0x7fa1c87359f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 65, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa1c87365f0>
                     └ <function get_request_handler.<locals>.app at 0x7fa1c8792c20>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa1c8acba30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'cinema_crud': <crud.cinema_crud.CinemaCRUD object at 0x7fa1c829ea10>, 'current_user_id': '803e9e2e-f82f-43b0-be68-313a8e738...
                 │         └ <function create_cinema_room at 0x7fa1ca30fd90>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa1c8735a20>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room.py", line 37, in create_cinema_room
    cinema_room = await cinema_crud.create_cinema_room(cinema_room_create=cinema_room_create, admin_id=current_user_id)
                        │           │                                     │                            └ '803e9e2e-f82f-43b0-be68-313a8e73830d'
                        │           │                                     └ CinemaRoomCreate(film_view_timestamp=0, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                        │           └ <function CinemaCRUD.create_cinema_room at 0x7fa1ca30dab0>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7fa1c829ea10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/crud/cinema_crud.py", line 17, in create_cinema_room
    cinema_room = await self.cinema_service.create_cinema_room(
                        │    │              └ <function CinemaService.create_cinema_room at 0x7fa1ca13c310>
                        │    └ <service.cinema_service.CinemaService object at 0x7fa1c829ea70>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7fa1c829ea10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 25, in create_cinema_room
    return await super().create_cinema_room(cinema_key, admin_id, cinema_room_data)
                                            │           │         └ CinemaRoomCreate(film_view_timestamp=0, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                                            │           └ '803e9e2e-f82f-43b0-be68-313a8e73830d'
                                            └ '3a5e8c22-0b41-4482-8c94-1f7c1a35b353'

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/base_service.py", line 13, in create_cinema_room
    return await self._create(cinema_key=cinema_key, admin_id=admin_id, cinema_room_data=cinema_room_data)
                 │    │                  │                    │                          └ CinemaRoomCreate(film_view_timestamp=0, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                 │    │                  │                    └ '803e9e2e-f82f-43b0-be68-313a8e73830d'
                 │    │                  └ '3a5e8c22-0b41-4482-8c94-1f7c1a35b353'
                 │    └ <function CinemaService._create at 0x7fa1ca13c0d0>
                 └ <service.cinema_service.CinemaService object at 0x7fa1c829ea70>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 43, in _create
    await self.redis.set(cinema_key, cinema_room_raw)  # type: ignore
          │    │     │   │           └ b'{"film_view_timestamp":0.0,"user_ids":null,"film_id":"d3cd829c-408b-4b14-af5d-dea4cff009e1","admin_id":"803e9e2e-f82f-43b0-...
          │    │     │   └ '3a5e8c22-0b41-4482-8c94-1f7c1a35b353'
          │    │     └ <function Redis.set at 0x7fa1c9484dc0>
          │    └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
          └ <service.cinema_service.CinemaService object at 0x7fa1c829ea70>

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1082, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
           │    │                   │    │              │               └ {}
           │    │                   │    │              └ 'SET'
           │    │                   │    └ <function ConnectionPool.get_connection at 0x7fa1c96577f0>
           │    │                   └ ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>
           │    └ None
           └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 1416, in get_connection
    await connection.connect()
          │          └ <function Connection.connect at 0x7fa1c9656710>
          └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 698, in connect
    raise ConnectionError(self._error_message(e))
          │               │    └ <function Connection._error_message at 0x7fa1c9656830>
          │               └ Connection<host=127.0.0.1,port=6379,db=1>
          └ <class 'aioredis.exceptions.ConnectionError'>

aioredis.exceptions.ConnectionError: Error 111 connecting to 127.0.0.1:6379. 111.
2022-10-30 at 01:00:58 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 692, in connect
    await self._connect()
          │    └ <function Connection._connect at 0x7fa1c96567a0>
          └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 719, in _connect
    reader, writer = await asyncio.open_connection(
                           │       └ <function open_connection at 0x7fa1ca3935b0>
                           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/streams.py", line 47, in open_connection
    transport, _ = await loop.create_connection(
                         │    └ <method 'create_connection' of 'uvloop.loop.Loop' objects>
                         └ <uvloop.Loop running=True closed=False debug=False>
  File "uvloop/loop.pyx", line 2024, in create_connection
  File "uvloop/loop.pyx", line 2001, in uvloop.loop.Loop.create_connection

ConnectionRefusedError: [Errno 111] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7fa1ca923520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7fa1cab0dfc0>
           └ <SpawnProcess name='SpawnProcess-1' parent=14869 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa1cab0d630>
    └ <SpawnProcess name='SpawnProcess-1' parent=14869 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa1ca968c70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14869 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14869 started>
    │    └ <function subprocess_started at 0x7fa1c9df0280>
    └ <SpawnProcess name='SpawnProcess-1' parent=14869 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa1ca968ca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7fa1c9dcb5b0>
           │       │   └ <uvicorn.server.Server object at 0x7fa1ca968ca0>
           │       └ <function run at 0x7fa1ca382ef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7fa1c8b57370>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa1c8792050>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa1c87920e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa1c874e5f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa1c87340a0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa1c874e5f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa1c8737340>
          └ <fastapi.applications.FastAPI object at 0x7fa1c87340a0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa1c8793370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa1c87372e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa1c8737340>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa1c8793370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa1c87372b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa1c87372e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 93, in __call__
    raise exc
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa1c8793400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa1c8737250>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa1c87372b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa1c8793400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x7fa1c8734ca0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa1c8737250>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa1c8793400>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x7fa1c8acadd0>
          └ <fastapi.routing.APIRoute object at 0x7fa1c87359f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 266, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa1c8793400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa1c8b1fb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x7fa1c8792cb0>
          └ <fastapi.routing.APIRoute object at 0x7fa1c87359f0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 65, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa1c87365f0>
                     └ <function get_request_handler.<locals>.app at 0x7fa1c8792c20>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa1c8acba30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'cinema_crud': <crud.cinema_crud.CinemaCRUD object at 0x7fa1c829ea10>, 'current_user_id': '803e9e2e-f82f-43b0-be68-313a8e738...
                 │         └ <function create_cinema_room at 0x7fa1ca30fd90>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa1c8735a20>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room.py", line 37, in create_cinema_room
    cinema_room = await cinema_crud.create_cinema_room(cinema_room_create=cinema_room_create, admin_id=current_user_id)
                        │           │                                     │                            └ '803e9e2e-f82f-43b0-be68-313a8e73830d'
                        │           │                                     └ CinemaRoomCreate(film_view_timestamp=0, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                        │           └ <function CinemaCRUD.create_cinema_room at 0x7fa1ca30dab0>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7fa1c829ea10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/crud/cinema_crud.py", line 17, in create_cinema_room
    cinema_room = await self.cinema_service.create_cinema_room(
                        │    │              └ <function CinemaService.create_cinema_room at 0x7fa1ca13c310>
                        │    └ <service.cinema_service.CinemaService object at 0x7fa1c829ea70>
                        └ <crud.cinema_crud.CinemaCRUD object at 0x7fa1c829ea10>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 25, in create_cinema_room
    return await super().create_cinema_room(cinema_key, admin_id, cinema_room_data)
                                            │           │         └ CinemaRoomCreate(film_view_timestamp=0, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                                            │           └ '803e9e2e-f82f-43b0-be68-313a8e73830d'
                                            └ '3a5e8c22-0b41-4482-8c94-1f7c1a35b353'

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/base_service.py", line 13, in create_cinema_room
    return await self._create(cinema_key=cinema_key, admin_id=admin_id, cinema_room_data=cinema_room_data)
                 │    │                  │                    │                          └ CinemaRoomCreate(film_view_timestamp=0, user_ids=None, film_id='d3cd829c-408b-4b14-af5d-dea4cff009e1')
                 │    │                  │                    └ '803e9e2e-f82f-43b0-be68-313a8e73830d'
                 │    │                  └ '3a5e8c22-0b41-4482-8c94-1f7c1a35b353'
                 │    └ <function CinemaService._create at 0x7fa1ca13c0d0>
                 └ <service.cinema_service.CinemaService object at 0x7fa1c829ea70>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/service/cinema_service.py", line 43, in _create
    await self.redis.set(cinema_key, cinema_room_raw)  # type: ignore
          │    │     │   │           └ b'{"film_view_timestamp":0.0,"user_ids":null,"film_id":"d3cd829c-408b-4b14-af5d-dea4cff009e1","admin_id":"803e9e2e-f82f-43b0-...
          │    │     │   └ '3a5e8c22-0b41-4482-8c94-1f7c1a35b353'
          │    │     └ <function Redis.set at 0x7fa1c9484dc0>
          │    └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
          └ <service.cinema_service.CinemaService object at 0x7fa1c829ea70>

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1082, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
           │    │                   │    │              │               └ {}
           │    │                   │    │              └ 'SET'
           │    │                   │    └ <function ConnectionPool.get_connection at 0x7fa1c96577f0>
           │    │                   └ ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>
           │    └ None
           └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 1416, in get_connection
    await connection.connect()
          │          └ <function Connection.connect at 0x7fa1c9656710>
          └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 698, in connect
    raise ConnectionError(self._error_message(e))
          │               │    └ <function Connection._error_message at 0x7fa1c9656830>
          │               └ Connection<host=127.0.0.1,port=6379,db=1>
          └ <class 'aioredis.exceptions.ConnectionError'>

aioredis.exceptions.ConnectionError: Error 111 connecting to 127.0.0.1:6379. 111.
2022-10-30 at 01:01:06 | INFO | Shutting down
2022-10-30 at 01:01:06 | INFO | Shutting down
2022-10-30 at 01:01:06 | INFO | Waiting for application shutdown.
2022-10-30 at 01:01:06 | INFO | Waiting for application shutdown.
2022-10-30 at 01:01:06 | INFO | Application shutdown complete.
2022-10-30 at 01:01:06 | INFO | Application shutdown complete.
2022-10-30 at 01:01:06 | INFO | Finished server process [14871]
2022-10-30 at 01:01:06 | INFO | Finished server process [14871]
2022-10-30 at 01:01:06 | INFO | Stopping reloader process [14869]
2022-10-30 at 01:01:23 | INFO | Setup middlewares
2022-10-30 at 01:01:23 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-30 at 01:01:23 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-30 at 01:01:23 | INFO | Started reloader process [15432] using StatReload
2022-10-30 at 01:01:23 | INFO | Setup middlewares
2022-10-30 at 01:01:23 | INFO | Setup middlewares
2022-10-30 at 01:01:23 | INFO | Setup middlewares
2022-10-30 at 01:01:23 | INFO | Started server process [15434]
2022-10-30 at 01:01:23 | INFO | Started server process [15434]
2022-10-30 at 01:01:23 | INFO | Waiting for application startup.
2022-10-30 at 01:01:23 | INFO | Waiting for application startup.
2022-10-30 at 01:01:23 | INFO | Redis has been initialize
2022-10-30 at 01:01:23 | INFO | Redis has been initialize
2022-10-30 at 01:01:23 | INFO | Application startup complete.
2022-10-30 at 01:01:23 | INFO | Application startup complete.
2022-10-30 at 01:01:26 | INFO | 127.0.0.1:58912 - "POST /api/v1/cinema-room/create HTTP/1.1" 200
2022-10-30 at 01:01:26 | INFO | 127.0.0.1:58912 - "POST /api/v1/cinema-room/create HTTP/1.1" 200
2022-10-30 at 01:10:04 | WARNING | Unsupported upgrade request.
2022-10-30 at 01:10:04 | WARNING | Unsupported upgrade request.
2022-10-30 at 01:10:04 | WARNING | No supported WebSocket library detected. Please use 'pip install uvicorn[standard]', or install 'websockets' or 'wsproto' manually.
2022-10-30 at 01:10:04 | WARNING | No supported WebSocket library detected. Please use 'pip install uvicorn[standard]', or install 'websockets' or 'wsproto' manually.
2022-10-30 at 01:10:29 | INFO | Shutting down
2022-10-30 at 01:10:29 | INFO | Shutting down
2022-10-30 at 01:10:29 | INFO | Waiting for application shutdown.
2022-10-30 at 01:10:29 | INFO | Waiting for application shutdown.
2022-10-30 at 01:10:29 | INFO | Application shutdown complete.
2022-10-30 at 01:10:29 | INFO | Application shutdown complete.
2022-10-30 at 01:10:29 | INFO | Finished server process [15434]
2022-10-30 at 01:10:29 | INFO | Finished server process [15434]
2022-10-30 at 01:10:29 | INFO | Stopping reloader process [15432]
2022-10-30 at 01:11:22 | INFO | Setup middlewares
2022-10-30 at 01:11:22 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-30 at 01:11:22 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-30 at 01:11:22 | INFO | Started reloader process [17278] using StatReload
2022-10-30 at 01:11:23 | INFO | Setup middlewares
2022-10-30 at 01:11:23 | INFO | Setup middlewares
2022-10-30 at 01:11:23 | INFO | Setup middlewares
2022-10-30 at 01:11:23 | INFO | Started server process [17280]
2022-10-30 at 01:11:23 | INFO | Started server process [17280]
2022-10-30 at 01:11:23 | INFO | Waiting for application startup.
2022-10-30 at 01:11:23 | INFO | Waiting for application startup.
2022-10-30 at 01:11:23 | INFO | Redis has been initialize
2022-10-30 at 01:11:23 | INFO | Redis has been initialize
2022-10-30 at 01:11:23 | INFO | Application startup complete.
2022-10-30 at 01:11:23 | INFO | Application startup complete.
2022-10-30 at 01:11:27 | INFO | ('127.0.0.1', 36974) - "WebSocket /messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" 403
2022-10-30 at 01:11:27 | INFO | ('127.0.0.1', 36974) - "WebSocket /messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" 403
2022-10-30 at 01:11:27 | INFO | connection failed (403 Forbidden)
2022-10-30 at 01:11:27 | INFO | connection failed (403 Forbidden)
2022-10-30 at 01:11:27 | INFO | connection closed
2022-10-30 at 01:11:27 | INFO | connection closed
2022-10-30 at 01:13:23 | INFO | ('127.0.0.1', 40384) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:13:23 | INFO | ('127.0.0.1', 40384) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:13:23 | INFO | connection open
2022-10-30 at 01:13:23 | INFO | connection open
2022-10-30 at 01:13:23 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f491538b520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f4915571fc0>
           └ <SpawnProcess name='SpawnProcess-1' parent=17278 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4915571630>
    └ <SpawnProcess name='SpawnProcess-1' parent=17278 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f49153d0c70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=17278 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=17278 started>
    │    └ <function subprocess_started at 0x7f4914858280>
    └ <SpawnProcess name='SpawnProcess-1' parent=17278 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f49153d0ca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7f49148335b0>
           │       │   └ <uvicorn.server.Server object at 0x7f49153d0ca0>
           │       └ <function run at 0x7f4914deaef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f49135cb370>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7f4912d1a050>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49131a5d20>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7f4912d1a0e0>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49131a5d20>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49131a5d20>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f491324a0b0>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49131a5d20>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7f49131ab250>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f491324a0b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f49131a8ca0>
          └ <fastapi.applications.FastAPI object at 0x7f49131ab250>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f49131a8c10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f49131a8ca0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f49131a8be0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f49131a8c10>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f49131a85e0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f49131a8be0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7f49131ab2e0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f49131a85e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7f491353f0a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f49131a91e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7f4912d1b010>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f49131a91e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7f49131a5e10>
          └ <function get_websocket_app.<locals>.app at 0x7f4912d1af80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'cinema_room_id': '4f25cb30-fff6-4389-bfd9-a241a8e99b53', 'websocket': <starlette.websockets.WebSocket object at 0x7f49131a5...
          │         └ <function cinema_room_ws_messages at 0x7f4913157400>
          └ <fastapi.dependencies.models.Dependant object at 0x7f49131a9180>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 81, in cinema_room_ws_messages
    await redis_connector(websocket=websocket, cinema_room_chanel_name=cinema_room_chanel_name)
          │                         │                                  └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
          │                         └ <starlette.websockets.WebSocket object at 0x7f49131a5e10>
          └ <function redis_connector at 0x7f4913155d80>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 73, in redis_connector
    await consumer_handler(websocket=websocket)
          │                          └ <starlette.websockets.WebSocket object at 0x7f49131a5e10>
          └ <function redis_connector.<locals>.consumer_handler at 0x7f4912d1b490>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 55, in consumer_handler
    subs = dict(await pub.pubsub_numsub(cinema_room_chanel_name))
                      │                 └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
                      └ Depends(get_redis_client)

AttributeError: 'Depends' object has no attribute 'pubsub_numsub'
2022-10-30 at 01:13:23 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f491538b520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f4915571fc0>
           └ <SpawnProcess name='SpawnProcess-1' parent=17278 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4915571630>
    └ <SpawnProcess name='SpawnProcess-1' parent=17278 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f49153d0c70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=17278 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=17278 started>
    │    └ <function subprocess_started at 0x7f4914858280>
    └ <SpawnProcess name='SpawnProcess-1' parent=17278 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f49153d0ca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7f49148335b0>
           │       │   └ <uvicorn.server.Server object at 0x7f49153d0ca0>
           │       └ <function run at 0x7f4914deaef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f49135cb370>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7f4912d1a050>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49131a5d20>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7f4912d1a0e0>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49131a5d20>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49131a5d20>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f491324a0b0>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49131a5d20>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7f49131ab250>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f491324a0b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f49131a8ca0>
          └ <fastapi.applications.FastAPI object at 0x7f49131ab250>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f49131a8c10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f49131a8ca0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f49131a8be0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f49131a8c10>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f49131a85e0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f49131a8be0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7f49131ab2e0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f49131a85e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7f491353f0a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f49131a91e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f49...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7f4912d1b010>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f49131a91e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7f49131a5e10>
          └ <function get_websocket_app.<locals>.app at 0x7f4912d1af80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'cinema_room_id': '4f25cb30-fff6-4389-bfd9-a241a8e99b53', 'websocket': <starlette.websockets.WebSocket object at 0x7f49131a5...
          │         └ <function cinema_room_ws_messages at 0x7f4913157400>
          └ <fastapi.dependencies.models.Dependant object at 0x7f49131a9180>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 81, in cinema_room_ws_messages
    await redis_connector(websocket=websocket, cinema_room_chanel_name=cinema_room_chanel_name)
          │                         │                                  └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
          │                         └ <starlette.websockets.WebSocket object at 0x7f49131a5e10>
          └ <function redis_connector at 0x7f4913155d80>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 73, in redis_connector
    await consumer_handler(websocket=websocket)
          │                          └ <starlette.websockets.WebSocket object at 0x7f49131a5e10>
          └ <function redis_connector.<locals>.consumer_handler at 0x7f4912d1b490>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 55, in consumer_handler
    subs = dict(await pub.pubsub_numsub(cinema_room_chanel_name))
                      │                 └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
                      └ Depends(get_redis_client)

AttributeError: 'Depends' object has no attribute 'pubsub_numsub'
2022-10-30 at 01:13:23 | INFO | connection closed
2022-10-30 at 01:13:23 | INFO | connection closed
2022-10-30 at 01:13:49 | INFO | Shutting down
2022-10-30 at 01:13:49 | INFO | Shutting down
2022-10-30 at 01:13:49 | INFO | Waiting for application shutdown.
2022-10-30 at 01:13:49 | INFO | Waiting for application shutdown.
2022-10-30 at 01:13:49 | INFO | Application shutdown complete.
2022-10-30 at 01:13:49 | INFO | Application shutdown complete.
2022-10-30 at 01:13:49 | INFO | Finished server process [17280]
2022-10-30 at 01:13:49 | INFO | Finished server process [17280]
2022-10-30 at 01:13:49 | INFO | Stopping reloader process [17278]
2022-10-30 at 01:19:31 | INFO | Setup middlewares
2022-10-30 at 01:19:31 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-30 at 01:19:31 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-30 at 01:19:31 | INFO | Started reloader process [18423] using StatReload
2022-10-30 at 01:19:31 | INFO | Setup middlewares
2022-10-30 at 01:19:31 | INFO | Setup middlewares
2022-10-30 at 01:19:31 | INFO | Setup middlewares
2022-10-30 at 01:19:31 | INFO | Started server process [18425]
2022-10-30 at 01:19:31 | INFO | Started server process [18425]
2022-10-30 at 01:19:31 | INFO | Waiting for application startup.
2022-10-30 at 01:19:31 | INFO | Waiting for application startup.
2022-10-30 at 01:19:31 | INFO | Redis has been initialize
2022-10-30 at 01:19:31 | INFO | Redis has been initialize
2022-10-30 at 01:19:31 | INFO | Application startup complete.
2022-10-30 at 01:19:31 | INFO | Application startup complete.
2022-10-30 at 01:19:39 | INFO | ('127.0.0.1', 54314) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:19:39 | INFO | ('127.0.0.1', 54314) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:19:39 | INFO | connection open
2022-10-30 at 01:19:39 | INFO | connection open
2022-10-30 at 01:19:39 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f9361cf7520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f9361eddfc0>
           └ <SpawnProcess name='SpawnProcess-1' parent=18423 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9361edd630>
    └ <SpawnProcess name='SpawnProcess-1' parent=18423 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f9361d3cc70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=18423 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=18423 started>
    │    └ <function subprocess_started at 0x7f93611c8280>
    └ <SpawnProcess name='SpawnProcess-1' parent=18423 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9361d3cca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7f93611a75b0>
           │       │   └ <uvicorn.server.Server object at 0x7f9361d3cca0>
           │       └ <function run at 0x7f9361756ef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f935ff3f300>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7f935f68e050>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f935fb18ee0>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7f935f68e0e0>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f935fb18ee0>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f935fb18ee0>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f935fbc20b0>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f935fb18ee0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7f935fb1f250>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f935fbc20b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f935fb1cca0>
          └ <fastapi.applications.FastAPI object at 0x7f935fb1f250>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f935fb1cc10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f935fb1cca0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f935fb1cbe0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f935fb1cc10>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f935fb1c5e0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f935fb1cbe0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7f935fb1f2e0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f935fb1c5e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7f935feb30a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f935fb1d1e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7f935f68f010>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f935fb1d1e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7f935fb1fcd0>
          └ <function get_websocket_app.<locals>.app at 0x7f935f68ef80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'cinema_room_id': '4f25cb30-fff6-4389-bfd9-a241a8e99b53', 'websocket': <starlette.websockets.WebSocket object at 0x7f935fb1f...
          │         └ <function cinema_room_ws_messages at 0x7f935facb400>
          └ <fastapi.dependencies.models.Dependant object at 0x7f935fb1d180>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 82, in cinema_room_ws_messages
    await redis_connector(websocket, cinema_room_chanel_name)
          │               │          └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
          │               └ <starlette.websockets.WebSocket object at 0x7f935fb1fcd0>
          └ <function redis_connector at 0x7f935fac9d80>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 74, in redis_connector
    await consumer_handler(websocket=websocket)
          │                          └ <starlette.websockets.WebSocket object at 0x7f935fb1fcd0>
          └ <function redis_connector.<locals>.consumer_handler at 0x7f935f68f5b0>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 56, in consumer_handler
    subs = dict(await pub.pubsub_numsub(cinema_room_chanel_name))
                      │                 └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
                      └ Depends(get_redis_client)

AttributeError: 'Depends' object has no attribute 'pubsub_numsub'
2022-10-30 at 01:19:39 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f9361cf7520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f9361eddfc0>
           └ <SpawnProcess name='SpawnProcess-1' parent=18423 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9361edd630>
    └ <SpawnProcess name='SpawnProcess-1' parent=18423 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f9361d3cc70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=18423 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=18423 started>
    │    └ <function subprocess_started at 0x7f93611c8280>
    └ <SpawnProcess name='SpawnProcess-1' parent=18423 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9361d3cca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7f93611a75b0>
           │       │   └ <uvicorn.server.Server object at 0x7f9361d3cca0>
           │       └ <function run at 0x7f9361756ef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f935ff3f300>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7f935f68e050>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f935fb18ee0>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7f935f68e0e0>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f935fb18ee0>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f935fb18ee0>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f935fbc20b0>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f935fb18ee0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7f935fb1f250>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f935fbc20b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f935fb1cca0>
          └ <fastapi.applications.FastAPI object at 0x7f935fb1f250>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f935fb1cc10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f935fb1cca0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f935fb1cbe0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f935fb1cc10>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f935fb1c5e0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f935fb1cbe0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7f935fb1f2e0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f935fb1c5e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7f935feb30a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f935fb1d1e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f93...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7f935f68f010>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f935fb1d1e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7f935fb1fcd0>
          └ <function get_websocket_app.<locals>.app at 0x7f935f68ef80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'cinema_room_id': '4f25cb30-fff6-4389-bfd9-a241a8e99b53', 'websocket': <starlette.websockets.WebSocket object at 0x7f935fb1f...
          │         └ <function cinema_room_ws_messages at 0x7f935facb400>
          └ <fastapi.dependencies.models.Dependant object at 0x7f935fb1d180>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 82, in cinema_room_ws_messages
    await redis_connector(websocket, cinema_room_chanel_name)
          │               │          └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
          │               └ <starlette.websockets.WebSocket object at 0x7f935fb1fcd0>
          └ <function redis_connector at 0x7f935fac9d80>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 74, in redis_connector
    await consumer_handler(websocket=websocket)
          │                          └ <starlette.websockets.WebSocket object at 0x7f935fb1fcd0>
          └ <function redis_connector.<locals>.consumer_handler at 0x7f935f68f5b0>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 56, in consumer_handler
    subs = dict(await pub.pubsub_numsub(cinema_room_chanel_name))
                      │                 └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
                      └ Depends(get_redis_client)

AttributeError: 'Depends' object has no attribute 'pubsub_numsub'
2022-10-30 at 01:19:39 | INFO | connection closed
2022-10-30 at 01:19:39 | INFO | connection closed
2022-10-30 at 01:20:08 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:20:08 | INFO | Shutting down
2022-10-30 at 01:20:08 | INFO | Shutting down
2022-10-30 at 01:20:08 | INFO | Waiting for application shutdown.
2022-10-30 at 01:20:08 | INFO | Waiting for application shutdown.
2022-10-30 at 01:20:08 | INFO | Application shutdown complete.
2022-10-30 at 01:20:08 | INFO | Application shutdown complete.
2022-10-30 at 01:20:08 | INFO | Finished server process [18425]
2022-10-30 at 01:20:08 | INFO | Finished server process [18425]
2022-10-30 at 01:20:09 | INFO | Setup middlewares
2022-10-30 at 01:20:09 | INFO | Setup middlewares
2022-10-30 at 01:20:09 | INFO | Setup middlewares
2022-10-30 at 01:20:09 | INFO | Started server process [18531]
2022-10-30 at 01:20:09 | INFO | Started server process [18531]
2022-10-30 at 01:20:09 | INFO | Waiting for application startup.
2022-10-30 at 01:20:09 | INFO | Waiting for application startup.
2022-10-30 at 01:20:09 | INFO | Redis has been initialize
2022-10-30 at 01:20:09 | INFO | Redis has been initialize
2022-10-30 at 01:20:09 | INFO | Application startup complete.
2022-10-30 at 01:20:09 | INFO | Application startup complete.
2022-10-30 at 01:21:17 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:21:17 | INFO | Shutting down
2022-10-30 at 01:21:17 | INFO | Shutting down
2022-10-30 at 01:21:17 | INFO | Waiting for application shutdown.
2022-10-30 at 01:21:17 | INFO | Waiting for application shutdown.
2022-10-30 at 01:21:17 | INFO | Application shutdown complete.
2022-10-30 at 01:21:17 | INFO | Application shutdown complete.
2022-10-30 at 01:21:17 | INFO | Finished server process [18531]
2022-10-30 at 01:21:17 | INFO | Finished server process [18531]
2022-10-30 at 01:21:19 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:21:20 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:21:24 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:21:28 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:21:29 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:21:34 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:21:36 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:21:41 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:21:41 | INFO | Setup middlewares
2022-10-30 at 01:21:41 | INFO | Setup middlewares
2022-10-30 at 01:21:41 | INFO | Setup middlewares
2022-10-30 at 01:21:41 | INFO | Started server process [18790]
2022-10-30 at 01:21:41 | INFO | Started server process [18790]
2022-10-30 at 01:21:41 | INFO | Waiting for application startup.
2022-10-30 at 01:21:41 | INFO | Waiting for application startup.
2022-10-30 at 01:21:41 | INFO | Redis has been initialize
2022-10-30 at 01:21:41 | INFO | Redis has been initialize
2022-10-30 at 01:21:41 | INFO | Application startup complete.
2022-10-30 at 01:21:41 | INFO | Application startup complete.
2022-10-30 at 01:21:51 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:21:51 | INFO | Shutting down
2022-10-30 at 01:21:51 | INFO | Shutting down
2022-10-30 at 01:21:51 | INFO | Waiting for application shutdown.
2022-10-30 at 01:21:51 | INFO | Waiting for application shutdown.
2022-10-30 at 01:21:51 | INFO | Application shutdown complete.
2022-10-30 at 01:21:51 | INFO | Application shutdown complete.
2022-10-30 at 01:21:51 | INFO | Finished server process [18790]
2022-10-30 at 01:21:51 | INFO | Finished server process [18790]
2022-10-30 at 01:21:52 | INFO | Setup middlewares
2022-10-30 at 01:21:52 | INFO | Setup middlewares
2022-10-30 at 01:21:52 | INFO | Setup middlewares
2022-10-30 at 01:21:52 | INFO | Started server process [18819]
2022-10-30 at 01:21:52 | INFO | Started server process [18819]
2022-10-30 at 01:21:52 | INFO | Waiting for application startup.
2022-10-30 at 01:21:52 | INFO | Waiting for application startup.
2022-10-30 at 01:21:52 | INFO | Redis has been initialize
2022-10-30 at 01:21:52 | INFO | Redis has been initialize
2022-10-30 at 01:21:52 | INFO | Application startup complete.
2022-10-30 at 01:21:52 | INFO | Application startup complete.
2022-10-30 at 01:22:12 | INFO | ('127.0.0.1', 52278) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:22:12 | INFO | ('127.0.0.1', 52278) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:22:12 | INFO | connection open
2022-10-30 at 01:22:12 | INFO | connection open
2022-10-30 at 01:22:12 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7fdbfa773520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7fdbfa95dfc0>
           └ <SpawnProcess name='SpawnProcess-12' parent=18423 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fdbfa95d630>
    └ <SpawnProcess name='SpawnProcess-12' parent=18423 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fdbfa7b8c70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-12' parent=18423 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-12' parent=18423 started>
    │    └ <function subprocess_started at 0x7fdbf9c3c280>
    └ <SpawnProcess name='SpawnProcess-12' parent=18423 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fdbfa7b8ca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7fdbf9c175b0>
           │       │   └ <uvicorn.server.Server object at 0x7fdbfa7b8ca0>
           │       └ <function run at 0x7fdbfa1caef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7fdbf89b7370>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7fdbf8106050>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdbf8590eb0>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7fdbf81060e0>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdbf8590eb0>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdbf8590eb0>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdbf8636080>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdbf8590eb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7fdbf8597280>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdbf8636080>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdbf8594c70>
          └ <fastapi.applications.FastAPI object at 0x7fdbf8597280>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdbf8594be0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdbf8594c70>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdbf8594bb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdbf8594be0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdbf85945b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdbf8594bb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7fdbf8597310>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdbf85945b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7fdbf892b0a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7fdbf85951b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7fdbf8107010>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7fdbf85951b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7fdbf8597d00>
          └ <function get_websocket_app.<locals>.app at 0x7fdbf8106f80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'cinema_room_id': '4f25cb30-fff6-4389-bfd9-a241a8e99b53', 'websocket': <starlette.websockets.WebSocket object at 0x7fdbf8597...
          │         └ <function cinema_room_ws_messages at 0x7fdbf8543400>
          └ <fastapi.dependencies.models.Dependant object at 0x7fdbf8595150>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 81, in cinema_room_ws_messages
    await redis_connector(websocket, cinema_room_chanel_name)
          │               │          └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
          │               └ <starlette.websockets.WebSocket object at 0x7fdbf8597d00>
          └ <function redis_connector at 0x7fdbf8541d80>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 73, in redis_connector
    await consumer_handler(websocket=websocket)
          │                          └ <starlette.websockets.WebSocket object at 0x7fdbf8597d00>
          └ <function redis_connector.<locals>.consumer_handler at 0x7fdbf81075b0>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 55, in consumer_handler
    subs = dict(await pub.pubsub_numsub(cinema_room_chanel_name))
                      │                 └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
                      └ Depends(get_redis_client)

AttributeError: 'Depends' object has no attribute 'pubsub_numsub'
2022-10-30 at 01:22:12 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7fdbfa773520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7fdbfa95dfc0>
           └ <SpawnProcess name='SpawnProcess-12' parent=18423 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fdbfa95d630>
    └ <SpawnProcess name='SpawnProcess-12' parent=18423 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fdbfa7b8c70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-12' parent=18423 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-12' parent=18423 started>
    │    └ <function subprocess_started at 0x7fdbf9c3c280>
    └ <SpawnProcess name='SpawnProcess-12' parent=18423 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fdbfa7b8ca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x7fdbf9c175b0>
           │       │   └ <uvicorn.server.Server object at 0x7fdbfa7b8ca0>
           │       └ <function run at 0x7fdbfa1caef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7fdbf89b7370>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7fdbf8106050>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdbf8590eb0>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7fdbf81060e0>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdbf8590eb0>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdbf8590eb0>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdbf8636080>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdbf8590eb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7fdbf8597280>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdbf8636080>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdbf8594c70>
          └ <fastapi.applications.FastAPI object at 0x7fdbf8597280>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdbf8594be0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdbf8594c70>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdbf8594bb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdbf8594be0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdbf85945b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdbf8594bb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7fdbf8597310>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdbf85945b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7fdbf892b0a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7fdbf85951b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7fdb...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7fdbf8107010>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7fdbf85951b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7fdbf8597d00>
          └ <function get_websocket_app.<locals>.app at 0x7fdbf8106f80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'cinema_room_id': '4f25cb30-fff6-4389-bfd9-a241a8e99b53', 'websocket': <starlette.websockets.WebSocket object at 0x7fdbf8597...
          │         └ <function cinema_room_ws_messages at 0x7fdbf8543400>
          └ <fastapi.dependencies.models.Dependant object at 0x7fdbf8595150>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 81, in cinema_room_ws_messages
    await redis_connector(websocket, cinema_room_chanel_name)
          │               │          └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
          │               └ <starlette.websockets.WebSocket object at 0x7fdbf8597d00>
          └ <function redis_connector at 0x7fdbf8541d80>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 73, in redis_connector
    await consumer_handler(websocket=websocket)
          │                          └ <starlette.websockets.WebSocket object at 0x7fdbf8597d00>
          └ <function redis_connector.<locals>.consumer_handler at 0x7fdbf81075b0>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 55, in consumer_handler
    subs = dict(await pub.pubsub_numsub(cinema_room_chanel_name))
                      │                 └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
                      └ Depends(get_redis_client)

AttributeError: 'Depends' object has no attribute 'pubsub_numsub'
2022-10-30 at 01:22:12 | INFO | connection closed
2022-10-30 at 01:22:12 | INFO | connection closed
2022-10-30 at 01:24:04 | INFO | 127.0.0.1:52710 - "GET /api/v1/cinema-room/4f25cb30-fff6-4389-bfd9-a241a8e99b53 HTTP/1.1" 200
2022-10-30 at 01:24:04 | INFO | 127.0.0.1:52710 - "GET /api/v1/cinema-room/4f25cb30-fff6-4389-bfd9-a241a8e99b53 HTTP/1.1" 200
2022-10-30 at 01:24:10 | INFO | 127.0.0.1:52712 - "POST /api/v1/cinema-room/create HTTP/1.1" 200
2022-10-30 at 01:24:10 | INFO | 127.0.0.1:52712 - "POST /api/v1/cinema-room/create HTTP/1.1" 200
2022-10-30 at 01:25:18 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-30 at 01:25:18 | INFO | Shutting down
2022-10-30 at 01:25:18 | INFO | Shutting down
2022-10-30 at 01:25:18 | INFO | Waiting for application shutdown.
2022-10-30 at 01:25:18 | INFO | Waiting for application shutdown.
2022-10-30 at 01:25:18 | INFO | Application shutdown complete.
2022-10-30 at 01:25:18 | INFO | Application shutdown complete.
2022-10-30 at 01:25:18 | INFO | Finished server process [18819]
2022-10-30 at 01:25:18 | INFO | Finished server process [18819]
2022-10-30 at 01:25:19 | INFO | Setup middlewares
2022-10-30 at 01:25:19 | INFO | Setup middlewares
2022-10-30 at 01:25:19 | INFO | Setup middlewares
2022-10-30 at 01:25:19 | INFO | Started server process [19379]
2022-10-30 at 01:25:19 | INFO | Started server process [19379]
2022-10-30 at 01:25:19 | INFO | Waiting for application startup.
2022-10-30 at 01:25:19 | INFO | Waiting for application startup.
2022-10-30 at 01:25:19 | INFO | Redis has been initialize
2022-10-30 at 01:25:19 | INFO | Redis has been initialize
2022-10-30 at 01:25:19 | INFO | Application startup complete.
2022-10-30 at 01:25:19 | INFO | Application startup complete.
2022-10-30 at 01:25:27 | INFO | Shutting down
2022-10-30 at 01:25:27 | INFO | Shutting down
2022-10-30 at 01:25:27 | INFO | Waiting for application shutdown.
2022-10-30 at 01:25:27 | INFO | Waiting for application shutdown.
2022-10-30 at 01:25:27 | INFO | Application shutdown complete.
2022-10-30 at 01:25:27 | INFO | Application shutdown complete.
2022-10-30 at 01:25:27 | INFO | Finished server process [19379]
2022-10-30 at 01:25:27 | INFO | Finished server process [19379]
2022-10-30 at 01:25:28 | INFO | Stopping reloader process [18423]
2022-10-30 at 01:25:29 | INFO | Setup middlewares
2022-10-30 at 01:25:29 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-30 at 01:25:29 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-30 at 01:25:29 | INFO | Started reloader process [19412] using StatReload
2022-10-30 at 01:25:30 | INFO | Setup middlewares
2022-10-30 at 01:25:30 | INFO | Setup middlewares
2022-10-30 at 01:25:30 | INFO | Setup middlewares
2022-10-30 at 01:25:30 | INFO | Started server process [19414]
2022-10-30 at 01:25:30 | INFO | Started server process [19414]
2022-10-30 at 01:25:30 | INFO | Waiting for application startup.
2022-10-30 at 01:25:30 | INFO | Waiting for application startup.
2022-10-30 at 01:25:30 | INFO | Redis has been initialize
2022-10-30 at 01:25:30 | INFO | Redis has been initialize
2022-10-30 at 01:25:30 | INFO | Application startup complete.
2022-10-30 at 01:25:30 | INFO | Application startup complete.
2022-10-30 at 01:25:42 | INFO | 127.0.0.1:42916 - "GET /api/v1/cinema-room/4f25cb30-fff6-4389-bfd9-a241a8e99b53 HTTP/1.1" 200
2022-10-30 at 01:25:42 | INFO | 127.0.0.1:42916 - "GET /api/v1/cinema-room/4f25cb30-fff6-4389-bfd9-a241a8e99b53 HTTP/1.1" 200
2022-10-30 at 01:25:52 | WARNING | StatReload detected changes in 'service/cinema_service.py'. Reloading...
2022-10-30 at 01:25:52 | INFO | Shutting down
2022-10-30 at 01:25:52 | INFO | Shutting down
2022-10-30 at 01:25:52 | INFO | Waiting for application shutdown.
2022-10-30 at 01:25:52 | INFO | Waiting for application shutdown.
2022-10-30 at 01:25:52 | INFO | Application shutdown complete.
2022-10-30 at 01:25:52 | INFO | Application shutdown complete.
2022-10-30 at 01:25:52 | INFO | Finished server process [19414]
2022-10-30 at 01:25:52 | INFO | Finished server process [19414]
2022-10-30 at 01:25:53 | INFO | Setup middlewares
2022-10-30 at 01:25:53 | INFO | Setup middlewares
2022-10-30 at 01:25:53 | INFO | Setup middlewares
2022-10-30 at 01:25:53 | INFO | Started server process [19472]
2022-10-30 at 01:25:53 | INFO | Started server process [19472]
2022-10-30 at 01:25:53 | INFO | Waiting for application startup.
2022-10-30 at 01:25:53 | INFO | Waiting for application startup.
2022-10-30 at 01:25:53 | INFO | Redis has been initialize
2022-10-30 at 01:25:53 | INFO | Redis has been initialize
2022-10-30 at 01:25:53 | INFO | Application startup complete.
2022-10-30 at 01:25:53 | INFO | Application startup complete.
2022-10-30 at 01:27:07 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:27:07 | INFO | Shutting down
2022-10-30 at 01:27:07 | INFO | Shutting down
2022-10-30 at 01:27:07 | INFO | Waiting for application shutdown.
2022-10-30 at 01:27:07 | INFO | Waiting for application shutdown.
2022-10-30 at 01:27:07 | INFO | Application shutdown complete.
2022-10-30 at 01:27:07 | INFO | Application shutdown complete.
2022-10-30 at 01:27:07 | INFO | Finished server process [19472]
2022-10-30 at 01:27:07 | INFO | Finished server process [19472]
2022-10-30 at 01:27:11 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:27:14 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:27:16 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:27:17 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:27:17 | INFO | Setup middlewares
2022-10-30 at 01:27:17 | INFO | Setup middlewares
2022-10-30 at 01:27:17 | INFO | Setup middlewares
2022-10-30 at 01:27:17 | INFO | Started server process [19670]
2022-10-30 at 01:27:17 | INFO | Started server process [19670]
2022-10-30 at 01:27:17 | INFO | Waiting for application startup.
2022-10-30 at 01:27:17 | INFO | Waiting for application startup.
2022-10-30 at 01:27:17 | INFO | Redis has been initialize
2022-10-30 at 01:27:17 | INFO | Redis has been initialize
2022-10-30 at 01:27:17 | INFO | Application startup complete.
2022-10-30 at 01:27:17 | INFO | Application startup complete.
2022-10-30 at 01:27:26 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:27:26 | INFO | Shutting down
2022-10-30 at 01:27:26 | INFO | Shutting down
2022-10-30 at 01:27:26 | INFO | Waiting for application shutdown.
2022-10-30 at 01:27:26 | INFO | Waiting for application shutdown.
2022-10-30 at 01:27:26 | INFO | Application shutdown complete.
2022-10-30 at 01:27:26 | INFO | Application shutdown complete.
2022-10-30 at 01:27:26 | INFO | Finished server process [19670]
2022-10-30 at 01:27:26 | INFO | Finished server process [19670]
2022-10-30 at 01:27:27 | INFO | Setup middlewares
2022-10-30 at 01:27:27 | INFO | Setup middlewares
2022-10-30 at 01:27:27 | INFO | Setup middlewares
2022-10-30 at 01:27:27 | INFO | Started server process [19698]
2022-10-30 at 01:27:27 | INFO | Started server process [19698]
2022-10-30 at 01:27:27 | INFO | Waiting for application startup.
2022-10-30 at 01:27:27 | INFO | Waiting for application startup.
2022-10-30 at 01:27:27 | INFO | Redis has been initialize
2022-10-30 at 01:27:27 | INFO | Redis has been initialize
2022-10-30 at 01:27:27 | INFO | Application startup complete.
2022-10-30 at 01:27:27 | INFO | Application startup complete.
2022-10-30 at 01:27:32 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:27:32 | INFO | Shutting down
2022-10-30 at 01:27:32 | INFO | Shutting down
2022-10-30 at 01:27:33 | INFO | Waiting for application shutdown.
2022-10-30 at 01:27:33 | INFO | Waiting for application shutdown.
2022-10-30 at 01:27:33 | INFO | Application shutdown complete.
2022-10-30 at 01:27:33 | INFO | Application shutdown complete.
2022-10-30 at 01:27:33 | INFO | Finished server process [19698]
2022-10-30 at 01:27:33 | INFO | Finished server process [19698]
2022-10-30 at 01:27:33 | INFO | Setup middlewares
2022-10-30 at 01:27:33 | INFO | Setup middlewares
2022-10-30 at 01:27:33 | INFO | Setup middlewares
2022-10-30 at 01:27:33 | INFO | Started server process [19725]
2022-10-30 at 01:27:33 | INFO | Started server process [19725]
2022-10-30 at 01:27:33 | INFO | Waiting for application startup.
2022-10-30 at 01:27:33 | INFO | Waiting for application startup.
2022-10-30 at 01:27:33 | INFO | Redis has been initialize
2022-10-30 at 01:27:33 | INFO | Redis has been initialize
2022-10-30 at 01:27:33 | INFO | Application startup complete.
2022-10-30 at 01:27:33 | INFO | Application startup complete.
2022-10-30 at 01:27:45 | INFO | ('127.0.0.1', 56734) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:27:45 | INFO | ('127.0.0.1', 56734) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:27:45 | INFO | connection open
2022-10-30 at 01:27:45 | INFO | connection open
2022-10-30 at 01:28:17 | INFO | ('127.0.0.1', 38016) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:28:17 | INFO | ('127.0.0.1', 38016) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:28:17 | INFO | connection open
2022-10-30 at 01:28:17 | INFO | connection open
2022-10-30 at 01:28:46 | INFO | Shutting down
2022-10-30 at 01:28:46 | INFO | Shutting down
2022-10-30 at 01:28:47 | INFO | Waiting for background tasks to complete. (CTRL+C to force quit)
2022-10-30 at 01:28:47 | INFO | Waiting for background tasks to complete. (CTRL+C to force quit)
2022-10-30 at 01:28:49 | INFO | Finished server process [19725]
2022-10-30 at 01:28:49 | INFO | Finished server process [19725]
2022-10-30 at 01:28:49 | INFO | connection closed
2022-10-30 at 01:28:49 | INFO | connection closed
2022-10-30 at 01:28:49 | INFO | connection closed
2022-10-30 at 01:28:49 | INFO | connection closed
2022-10-30 at 01:28:49 | ERROR | Traceback (most recent call last):
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 638, in lifespan
    await receive()
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/queues.py", line 159, in get
    await getter
asyncio.exceptions.CancelledError

2022-10-30 at 01:28:49 | ERROR | Traceback (most recent call last):
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 638, in lifespan
    await receive()
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/queues.py", line 159, in get
    await getter
asyncio.exceptions.CancelledError

2022-10-30 at 01:33:04 | INFO | Setup middlewares
2022-10-30 at 01:33:04 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-30 at 01:33:04 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-30 at 01:33:04 | INFO | Started reloader process [20548] using StatReload
2022-10-30 at 01:33:04 | INFO | Setup middlewares
2022-10-30 at 01:33:04 | INFO | Setup middlewares
2022-10-30 at 01:33:04 | INFO | Setup middlewares
2022-10-30 at 01:33:04 | INFO | Started server process [20550]
2022-10-30 at 01:33:04 | INFO | Started server process [20550]
2022-10-30 at 01:33:04 | INFO | Waiting for application startup.
2022-10-30 at 01:33:04 | INFO | Waiting for application startup.
2022-10-30 at 01:33:04 | INFO | Redis has been initialize
2022-10-30 at 01:33:04 | INFO | Redis has been initialize
2022-10-30 at 01:33:04 | INFO | Application startup complete.
2022-10-30 at 01:33:04 | INFO | Application startup complete.
2022-10-30 at 01:33:25 | INFO | ('127.0.0.1', 59182) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:33:25 | INFO | ('127.0.0.1', 59182) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:33:25 | INFO | connection open
2022-10-30 at 01:33:25 | INFO | connection open
2022-10-30 at 01:33:31 | INFO | connection closed
2022-10-30 at 01:33:31 | INFO | connection closed
2022-10-30 at 01:34:10 | INFO | Shutting down
2022-10-30 at 01:34:10 | INFO | Shutting down
2022-10-30 at 01:34:10 | INFO | Waiting for application shutdown.
2022-10-30 at 01:34:10 | INFO | Waiting for application shutdown.
2022-10-30 at 01:34:10 | INFO | Application shutdown complete.
2022-10-30 at 01:34:10 | INFO | Application shutdown complete.
2022-10-30 at 01:34:10 | INFO | Finished server process [20550]
2022-10-30 at 01:34:10 | INFO | Finished server process [20550]
2022-10-30 at 01:34:10 | INFO | Stopping reloader process [20548]
2022-10-30 at 01:40:15 | INFO | Setup middlewares
2022-10-30 at 01:40:15 | INFO | Will watch for changes in these directories: ['/home/matvey/yandex_practice/graduate_work/cinema_api']
2022-10-30 at 01:40:15 | INFO | Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2022-10-30 at 01:40:15 | INFO | Started reloader process [21515] using StatReload
2022-10-30 at 01:40:15 | INFO | Setup middlewares
2022-10-30 at 01:40:15 | INFO | Setup middlewares
2022-10-30 at 01:40:15 | INFO | Setup middlewares
2022-10-30 at 01:40:15 | INFO | Started server process [21517]
2022-10-30 at 01:40:15 | INFO | Started server process [21517]
2022-10-30 at 01:40:15 | INFO | Waiting for application startup.
2022-10-30 at 01:40:15 | INFO | Waiting for application startup.
2022-10-30 at 01:40:15 | INFO | Redis has been initialize
2022-10-30 at 01:40:15 | INFO | Redis has been initialize
2022-10-30 at 01:40:15 | INFO | Application startup complete.
2022-10-30 at 01:40:15 | INFO | Application startup complete.
2022-10-30 at 01:40:21 | INFO | ('127.0.0.1', 46286) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:40:21 | INFO | ('127.0.0.1', 46286) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:40:21 | INFO | connection open
2022-10-30 at 01:40:21 | INFO | connection open
2022-10-30 at 01:40:25 | INFO | Break in redis connector
2022-10-30 at 01:40:25 | INFO | Break in redis connector
2022-10-30 at 01:40:25 | INFO | (Reader) STOP
2022-10-30 at 01:40:25 | INFO | (Reader) STOP
2022-10-30 at 01:40:36 | INFO | Break in redis connector
2022-10-30 at 01:40:36 | INFO | Break in redis connector
2022-10-30 at 01:40:36 | INFO | connection closed
2022-10-30 at 01:40:36 | INFO | connection closed
2022-10-30 at 01:41:01 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:41:01 | INFO | Shutting down
2022-10-30 at 01:41:01 | INFO | Shutting down
2022-10-30 at 01:41:01 | INFO | Waiting for application shutdown.
2022-10-30 at 01:41:01 | INFO | Waiting for application shutdown.
2022-10-30 at 01:41:01 | INFO | Application shutdown complete.
2022-10-30 at 01:41:01 | INFO | Application shutdown complete.
2022-10-30 at 01:41:01 | INFO | Finished server process [21517]
2022-10-30 at 01:41:01 | INFO | Finished server process [21517]
2022-10-30 at 01:41:06 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:41:06 | INFO | Setup middlewares
2022-10-30 at 01:41:06 | INFO | Setup middlewares
2022-10-30 at 01:41:06 | INFO | Setup middlewares
2022-10-30 at 01:41:06 | INFO | Started server process [21647]
2022-10-30 at 01:41:06 | INFO | Started server process [21647]
2022-10-30 at 01:41:06 | INFO | Waiting for application startup.
2022-10-30 at 01:41:06 | INFO | Waiting for application startup.
2022-10-30 at 01:41:06 | INFO | Redis has been initialize
2022-10-30 at 01:41:06 | INFO | Redis has been initialize
2022-10-30 at 01:41:06 | INFO | Application startup complete.
2022-10-30 at 01:41:06 | INFO | Application startup complete.
2022-10-30 at 01:41:13 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:41:13 | INFO | Shutting down
2022-10-30 at 01:41:13 | INFO | Shutting down
2022-10-30 at 01:41:13 | INFO | Waiting for application shutdown.
2022-10-30 at 01:41:13 | INFO | Waiting for application shutdown.
2022-10-30 at 01:41:13 | INFO | Application shutdown complete.
2022-10-30 at 01:41:13 | INFO | Application shutdown complete.
2022-10-30 at 01:41:13 | INFO | Finished server process [21647]
2022-10-30 at 01:41:13 | INFO | Finished server process [21647]
2022-10-30 at 01:41:14 | INFO | Setup middlewares
2022-10-30 at 01:41:14 | INFO | Setup middlewares
2022-10-30 at 01:41:14 | INFO | Setup middlewares
2022-10-30 at 01:41:14 | INFO | Started server process [21677]
2022-10-30 at 01:41:14 | INFO | Started server process [21677]
2022-10-30 at 01:41:14 | INFO | Waiting for application startup.
2022-10-30 at 01:41:14 | INFO | Waiting for application startup.
2022-10-30 at 01:41:14 | INFO | Redis has been initialize
2022-10-30 at 01:41:14 | INFO | Redis has been initialize
2022-10-30 at 01:41:14 | INFO | Application startup complete.
2022-10-30 at 01:41:14 | INFO | Application startup complete.
2022-10-30 at 01:41:18 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:41:18 | INFO | Shutting down
2022-10-30 at 01:41:18 | INFO | Shutting down
2022-10-30 at 01:41:18 | INFO | Waiting for application shutdown.
2022-10-30 at 01:41:18 | INFO | Waiting for application shutdown.
2022-10-30 at 01:41:18 | INFO | Application shutdown complete.
2022-10-30 at 01:41:18 | INFO | Application shutdown complete.
2022-10-30 at 01:41:18 | INFO | Finished server process [21677]
2022-10-30 at 01:41:18 | INFO | Finished server process [21677]
2022-10-30 at 01:41:19 | INFO | Setup middlewares
2022-10-30 at 01:41:19 | INFO | Setup middlewares
2022-10-30 at 01:41:19 | INFO | Setup middlewares
2022-10-30 at 01:41:19 | INFO | Started server process [21701]
2022-10-30 at 01:41:19 | INFO | Started server process [21701]
2022-10-30 at 01:41:19 | INFO | Waiting for application startup.
2022-10-30 at 01:41:19 | INFO | Waiting for application startup.
2022-10-30 at 01:41:19 | INFO | Redis has been initialize
2022-10-30 at 01:41:19 | INFO | Redis has been initialize
2022-10-30 at 01:41:19 | INFO | Application startup complete.
2022-10-30 at 01:41:19 | INFO | Application startup complete.
2022-10-30 at 01:41:20 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:41:20 | INFO | Shutting down
2022-10-30 at 01:41:20 | INFO | Shutting down
2022-10-30 at 01:41:20 | INFO | Waiting for application shutdown.
2022-10-30 at 01:41:20 | INFO | Waiting for application shutdown.
2022-10-30 at 01:41:20 | INFO | Application shutdown complete.
2022-10-30 at 01:41:20 | INFO | Application shutdown complete.
2022-10-30 at 01:41:20 | INFO | Finished server process [21701]
2022-10-30 at 01:41:20 | INFO | Finished server process [21701]
2022-10-30 at 01:41:20 | INFO | Setup middlewares
2022-10-30 at 01:41:20 | INFO | Setup middlewares
2022-10-30 at 01:41:20 | INFO | Setup middlewares
2022-10-30 at 01:41:20 | INFO | Started server process [21709]
2022-10-30 at 01:41:20 | INFO | Started server process [21709]
2022-10-30 at 01:41:20 | INFO | Waiting for application startup.
2022-10-30 at 01:41:20 | INFO | Waiting for application startup.
2022-10-30 at 01:41:20 | INFO | Redis has been initialize
2022-10-30 at 01:41:20 | INFO | Redis has been initialize
2022-10-30 at 01:41:20 | INFO | Application startup complete.
2022-10-30 at 01:41:20 | INFO | Application startup complete.
2022-10-30 at 01:41:25 | INFO | ('127.0.0.1', 54938) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:41:25 | INFO | ('127.0.0.1', 54938) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:41:25 | INFO | connection open
2022-10-30 at 01:41:25 | INFO | connection open
2022-10-30 at 01:41:31 | INFO | Break in redis connector
2022-10-30 at 01:41:31 | INFO | Break in redis connector
2022-10-30 at 01:41:31 | INFO | (Reader) STOP
2022-10-30 at 01:41:31 | INFO | (Reader) STOP
2022-10-30 at 01:42:02 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:42:02 | INFO | Shutting down
2022-10-30 at 01:42:02 | INFO | Shutting down
2022-10-30 at 01:42:02 | ERROR | 1006
2022-10-30 at 01:42:02 | ERROR | 1006
2022-10-30 at 01:42:02 | INFO | Break in redis connector
2022-10-30 at 01:42:02 | INFO | Break in redis connector
2022-10-30 at 01:42:02 | INFO | connection closed
2022-10-30 at 01:42:02 | INFO | connection closed
2022-10-30 at 01:42:02 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f37a2923520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f37a2b0dfc0>
           └ <SpawnProcess name='SpawnProcess-6' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f37a2b0d630>
    └ <SpawnProcess name='SpawnProcess-6' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f37a2968c70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=21515 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=21515 started>
    │    └ <function subprocess_started at 0x7f37a1df0280>
    └ <SpawnProcess name='SpawnProcess-6' parent=21515 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f37a2968ca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
           │       │   │    └ <function Server.serve at 0x7f37a1dcb5b0>
           │       │   └ <uvicorn.server.Server object at 0x7f37a2968ca0>
           │       └ <function run at 0x7f37a2382ef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f37a0b57450>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7f37a02a5fc0>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37a0730ee0>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7f37a02a6050>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37a0730ee0>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37a0730ee0>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f37a07d6080>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37a0730ee0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7f37a07372b0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f37a07d6080>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f37a0734c70>
          └ <fastapi.applications.FastAPI object at 0x7f37a07372b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f37a0734be0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f37a0734c70>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f37a0734bb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f37a0734be0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f37a0734b50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f37a0734bb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7f37a0737340>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f37a0734b50>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7f37a0acb0a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f37a0735180>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7f37a02a6f80>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f37a0735180>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7f37a0737d30>
          └ <function get_websocket_app.<locals>.app at 0x7f37a02a6ef0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'redis': Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>, 'cinema_room_id': '4f25cb30-fff6-4389-bfd9-a241a8...
          │         └ <function cinema_room_ws_messages at 0x7f37a0b7f370>
          └ <fastapi.dependencies.models.Dependant object at 0x7f37a0735120>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 91, in cinema_room_ws_messages

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
          │    └ <function WebSocket.send at 0x7f37a0ac83a0>
          └ <starlette.websockets.WebSocket object at 0x7f37a0737d30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
          │    │     └ {'type': 'websocket.close', 'code': 1000, 'reason': ''}
          │    └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          └ <starlette.websockets.WebSocket object at 0x7f37a0737d30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 269, in asgi_send
    raise RuntimeError(msg % message_type)
                       │     └ 'websocket.close'
                       └ "Unexpected ASGI message '%s', after sending 'websocket.close'."

RuntimeError: Unexpected ASGI message 'websocket.close', after sending 'websocket.close'.
2022-10-30 at 01:42:02 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f37a2923520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f37a2b0dfc0>
           └ <SpawnProcess name='SpawnProcess-6' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f37a2b0d630>
    └ <SpawnProcess name='SpawnProcess-6' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f37a2968c70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=21515 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=21515 started>
    │    └ <function subprocess_started at 0x7f37a1df0280>
    └ <SpawnProcess name='SpawnProcess-6' parent=21515 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f37a2968ca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
           │       │   │    └ <function Server.serve at 0x7f37a1dcb5b0>
           │       │   └ <uvicorn.server.Server object at 0x7f37a2968ca0>
           │       └ <function run at 0x7f37a2382ef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f37a0b57450>
           │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7f37a02a5fc0>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37a0730ee0>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7f37a02a6050>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37a0730ee0>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37a0730ee0>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f37a07d6080>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37a0730ee0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7f37a07372b0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f37a07d6080>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f37a0734c70>
          └ <fastapi.applications.FastAPI object at 0x7f37a07372b0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f37a0734be0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f37a0734c70>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f37a0734bb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f37a0734be0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f37a0734b50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f37a0734bb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7f37a0737340>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f37a0734b50>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7f37a0acb0a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f37a0735180>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7f37a02a6f80>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f37a0735180>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7f37a0737d30>
          └ <function get_websocket_app.<locals>.app at 0x7f37a02a6ef0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'redis': Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>, 'cinema_room_id': '4f25cb30-fff6-4389-bfd9-a241a8...
          │         └ <function cinema_room_ws_messages at 0x7f37a0b7f370>
          └ <fastapi.dependencies.models.Dependant object at 0x7f37a0735120>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 91, in cinema_room_ws_messages

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
          │    └ <function WebSocket.send at 0x7f37a0ac83a0>
          └ <starlette.websockets.WebSocket object at 0x7f37a0737d30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
          │    │     └ {'type': 'websocket.close', 'code': 1000, 'reason': ''}
          │    └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f37...
          └ <starlette.websockets.WebSocket object at 0x7f37a0737d30>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 269, in asgi_send
    raise RuntimeError(msg % message_type)
                       │     └ 'websocket.close'
                       └ "Unexpected ASGI message '%s', after sending 'websocket.close'."

RuntimeError: Unexpected ASGI message 'websocket.close', after sending 'websocket.close'.
2022-10-30 at 01:42:02 | INFO | Waiting for application shutdown.
2022-10-30 at 01:42:02 | INFO | Waiting for application shutdown.
2022-10-30 at 01:42:02 | INFO | Application shutdown complete.
2022-10-30 at 01:42:02 | INFO | Application shutdown complete.
2022-10-30 at 01:42:02 | INFO | Finished server process [21709]
2022-10-30 at 01:42:02 | INFO | Finished server process [21709]
2022-10-30 at 01:42:03 | INFO | Setup middlewares
2022-10-30 at 01:42:03 | INFO | Setup middlewares
2022-10-30 at 01:42:03 | INFO | Setup middlewares
2022-10-30 at 01:42:03 | INFO | Started server process [21806]
2022-10-30 at 01:42:03 | INFO | Started server process [21806]
2022-10-30 at 01:42:03 | INFO | Waiting for application startup.
2022-10-30 at 01:42:03 | INFO | Waiting for application startup.
2022-10-30 at 01:42:03 | INFO | Redis has been initialize
2022-10-30 at 01:42:03 | INFO | Redis has been initialize
2022-10-30 at 01:42:03 | INFO | Application startup complete.
2022-10-30 at 01:42:03 | INFO | Application startup complete.
2022-10-30 at 01:42:21 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:42:21 | INFO | Shutting down
2022-10-30 at 01:42:21 | INFO | Shutting down
2022-10-30 at 01:42:21 | INFO | Waiting for application shutdown.
2022-10-30 at 01:42:21 | INFO | Waiting for application shutdown.
2022-10-30 at 01:42:21 | INFO | Application shutdown complete.
2022-10-30 at 01:42:21 | INFO | Application shutdown complete.
2022-10-30 at 01:42:21 | INFO | Finished server process [21806]
2022-10-30 at 01:42:21 | INFO | Finished server process [21806]
2022-10-30 at 01:42:24 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:42:26 | WARNING | StatReload detected changes in 'api/v1/cinema_room_ws.py'. Reloading...
2022-10-30 at 01:42:26 | INFO | Setup middlewares
2022-10-30 at 01:42:26 | INFO | Setup middlewares
2022-10-30 at 01:42:26 | INFO | Setup middlewares
2022-10-30 at 01:42:26 | INFO | Started server process [21867]
2022-10-30 at 01:42:26 | INFO | Started server process [21867]
2022-10-30 at 01:42:26 | INFO | Waiting for application startup.
2022-10-30 at 01:42:26 | INFO | Waiting for application startup.
2022-10-30 at 01:42:26 | INFO | Redis has been initialize
2022-10-30 at 01:42:26 | INFO | Redis has been initialize
2022-10-30 at 01:42:26 | INFO | Application startup complete.
2022-10-30 at 01:42:26 | INFO | Application startup complete.
2022-10-30 at 01:42:31 | INFO | ('127.0.0.1', 34648) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:42:31 | INFO | ('127.0.0.1', 34648) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:42:31 | INFO | connection open
2022-10-30 at 01:42:31 | INFO | connection open
2022-10-30 at 01:43:04 | INFO | ('127.0.0.1', 40618) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:43:04 | INFO | ('127.0.0.1', 40618) - "WebSocket /api/v1/cinema-room/ws/messages/4f25cb30-fff6-4389-bfd9-a241a8e99b53" [accepted]
2022-10-30 at 01:43:04 | INFO | connection open
2022-10-30 at 01:43:04 | INFO | connection open
2022-10-30 at 01:43:26 | INFO | ('127.0.0.1', 39090) - "WebSocket /api/v1/cinema-room/ws/messages/e36a08e7-beae-43c1-8013-9ec4492013d6" [accepted]
2022-10-30 at 01:43:26 | INFO | ('127.0.0.1', 39090) - "WebSocket /api/v1/cinema-room/ws/messages/e36a08e7-beae-43c1-8013-9ec4492013d6" [accepted]
2022-10-30 at 01:43:26 | INFO | connection open
2022-10-30 at 01:43:26 | INFO | connection open
2022-10-30 at 01:43:45 | INFO | ('127.0.0.1', 60116) - "WebSocket /api/v1/cinema-room/ws/messages/e36a08e7-beae-43c1-8013-9ec4492013d6" [accepted]
2022-10-30 at 01:43:45 | INFO | ('127.0.0.1', 60116) - "WebSocket /api/v1/cinema-room/ws/messages/e36a08e7-beae-43c1-8013-9ec4492013d6" [accepted]
2022-10-30 at 01:43:45 | INFO | connection open
2022-10-30 at 01:43:45 | INFO | connection open
2022-10-30 at 01:43:51 | INFO | Close chanel
2022-10-30 at 01:43:51 | INFO | Close chanel
2022-10-30 at 01:43:51 | INFO | (Reader) STOP
2022-10-30 at 01:43:51 | INFO | (Reader) STOP
2022-10-30 at 01:43:51 | INFO | (Reader) STOP
2022-10-30 at 01:43:51 | INFO | (Reader) STOP
2022-10-30 at 01:43:56 | INFO | Close chanel
2022-10-30 at 01:43:56 | INFO | Close chanel
2022-10-30 at 01:43:56 | INFO | (Reader) STOP
2022-10-30 at 01:43:56 | INFO | (Reader) STOP
2022-10-30 at 01:43:56 | INFO | (Reader) STOP
2022-10-30 at 01:43:56 | INFO | (Reader) STOP
2022-10-30 at 01:44:07 | INFO | Close chanel
2022-10-30 at 01:44:07 | INFO | Close chanel
2022-10-30 at 01:44:07 | INFO | connection closed
2022-10-30 at 01:44:07 | INFO | connection closed
2022-10-30 at 01:44:10 | INFO | Close chanel
2022-10-30 at 01:44:10 | INFO | Close chanel
2022-10-30 at 01:44:10 | INFO | connection closed
2022-10-30 at 01:44:10 | INFO | connection closed
2022-10-30 at 01:44:27 | INFO | 127.0.0.1:50502 - "DELETE /api/v1/cinema-room/e36a08e7-beae-43c1-8013-9ec4492013d6 HTTP/1.1" 200
2022-10-30 at 01:44:27 | INFO | 127.0.0.1:50502 - "DELETE /api/v1/cinema-room/e36a08e7-beae-43c1-8013-9ec4492013d6 HTTP/1.1" 200
2022-10-30 at 01:44:46 | INFO | 127.0.0.1:33176 - "DELETE /api/v1/cinema-room/4f25cb30-fff6-4389-bfd9-a241a8e99b53 HTTP/1.1" 200
2022-10-30 at 01:44:46 | INFO | 127.0.0.1:33176 - "DELETE /api/v1/cinema-room/4f25cb30-fff6-4389-bfd9-a241a8e99b53 HTTP/1.1" 200
2022-10-30 at 01:44:50 | INFO | Shutting down
2022-10-30 at 01:44:50 | INFO | Shutting down
2022-10-30 at 01:44:50 | INFO | Waiting for background tasks to complete. (CTRL+C to force quit)
2022-10-30 at 01:44:50 | INFO | Waiting for background tasks to complete. (CTRL+C to force quit)
2022-10-30 at 01:45:36 | INFO | Finished server process [21867]
2022-10-30 at 01:45:36 | INFO | Finished server process [21867]
2022-10-30 at 01:45:36 | ERROR | Traceback (most recent call last):
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 638, in lifespan
    await receive()
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/queues.py", line 159, in get
    await getter
asyncio.exceptions.CancelledError

2022-10-30 at 01:45:36 | ERROR | Traceback (most recent call last):
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 638, in lifespan
    await receive()
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/queues.py", line 159, in get
    await getter
asyncio.exceptions.CancelledError

2022-10-30 at 01:45:36 | INFO | connection closed
2022-10-30 at 01:45:36 | INFO | connection closed
2022-10-30 at 01:45:36 | INFO | connection closed
2022-10-30 at 01:45:36 | INFO | connection closed
2022-10-30 at 01:45:36 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f34dbaf7520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f34dbcddfc0>
           └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f34dbcdd630>
    └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f34dbb3cc70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
    │    └ <function subprocess_started at 0x7f34dafc4280>
    └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f34dbb3cca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
           │       │   │    └ <function Server.serve at 0x7f34daf9f5b0>
           │       │   └ <uvicorn.server.Server object at 0x7f34dbb3cca0>
           │       └ <function run at 0x7f34db556ef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 47, in run
    _cancel_all_tasks(loop)
    │                 └ <uvloop.Loop running=True closed=False debug=False>
    └ <function _cancel_all_tasks at 0x7f34db5665f0>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 63, in _cancel_all_tasks
    loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))
    │    │                  │     │       └ {<Task pending name='Task-22' coro=<WebSocketProtocol.run_asgi() running at /home/matvey/yandex_practice/graduate_work/.venv/...
    │    │                  │     └ <function gather at 0x7f34db554d30>
    │    │                  └ <module 'asyncio.tasks' from '/home/matvey/.python3.10/lib/python3.10/asyncio/tasks.py'>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7f34d948a050>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d9335690>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7f34d948a0e0>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d9335690>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d9335690>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f34d99b6050>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d9335690>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7f34d99172e0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f34d99b6050>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f34d9914c40>
          └ <fastapi.applications.FastAPI object at 0x7f34d99172e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f34d9914bb0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f34d9914c40>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f34d9914b80>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f34d9914bb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f34d9914b20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f34d9914b80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7f34d9917370>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f34d9914b20>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7f34d9cab0a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f34d9915150>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7f34d948b010>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f34d9915150>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7f34d9334b20>
          └ <function get_websocket_app.<locals>.app at 0x7f34d948af80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'redis': Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>, 'cinema_room_id': 'e36a08e7-beae-43c1-8013-9ec449...
          │         └ <function cinema_room_ws_messages at 0x7f34d98c3400>
          └ <fastapi.dependencies.models.Dependant object at 0x7f34d99150f0>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 81, in cinema_room_ws_messages
    await redis_connector(websocket, cinema_room_chanel_name, redis)
          │               │          │                        └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
          │               │          └ 'cinema-room::chanel-e36a08e7-beae-43c1-8013-9ec4492013d6'
          │               └ <starlette.websockets.WebSocket object at 0x7f34d9334b20>
          └ <function redis_connector at 0x7f34d98c1d80>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 73, in redis_connector
    await consumer_handler(websocket=websocket)
          │                          └ <starlette.websockets.WebSocket object at 0x7f34d9334b20>
          └ <function redis_connector.<locals>.consumer_handler at 0x7f34d94c7520>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 55, in consumer_handler
    subs = dict(await pub.pubsub_numsub(cinema_room_chanel_name))
                      │   │             └ 'cinema-room::chanel-e36a08e7-beae-43c1-8013-9ec4492013d6'
                      │   └ <function Redis.pubsub_numsub at 0x7f34da6652d0>
                      └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1085, in execute_command
    return await self.parse_response(conn, command_name, **options)
                 │    │              │     │               └ {}
                 │    │              │     └ 'PUBSUB NUMSUB'
                 │    │              └ Connection<host=127.0.0.1,port=6379,db=1>
                 │    └ <function Redis.parse_response at 0x7f34da659990>
                 └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1101, in parse_response
    response = await connection.read_response()
                     │          └ <function Connection.read_response at 0x7f34da836cb0>
                     └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 900, in read_response
    response = await self._parser.read_response()
                     │    └ <member '_parser' of 'Connection' objects>
                     └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 399, in read_response
    raw = await self._buffer.readline()
                │    └ <member '_buffer' of 'PythonParser' objects>
                └ <aioredis.connection.PythonParser object at 0x7f34d94814e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 327, in readline
    await self._read_from_socket()
          │    └ <function SocketBuffer._read_from_socket at 0x7f34da835750>
          └ <aioredis.connection.SocketBuffer object at 0x7f34d94f9810>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 267, in _read_from_socket
    data = await self._stream.read(self.socket_read_size)
                 │    │            │    └ 65536
                 │    │            └ <aioredis.connection.SocketBuffer object at 0x7f34d94f9810>
                 │    └ None
                 └ <aioredis.connection.SocketBuffer object at 0x7f34d94f9810>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/streams.py", line 669, in read
    await self._wait_for_data('read')
          │    └ <function StreamReader._wait_for_data at 0x7f34db57cf70>
          └ <StreamReader eof transport=<TCPTransport closed=True reading=False 0x558e872bab50>>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/streams.py", line 502, in _wait_for_data
    await self._waiter
          │    └ None
          └ <StreamReader eof transport=<TCPTransport closed=True reading=False 0x558e872bab50>>

asyncio.exceptions.CancelledError
2022-10-30 at 01:45:36 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f34dbaf7520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f34dbcddfc0>
           └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f34dbcdd630>
    └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f34dbb3cc70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
    │    └ <function subprocess_started at 0x7f34dafc4280>
    └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f34dbb3cca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
           │       │   │    └ <function Server.serve at 0x7f34daf9f5b0>
           │       │   └ <uvicorn.server.Server object at 0x7f34dbb3cca0>
           │       └ <function run at 0x7f34db556ef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 47, in run
    _cancel_all_tasks(loop)
    │                 └ <uvloop.Loop running=True closed=False debug=False>
    └ <function _cancel_all_tasks at 0x7f34db5665f0>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 63, in _cancel_all_tasks
    loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))
    │    │                  │     │       └ {<Task pending name='Task-22' coro=<WebSocketProtocol.run_asgi() running at /home/matvey/yandex_practice/graduate_work/.venv/...
    │    │                  │     └ <function gather at 0x7f34db554d30>
    │    │                  └ <module 'asyncio.tasks' from '/home/matvey/.python3.10/lib/python3.10/asyncio/tasks.py'>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7f34d948a050>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d9335690>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7f34d948a0e0>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d9335690>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d9335690>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f34d99b6050>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d9335690>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7f34d99172e0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f34d99b6050>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f34d9914c40>
          └ <fastapi.applications.FastAPI object at 0x7f34d99172e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f34d9914bb0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f34d9914c40>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f34d9914b80>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f34d9914bb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f34d9914b20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f34d9914b80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7f34d9917370>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f34d9914b20>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7f34d9cab0a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f34d9915150>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7f34d948b010>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f34d9915150>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7f34d9334b20>
          └ <function get_websocket_app.<locals>.app at 0x7f34d948af80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'redis': Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>, 'cinema_room_id': 'e36a08e7-beae-43c1-8013-9ec449...
          │         └ <function cinema_room_ws_messages at 0x7f34d98c3400>
          └ <fastapi.dependencies.models.Dependant object at 0x7f34d99150f0>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 81, in cinema_room_ws_messages
    await redis_connector(websocket, cinema_room_chanel_name, redis)
          │               │          │                        └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
          │               │          └ 'cinema-room::chanel-e36a08e7-beae-43c1-8013-9ec4492013d6'
          │               └ <starlette.websockets.WebSocket object at 0x7f34d9334b20>
          └ <function redis_connector at 0x7f34d98c1d80>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 73, in redis_connector
    await consumer_handler(websocket=websocket)
          │                          └ <starlette.websockets.WebSocket object at 0x7f34d9334b20>
          └ <function redis_connector.<locals>.consumer_handler at 0x7f34d94c7520>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 55, in consumer_handler
    subs = dict(await pub.pubsub_numsub(cinema_room_chanel_name))
                      │   │             └ 'cinema-room::chanel-e36a08e7-beae-43c1-8013-9ec4492013d6'
                      │   └ <function Redis.pubsub_numsub at 0x7f34da6652d0>
                      └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1085, in execute_command
    return await self.parse_response(conn, command_name, **options)
                 │    │              │     │               └ {}
                 │    │              │     └ 'PUBSUB NUMSUB'
                 │    │              └ Connection<host=127.0.0.1,port=6379,db=1>
                 │    └ <function Redis.parse_response at 0x7f34da659990>
                 └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1101, in parse_response
    response = await connection.read_response()
                     │          └ <function Connection.read_response at 0x7f34da836cb0>
                     └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 900, in read_response
    response = await self._parser.read_response()
                     │    └ <member '_parser' of 'Connection' objects>
                     └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 399, in read_response
    raw = await self._buffer.readline()
                │    └ <member '_buffer' of 'PythonParser' objects>
                └ <aioredis.connection.PythonParser object at 0x7f34d94814e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 327, in readline
    await self._read_from_socket()
          │    └ <function SocketBuffer._read_from_socket at 0x7f34da835750>
          └ <aioredis.connection.SocketBuffer object at 0x7f34d94f9810>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 267, in _read_from_socket
    data = await self._stream.read(self.socket_read_size)
                 │    │            │    └ 65536
                 │    │            └ <aioredis.connection.SocketBuffer object at 0x7f34d94f9810>
                 │    └ None
                 └ <aioredis.connection.SocketBuffer object at 0x7f34d94f9810>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/streams.py", line 669, in read
    await self._wait_for_data('read')
          │    └ <function StreamReader._wait_for_data at 0x7f34db57cf70>
          └ <StreamReader eof transport=<TCPTransport closed=True reading=False 0x558e872bab50>>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/streams.py", line 502, in _wait_for_data
    await self._waiter
          │    └ None
          └ <StreamReader eof transport=<TCPTransport closed=True reading=False 0x558e872bab50>>

asyncio.exceptions.CancelledError
2022-10-30 at 01:45:36 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f34dbaf7520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f34dbcddfc0>
           └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f34dbcdd630>
    └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f34dbb3cc70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
    │    └ <function subprocess_started at 0x7f34dafc4280>
    └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f34dbb3cca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
           │       │   │    └ <function Server.serve at 0x7f34daf9f5b0>
           │       │   └ <uvicorn.server.Server object at 0x7f34dbb3cca0>
           │       └ <function run at 0x7f34db556ef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 47, in run
    _cancel_all_tasks(loop)
    │                 └ <uvloop.Loop running=True closed=False debug=False>
    └ <function _cancel_all_tasks at 0x7f34db5665f0>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 63, in _cancel_all_tasks
    loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))
    │    │                  │     │       └ {<Task finished name='Task-22' coro=<WebSocketProtocol.run_asgi() done, defined at /home/matvey/yandex_practice/graduate_work...
    │    │                  │     └ <function gather at 0x7f34db554d30>
    │    │                  └ <module 'asyncio.tasks' from '/home/matvey/.python3.10/lib/python3.10/asyncio/tasks.py'>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7f34d948a050>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d94fb280>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7f34d948a0e0>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d94fb280>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d94fb280>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f34d99b6050>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d94fb280>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7f34d99172e0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f34d99b6050>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f34d9914c40>
          └ <fastapi.applications.FastAPI object at 0x7f34d99172e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f34d9914bb0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f34d9914c40>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f34d9914b80>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f34d9914bb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f34d9914b20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f34d9914b80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7f34d9917370>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f34d9914b20>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7f34d9cab0a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f34d9915150>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7f34d948b010>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f34d9915150>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7f34d94f9cf0>
          └ <function get_websocket_app.<locals>.app at 0x7f34d948af80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'redis': Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>, 'cinema_room_id': '4f25cb30-fff6-4389-bfd9-a241a8...
          │         └ <function cinema_room_ws_messages at 0x7f34d98c3400>
          └ <fastapi.dependencies.models.Dependant object at 0x7f34d99150f0>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 81, in cinema_room_ws_messages
    await redis_connector(websocket, cinema_room_chanel_name, redis)
          │               │          │                        └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
          │               │          └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
          │               └ <starlette.websockets.WebSocket object at 0x7f34d94f9cf0>
          └ <function redis_connector at 0x7f34d98c1d80>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 73, in redis_connector
    await consumer_handler(websocket=websocket)
          │                          └ <starlette.websockets.WebSocket object at 0x7f34d94f9cf0>
          └ <function redis_connector.<locals>.consumer_handler at 0x7f34d94c7010>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 55, in consumer_handler
    subs = dict(await pub.pubsub_numsub(cinema_room_chanel_name))
                      │   │             └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
                      │   └ <function Redis.pubsub_numsub at 0x7f34da6652d0>
                      └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1085, in execute_command
    return await self.parse_response(conn, command_name, **options)
                 │    │              │     │               └ {}
                 │    │              │     └ 'PUBSUB NUMSUB'
                 │    │              └ Connection<host=127.0.0.1,port=6379,db=1>
                 │    └ <function Redis.parse_response at 0x7f34da659990>
                 └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1101, in parse_response
    response = await connection.read_response()
                     │          └ <function Connection.read_response at 0x7f34da836cb0>
                     └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 900, in read_response
    response = await self._parser.read_response()
                     │    └ <member '_parser' of 'Connection' objects>
                     └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 399, in read_response
    raw = await self._buffer.readline()
                │    └ <member '_buffer' of 'PythonParser' objects>
                └ <aioredis.connection.PythonParser object at 0x7f34d9481540>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 327, in readline
    await self._read_from_socket()
          │    └ <function SocketBuffer._read_from_socket at 0x7f34da835750>
          └ <aioredis.connection.SocketBuffer object at 0x7f34d94fa590>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 267, in _read_from_socket
    data = await self._stream.read(self.socket_read_size)
                 │    │            │    └ 65536
                 │    │            └ <aioredis.connection.SocketBuffer object at 0x7f34d94fa590>
                 │    └ None
                 └ <aioredis.connection.SocketBuffer object at 0x7f34d94fa590>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/streams.py", line 669, in read
    await self._wait_for_data('read')
          │    └ <function StreamReader._wait_for_data at 0x7f34db57cf70>
          └ <StreamReader eof transport=<TCPTransport closed=True reading=False 0x558e873608e0>>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/streams.py", line 502, in _wait_for_data
    await self._waiter
          │    └ None
          └ <StreamReader eof transport=<TCPTransport closed=True reading=False 0x558e873608e0>>

asyncio.exceptions.CancelledError
2022-10-30 at 01:45:36 | ERROR | Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 8
               └ <function _main at 0x7f34dbaf7520>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f34dbcddfc0>
           └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f34dbcdd630>
    └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/.python3.10/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f34dbb3cc70>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
    │    └ <function subprocess_started at 0x7f34dafc4280>
    └ <SpawnProcess name='SpawnProcess-10' parent=21515 started>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f34dbb3cca0>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0>]
           │       │   │    └ <function Server.serve at 0x7f34daf9f5b0>
           │       │   └ <uvicorn.server.Server object at 0x7f34dbb3cca0>
           │       └ <function run at 0x7f34db556ef0>
           └ <module 'asyncio' from '/home/matvey/.python3.10/lib/python3.10/asyncio/__init__.py'>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 47, in run
    _cancel_all_tasks(loop)
    │                 └ <uvloop.Loop running=True closed=False debug=False>
    └ <function _cancel_all_tasks at 0x7f34db5665f0>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/runners.py", line 63, in _cancel_all_tasks
    loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))
    │    │                  │     │       └ {<Task finished name='Task-22' coro=<WebSocketProtocol.run_asgi() done, defined at /home/matvey/yandex_practice/graduate_work...
    │    │                  │     └ <function gather at 0x7f34db554d30>
    │    │                  └ <module 'asyncio.tasks' from '/home/matvey/.python3.10/lib/python3.10/asyncio/tasks.py'>
    │    └ <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
    └ <uvloop.Loop running=True closed=False debug=False>
> File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 184, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
                   │    │   │    │      │    │             │    └ <function WebSocketProtocol.asgi_send at 0x7f34d948a050>
                   │    │   │    │      │    │             └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d94fb280>
                   │    │   │    │      │    └ <function WebSocketProtocol.asgi_receive at 0x7f34d948a0e0>
                   │    │   │    │      └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d94fb280>
                   │    │   │    └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                   │    │   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d94fb280>
                   │    └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f34d99b6050>
                   └ <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34d94fb280>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
                 │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                 │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
                 │    └ <fastapi.applications.FastAPI object at 0x7f34d99172e0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f34d99b6050>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/applications.py", line 269, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
                           │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
                           └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │                │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │                └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f34d9914c40>
          └ <fastapi.applications.FastAPI object at 0x7f34d99172e0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 149, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f34d9914bb0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f34d9914c40>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 76, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f34d9914b80>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f34d9914bb0>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/exceptions.py", line 69, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f34d9914b20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f34d9914b80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <fastapi.routing.APIRouter object at 0x7f34d9917370>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f34d9914b20>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 670, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │     │      │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │     │      └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │     └ <function WebSocketRoute.handle at 0x7f34d9cab0a0>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f34d9915150>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 325, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <bound method WebSocketProtocol.asgi_send of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7f34...
          │    │   │      └ <bound method WebSocketProtocol.asgi_receive of <uvicorn.protocols.websockets.websockets_impl.WebSocketProtocol object at 0x7...
          │    │   └ {'type': 'websocket', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'scheme': 'ws', 'server': ('1...
          │    └ <function websocket_session.<locals>.app at 0x7f34d948b010>
          └ <fastapi.routing.APIWebSocketRoute object at 0x7f34d9915150>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/starlette/routing.py", line 81, in app
    await func(session)
          │    └ <starlette.websockets.WebSocket object at 0x7f34d94f9cf0>
          └ <function get_websocket_app.<locals>.app at 0x7f34d948af80>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 279, in app
    await dependant.call(**values)
          │         │      └ {'redis': Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>, 'cinema_room_id': '4f25cb30-fff6-4389-bfd9-a241a8...
          │         └ <function cinema_room_ws_messages at 0x7f34d98c3400>
          └ <fastapi.dependencies.models.Dependant object at 0x7f34d99150f0>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 81, in cinema_room_ws_messages
    await redis_connector(websocket, cinema_room_chanel_name, redis)
          │               │          │                        └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
          │               │          └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
          │               └ <starlette.websockets.WebSocket object at 0x7f34d94f9cf0>
          └ <function redis_connector at 0x7f34d98c1d80>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 73, in redis_connector
    await consumer_handler(websocket=websocket)
          │                          └ <starlette.websockets.WebSocket object at 0x7f34d94f9cf0>
          └ <function redis_connector.<locals>.consumer_handler at 0x7f34d94c7010>

  File "/home/matvey/yandex_practice/graduate_work/cinema_api/api/v1/cinema_room_ws.py", line 55, in consumer_handler
    subs = dict(await pub.pubsub_numsub(cinema_room_chanel_name))
                      │   │             └ 'cinema-room::chanel-4f25cb30-fff6-4389-bfd9-a241a8e99b53'
                      │   └ <function Redis.pubsub_numsub at 0x7f34da6652d0>
                      └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>

  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1085, in execute_command
    return await self.parse_response(conn, command_name, **options)
                 │    │              │     │               └ {}
                 │    │              │     └ 'PUBSUB NUMSUB'
                 │    │              └ Connection<host=127.0.0.1,port=6379,db=1>
                 │    └ <function Redis.parse_response at 0x7f34da659990>
                 └ Redis<ConnectionPool<Connection<host=127.0.0.1,port=6379,db=1>>>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/client.py", line 1101, in parse_response
    response = await connection.read_response()
                     │          └ <function Connection.read_response at 0x7f34da836cb0>
                     └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 900, in read_response
    response = await self._parser.read_response()
                     │    └ <member '_parser' of 'Connection' objects>
                     └ Connection<host=127.0.0.1,port=6379,db=1>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 399, in read_response
    raw = await self._buffer.readline()
                │    └ <member '_buffer' of 'PythonParser' objects>
                └ <aioredis.connection.PythonParser object at 0x7f34d9481540>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 327, in readline
    await self._read_from_socket()
          │    └ <function SocketBuffer._read_from_socket at 0x7f34da835750>
          └ <aioredis.connection.SocketBuffer object at 0x7f34d94fa590>
  File "/home/matvey/yandex_practice/graduate_work/.venv/lib/python3.10/site-packages/aioredis/connection.py", line 267, in _read_from_socket
    data = await self._stream.read(self.socket_read_size)
                 │    │            │    └ 65536
                 │    │            └ <aioredis.connection.SocketBuffer object at 0x7f34d94fa590>
                 │    └ None
                 └ <aioredis.connection.SocketBuffer object at 0x7f34d94fa590>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/streams.py", line 669, in read
    await self._wait_for_data('read')
          │    └ <function StreamReader._wait_for_data at 0x7f34db57cf70>
          └ <StreamReader eof transport=<TCPTransport closed=True reading=False 0x558e873608e0>>
  File "/home/matvey/.python3.10/lib/python3.10/asyncio/streams.py", line 502, in _wait_for_data
    await self._waiter
          │    └ None
          └ <StreamReader eof transport=<TCPTransport closed=True reading=False 0x558e873608e0>>

asyncio.exceptions.CancelledError
2022-10-30 at 01:45:36 | INFO | Stopping reloader process [21515]
